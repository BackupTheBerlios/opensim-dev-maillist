<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev]	Refactoring	SceneObjectGroup	-	Introducing	Components
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%0A%09Refactoring%09SceneObjectGroup%09-%09Introducing%09Components&In-Reply-To=%3C4B27BBC8.1030505%40metaverseink.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008117.html">
   <LINK REL="Next"  HREF="008120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev]	Refactoring	SceneObjectGroup	-	Introducing	Components</H1>
    <B>diva at metaverseink.com</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%0A%09Refactoring%09SceneObjectGroup%09-%09Introducing%09Components&In-Reply-To=%3C4B27BBC8.1030505%40metaverseink.com%3E"
       TITLE="[Opensim-dev]	Refactoring	SceneObjectGroup	-	Introducing	Components">diva at metaverseink.com
       </A><BR>
    <I>Tue Dec 15 17:39:36 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="008117.html">[Opensim-dev]	Refactoring	SceneObjectGroup	-	Introducing	Components
</A></li>
        <LI>Next message: <A HREF="008120.html">[Opensim-dev] Refactoring SceneObjectGroup - Introducing	Components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8118">[ date ]</a>
              <a href="thread.html#8118">[ thread ]</a>
              <a href="subject.html#8118">[ subject ]</a>
              <a href="author.html#8118">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yeah, I'm not worried about the refactorings. As long as what can be 
done now can be done after, too, hopefully even better. SOG/SOP need love.

Melanie wrote:
&gt;<i> Well, some people have rather complex extensions:
</I>&gt;<i> 
</I>&gt;<i> Combat modules
</I>&gt;<i> Script engines
</I>&gt;<i> Traffic simulations
</I>&gt;<i> Scientific simulations
</I>&gt;<i> E-Learning
</I>&gt;<i> 
</I>&gt;<i> etc... to cite just a few I know of.
</I>&gt;<i> 
</I>&gt;<i> I think this needs to be said up front. It's not goign to be easy.
</I>&gt;<i> And you can say that again. That's not to say that i doesn't have to
</I>&gt;<i> be done.
</I>&gt;<i> 
</I>&gt;<i> I'm all for it, it's needed to make progress. I'm prepared to carry
</I>&gt;<i> my part of the rewriting of my stuff.
</I>&gt;<i> 
</I>&gt;<i> What I intend to do is make it very clear, it's not easy sailing,
</I>&gt;<i> not 3-line changes here. To forestall the cries later. Who wants
</I>&gt;<i> angry mobs with torches and pitchforks, after all?
</I>&gt;<i> 
</I>&gt;<i> Melanie
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Frisby, Adam wrote:
</I>&gt;&gt;<i> Not too too painful. The vast majority should be cut&amp;paste-able.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The big stuff will be people who have code tied to SOG/SOP on any deep level - however again, a lot of it should be transportable; it's going to require a healthy amount of refactoring unfortunately however.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I had a longer reply to this which is still sitting open - I'll get to it once I finish a little accounting work.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Adam
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A> [mailto:opensim-dev-
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">bounces at lists.berlios.de</A>] On Behalf Of Melanie
</I>&gt;&gt;&gt;<i> Sent: Tuesday, 15 December 2009 8:05 AM
</I>&gt;&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">diva at metaverseink.com</A>; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> Subject: Re: [Opensim-dev] Refactoring SceneObjectGroup - Introducing
</I>&gt;&gt;&gt;<i> Components
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> in fact, yes. Anyone who has private modules is in for a rather
</I>&gt;&gt;&gt;<i> painful rewrite. That goes double for SOP/SOG extensions.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Ommelettes and eggs...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Melanie
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">diva at metaverseink.com</A> wrote:
</I>&gt;&gt;&gt;&gt;<i> I have a question. How does this impact, if it does, extensions of
</I>&gt;&gt;&gt;&gt;<i> SceneObjectGroup? For example, I have a traffic simulation where
</I>&gt;&gt;&gt;&gt;<i> Vehicles extend SOG. How will this be affected? Will I be using
</I>&gt;&gt;&gt;&gt;<i> components instead?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Frisby, Adam wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> Bumpity Bump. If I don't hear any comments on this, I'm going to
</I>&gt;&gt;&gt;<i> assume
</I>&gt;&gt;&gt;&gt;&gt;<i> the proposal is sound and have carte blanche to break OpenSim at my
</I>&gt;&gt;&gt;&gt;&gt;<i> whim. ;)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> (find the original post for the attachment.)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Adam
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *From:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>] *On Behalf Of *Frisby,
</I>&gt;&gt;&gt;<i> Adam
</I>&gt;&gt;&gt;&gt;&gt;<i> *Sent:* Friday, 11 December 2009 3:48 AM
</I>&gt;&gt;&gt;&gt;&gt;<i> *To:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> *Subject:* [Opensim-dev] Refactoring SceneObjectGroup - Introducing
</I>&gt;&gt;&gt;&gt;&gt;<i> Components
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Hi Folks,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I've got a fairly complicated proposal to deliver here today - the
</I>&gt;&gt;&gt;<i> short
</I>&gt;&gt;&gt;&gt;&gt;<i> of it is; I'd like to go ahead and replace the current Scene Object
</I>&gt;&gt;&gt;&gt;&gt;<i> representation model - at a fairly comprehensive &amp; complete level.
</I>&gt;&gt;&gt;<i> Some
</I>&gt;&gt;&gt;&gt;&gt;<i> of you have had the misfortune of working with
</I>&gt;&gt;&gt;&gt;&gt;<i> SceneObjectPart/SceneObjectGroup and should understand what I am
</I>&gt;&gt;&gt;<i> talking
</I>&gt;&gt;&gt;&gt;&gt;<i> about.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> There are several stages to this proposal - but I would like to talk
</I>&gt;&gt;&gt;&gt;&gt;<i> about today the first big one (and a small outline of the larger
</I>&gt;&gt;&gt;<i> project
</I>&gt;&gt;&gt;&gt;&gt;<i> - the reason for this being some of the later details require a
</I>&gt;&gt;&gt;<i> little
</I>&gt;&gt;&gt;&gt;&gt;<i> more nutting out before I have a complete proposal for them).
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> So - the larger proposal in a nutshell; I would like to:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *         Merge SceneObjectGroup &amp; SceneObjectPart
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *         Enable full inheritance &amp; linking (ie, hierarchical
</I>&gt;&gt;&gt;<i> linking)
</I>&gt;&gt;&gt;&gt;&gt;<i> *         Make programming with SceneObjects possible &amp; reasonable
</I>&gt;&gt;&gt;<i> from
</I>&gt;&gt;&gt;&gt;&gt;<i> the outside (ie have a clean API).
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *         Provide the ability to extend SceneObjects with
</I>&gt;&gt;&gt;<i> &quot;components&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> to introduce new properties and behaviours.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The item I'd like to talk about today would be implementing
</I>&gt;&gt;&gt;<i> Components.
</I>&gt;&gt;&gt;&gt;&gt;<i> Components are small C# classes that may be attached to any
</I>&gt;&gt;&gt;<i> SceneObject
</I>&gt;&gt;&gt;&gt;&gt;<i> arbitrarily.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> A component is any class inheriting from IComponent - IComponent
</I>&gt;&gt;&gt;<i> carries
</I>&gt;&gt;&gt;&gt;&gt;<i> only two properties; a serialisation property (returns the current
</I>&gt;&gt;&gt;&gt;&gt;<i> 'state' for serialisation purposes), and a type property (which
</I>&gt;&gt;&gt;&gt;&gt;<i> recognises the 'type' of component that it is) - components allow
</I>&gt;&gt;&gt;<i> you to
</I>&gt;&gt;&gt;&gt;&gt;<i> attach arbitrary data to an object for the purposes of interacting
</I>&gt;&gt;&gt;<i> with
</I>&gt;&gt;&gt;&gt;&gt;<i> a region module. For instance, a &quot;Mesh&quot; module (which is my current
</I>&gt;&gt;&gt;<i> best
</I>&gt;&gt;&gt;&gt;&gt;<i> example) would have a MeshComponent that included all the extra data
</I>&gt;&gt;&gt;<i> to
</I>&gt;&gt;&gt;&gt;&gt;<i> tag an object with related to meshes - which would get serialised
</I>&gt;&gt;&gt;<i> and
</I>&gt;&gt;&gt;&gt;&gt;<i> passed around with the main object. When deserialized - a &quot;Factory&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i> handles making sure the MeshComponent is deserialized with the main
</I>&gt;&gt;&gt;<i> object.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I've attached a document which is my current state of the whole
</I>&gt;&gt;&gt;<i> proposal
</I>&gt;&gt;&gt;&gt;&gt;<i> which includes some examples &amp; more detail. Please note that Phase 2
</I>&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;&gt;&gt;<i> not finalised yet - and some decisions were discussed about changing
</I>&gt;&gt;&gt;<i> two
</I>&gt;&gt;&gt;&gt;&gt;<i> facets in particular.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *         Enabling inheritance of components+sceneobject to make
</I>&gt;&gt;&gt;&gt;&gt;<i> speedy-classes for common use cases (eg PrimObject inherits
</I>&gt;&gt;&gt;&gt;&gt;<i> PrimComponent and SceneObject)
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *         Allowing more than one factory potentially; for
</I>&gt;&gt;&gt;<i> manufacturing
</I>&gt;&gt;&gt;&gt;&gt;<i> said speedy-classes.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> *         Note that these shorthand classes would still use the
</I>&gt;&gt;&gt;<i> standard
</I>&gt;&gt;&gt;&gt;&gt;<i> .Has / .Get methods; they would just return 'this' where the
</I>&gt;&gt;&gt;<i> particular
</I>&gt;&gt;&gt;&gt;&gt;<i> component type is concerned.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> To begin with - I would like to implement components as an extra
</I>&gt;&gt;&gt;&gt;&gt;<i> non-serialised property of the SceneObjectPart; this will occur very
</I>&gt;&gt;&gt;&gt;&gt;<i> shortly after 0.7 is tagged; which I would like to do once ROBUST
</I>&gt;&gt;&gt;<i> covers
</I>&gt;&gt;&gt;&gt;&gt;<i> all the main services (I heard something about late-december/early-
</I>&gt;&gt;&gt;<i> jan);
</I>&gt;&gt;&gt;&gt;&gt;<i> this first stage should not break anything in particular - however
</I>&gt;&gt;&gt;<i> once
</I>&gt;&gt;&gt;&gt;&gt;<i> that Is complete, I would like to migrate properties into components
</I>&gt;&gt;&gt;<i> in
</I>&gt;&gt;&gt;&gt;&gt;<i> order to modularised the codebase better.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> An example of this would be PrimData - primdata is unique to the
</I>&gt;&gt;&gt;<i> Second
</I>&gt;&gt;&gt;&gt;&gt;<i> Life use case, and irrelevant to others; in this case, we'll move
</I>&gt;&gt;&gt;&gt;&gt;<i> PrimData into a commonly accessed component (eg
</I>&gt;&gt;&gt;&gt;&gt;<i> &quot;SceneObject.Get&lt;PrimData&gt;.Hollow = 0.9f;&quot;) - once the move to
</I>&gt;&gt;&gt;&gt;&gt;<i> components is complete for the common data; then creating the final
</I>&gt;&gt;&gt;&gt;&gt;<i> SceneObject class which merges SceneObjectGroup+Part should be a
</I>&gt;&gt;&gt;<i> fairly
</I>&gt;&gt;&gt;&gt;&gt;<i> painless process.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Please take a read of the document attached for more information -
</I>&gt;&gt;&gt;<i> and I
</I>&gt;&gt;&gt;&gt;&gt;<i> am very keen to hear anyones thoughts as to use cases that this
</I>&gt;&gt;&gt;<i> model
</I>&gt;&gt;&gt;&gt;&gt;<i> will make more difficult; or could not support. The goal with this
</I>&gt;&gt;&gt;&gt;&gt;<i> project is to make OpenSim support more with less - allowing third
</I>&gt;&gt;&gt;<i> party
</I>&gt;&gt;&gt;&gt;&gt;<i> modules to really take OpenSim as a framework to the next level; and
</I>&gt;&gt;&gt;&gt;&gt;<i> make a more modular server for other clients &amp; platforms.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks!
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Adam
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> --------------------------------------------------------------------
</I>&gt;&gt;&gt;<i> ----
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008117.html">[Opensim-dev]	Refactoring	SceneObjectGroup	-	Introducing	Components
</A></li>
	<LI>Next message: <A HREF="008120.html">[Opensim-dev] Refactoring SceneObjectGroup - Introducing	Components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8118">[ date ]</a>
              <a href="thread.html#8118">[ thread ]</a>
              <a href="subject.html#8118">[ subject ]</a>
              <a href="author.html#8118">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
