<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Refactoring	SceneObjectGroup	-	Introducing	Components
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Refactoring%0A%09SceneObjectGroup%09-%09Introducing%09Components&In-Reply-To=%3C63FAD4F222230A4EA79DE9E8BE6647354DC55AC9%40winxbeus19.exchange.xchg%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008115.html">
   <LINK REL="Next"  HREF="008117.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Refactoring	SceneObjectGroup	-	Introducing	Components</H1>
    <B>Frisby, Adam</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Refactoring%0A%09SceneObjectGroup%09-%09Introducing%09Components&In-Reply-To=%3C63FAD4F222230A4EA79DE9E8BE6647354DC55AC9%40winxbeus19.exchange.xchg%3E"
       TITLE="[Opensim-dev] Refactoring	SceneObjectGroup	-	Introducing	Components">adam at deepthink.com.au
       </A><BR>
    <I>Tue Dec 15 17:24:37 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="008115.html">[Opensim-dev] Refactoring SceneObjectGroup	-	Introducing	Components
</A></li>
        <LI>Next message: <A HREF="008117.html">[Opensim-dev]	Refactoring	SceneObjectGroup	-	Introducing	Components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8116">[ date ]</a>
              <a href="thread.html#8116">[ thread ]</a>
              <a href="subject.html#8116">[ subject ]</a>
              <a href="author.html#8116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Not too too painful. The vast majority should be cut&amp;paste-able.

The big stuff will be people who have code tied to SOG/SOP on any deep level - however again, a lot of it should be transportable; it's going to require a healthy amount of refactoring unfortunately however.

I had a longer reply to this which is still sitting open - I'll get to it once I finish a little accounting work.

Adam

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A> [mailto:opensim-dev-
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">bounces at lists.berlios.de</A>] On Behalf Of Melanie
</I>&gt;<i> Sent: Tuesday, 15 December 2009 8:05 AM
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">diva at metaverseink.com</A>; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [Opensim-dev] Refactoring SceneObjectGroup - Introducing
</I>&gt;<i> Components
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> in fact, yes. Anyone who has private modules is in for a rather
</I>&gt;<i> painful rewrite. That goes double for SOP/SOG extensions.
</I>&gt;<i> 
</I>&gt;<i> Ommelettes and eggs...
</I>&gt;<i> 
</I>&gt;<i> Melanie
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">diva at metaverseink.com</A> wrote:
</I>&gt;<i> &gt; I have a question. How does this impact, if it does, extensions of
</I>&gt;<i> &gt; SceneObjectGroup? For example, I have a traffic simulation where
</I>&gt;<i> &gt; Vehicles extend SOG. How will this be affected? Will I be using
</I>&gt;<i> &gt; components instead?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Frisby, Adam wrote:
</I>&gt;<i> &gt;&gt; Bumpity Bump. If I don't hear any comments on this, I'm going to
</I>&gt;<i> assume
</I>&gt;<i> &gt;&gt; the proposal is sound and have carte blanche to break OpenSim at my
</I>&gt;<i> &gt;&gt; whim. ;)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; (find the original post for the attachment.)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Regards,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Adam
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *From:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>] *On Behalf Of *Frisby,
</I>&gt;<i> Adam
</I>&gt;<i> &gt;&gt; *Sent:* Friday, 11 December 2009 3:48 AM
</I>&gt;<i> &gt;&gt; *To:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; *Subject:* [Opensim-dev] Refactoring SceneObjectGroup - Introducing
</I>&gt;<i> &gt;&gt; Components
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hi Folks,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I've got a fairly complicated proposal to deliver here today - the
</I>&gt;<i> short
</I>&gt;<i> &gt;&gt; of it is; I'd like to go ahead and replace the current Scene Object
</I>&gt;<i> &gt;&gt; representation model - at a fairly comprehensive &amp; complete level.
</I>&gt;<i> Some
</I>&gt;<i> &gt;&gt; of you have had the misfortune of working with
</I>&gt;<i> &gt;&gt; SceneObjectPart/SceneObjectGroup and should understand what I am
</I>&gt;<i> talking
</I>&gt;<i> &gt;&gt; about.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; There are several stages to this proposal - but I would like to talk
</I>&gt;<i> &gt;&gt; about today the first big one (and a small outline of the larger
</I>&gt;<i> project
</I>&gt;<i> &gt;&gt; - the reason for this being some of the later details require a
</I>&gt;<i> little
</I>&gt;<i> &gt;&gt; more nutting out before I have a complete proposal for them).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; So - the larger proposal in a nutshell; I would like to:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *         Merge SceneObjectGroup &amp; SceneObjectPart
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *         Enable full inheritance &amp; linking (ie, hierarchical
</I>&gt;<i> linking)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *         Make programming with SceneObjects possible &amp; reasonable
</I>&gt;<i> from
</I>&gt;<i> &gt;&gt; the outside (ie have a clean API).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *         Provide the ability to extend SceneObjects with
</I>&gt;<i> &quot;components&quot;
</I>&gt;<i> &gt;&gt; to introduce new properties and behaviours.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; The item I'd like to talk about today would be implementing
</I>&gt;<i> Components.
</I>&gt;<i> &gt;&gt; Components are small C# classes that may be attached to any
</I>&gt;<i> SceneObject
</I>&gt;<i> &gt;&gt; arbitrarily.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; A component is any class inheriting from IComponent - IComponent
</I>&gt;<i> carries
</I>&gt;<i> &gt;&gt; only two properties; a serialisation property (returns the current
</I>&gt;<i> &gt;&gt; 'state' for serialisation purposes), and a type property (which
</I>&gt;<i> &gt;&gt; recognises the 'type' of component that it is) - components allow
</I>&gt;<i> you to
</I>&gt;<i> &gt;&gt; attach arbitrary data to an object for the purposes of interacting
</I>&gt;<i> with
</I>&gt;<i> &gt;&gt; a region module. For instance, a &quot;Mesh&quot; module (which is my current
</I>&gt;<i> best
</I>&gt;<i> &gt;&gt; example) would have a MeshComponent that included all the extra data
</I>&gt;<i> to
</I>&gt;<i> &gt;&gt; tag an object with related to meshes - which would get serialised
</I>&gt;<i> and
</I>&gt;<i> &gt;&gt; passed around with the main object. When deserialized - a &quot;Factory&quot;
</I>&gt;<i> &gt;&gt; handles making sure the MeshComponent is deserialized with the main
</I>&gt;<i> object.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I've attached a document which is my current state of the whole
</I>&gt;<i> proposal
</I>&gt;<i> &gt;&gt; which includes some examples &amp; more detail. Please note that Phase 2
</I>&gt;<i> is
</I>&gt;<i> &gt;&gt; not finalised yet - and some decisions were discussed about changing
</I>&gt;<i> two
</I>&gt;<i> &gt;&gt; facets in particular.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *         Enabling inheritance of components+sceneobject to make
</I>&gt;<i> &gt;&gt; speedy-classes for common use cases (eg PrimObject inherits
</I>&gt;<i> &gt;&gt; PrimComponent and SceneObject)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *         Allowing more than one factory potentially; for
</I>&gt;<i> manufacturing
</I>&gt;<i> &gt;&gt; said speedy-classes.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; *         Note that these shorthand classes would still use the
</I>&gt;<i> standard
</I>&gt;<i> &gt;&gt; .Has / .Get methods; they would just return 'this' where the
</I>&gt;<i> particular
</I>&gt;<i> &gt;&gt; component type is concerned.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; To begin with - I would like to implement components as an extra
</I>&gt;<i> &gt;&gt; non-serialised property of the SceneObjectPart; this will occur very
</I>&gt;<i> &gt;&gt; shortly after 0.7 is tagged; which I would like to do once ROBUST
</I>&gt;<i> covers
</I>&gt;<i> &gt;&gt; all the main services (I heard something about late-december/early-
</I>&gt;<i> jan);
</I>&gt;<i> &gt;&gt; this first stage should not break anything in particular - however
</I>&gt;<i> once
</I>&gt;<i> &gt;&gt; that Is complete, I would like to migrate properties into components
</I>&gt;<i> in
</I>&gt;<i> &gt;&gt; order to modularised the codebase better.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; An example of this would be PrimData - primdata is unique to the
</I>&gt;<i> Second
</I>&gt;<i> &gt;&gt; Life use case, and irrelevant to others; in this case, we'll move
</I>&gt;<i> &gt;&gt; PrimData into a commonly accessed component (eg
</I>&gt;<i> &gt;&gt; &quot;SceneObject.Get&lt;PrimData&gt;.Hollow = 0.9f;&quot;) - once the move to
</I>&gt;<i> &gt;&gt; components is complete for the common data; then creating the final
</I>&gt;<i> &gt;&gt; SceneObject class which merges SceneObjectGroup+Part should be a
</I>&gt;<i> fairly
</I>&gt;<i> &gt;&gt; painless process.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Please take a read of the document attached for more information -
</I>&gt;<i> and I
</I>&gt;<i> &gt;&gt; am very keen to hear anyones thoughts as to use cases that this
</I>&gt;<i> model
</I>&gt;<i> &gt;&gt; will make more difficult; or could not support. The goal with this
</I>&gt;<i> &gt;&gt; project is to make OpenSim support more with less - allowing third
</I>&gt;<i> party
</I>&gt;<i> &gt;&gt; modules to really take OpenSim as a framework to the next level; and
</I>&gt;<i> &gt;&gt; make a more modular server for other clients &amp; platforms.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thanks!
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Adam
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --------------------------------------------------------------------
</I>&gt;<i> ----
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008115.html">[Opensim-dev] Refactoring SceneObjectGroup	-	Introducing	Components
</A></li>
	<LI>Next message: <A HREF="008117.html">[Opensim-dev]	Refactoring	SceneObjectGroup	-	Introducing	Components
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8116">[ date ]</a>
              <a href="thread.html#8116">[ thread ]</a>
              <a href="subject.html#8116">[ subject ]</a>
              <a href="author.html#8116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
