<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] IRegisterInterface for extending scene entities
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2012-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20IRegisterInterface%20for%20extending%20scene%20entities&In-Reply-To=%3CCAAQTD4VKsE_J46LvCFo1s2AtSrm6OLNTymwqQbmVMsBFcrA%2BfA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011571.html">
   <LINK REL="Next"  HREF="011573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] IRegisterInterface for extending scene entities</H1>
    <B>Dahlia Trimble</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20IRegisterInterface%20for%20extending%20scene%20entities&In-Reply-To=%3CCAAQTD4VKsE_J46LvCFo1s2AtSrm6OLNTymwqQbmVMsBFcrA%2BfA%40mail.gmail.com%3E"
       TITLE="[Opensim-dev] IRegisterInterface for extending scene entities">dahliatrimble at gmail.com
       </A><BR>
    <I>Sat Dec 29 04:29:04 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011571.html">[Opensim-dev] IRegisterInterface for extending scene entities
</A></li>
        <LI>Next message: <A HREF="011573.html">[Opensim-dev] IRegisterInterface for extending scene entities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11572">[ date ]</a>
              <a href="thread.html#11572">[ thread ]</a>
              <a href="subject.html#11572">[ subject ]</a>
              <a href="author.html#11572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>+2 on a hierarchical entity-component design. I have several prototype
servers and viewers implemented in various languages which use variations
of this architecture and I've found it to be very efficient and flexible.
I've also used it in a prototype c++/opengl viewer which is compatible with
SL/OpenSimulator content (prims, sculpties, linksets, avatars, meshes,
terrain) and it's quite capable of functioning in this type of scenario.and
has performance which is competitive with the fastest LL based viewers I've
seen.

I do have mixed feelings about trying to refactor the existing
OpenSimulator codebase into such an architecture. So much of the codebase
assumes SOG/SOP as the foundation that it may be nearly impossible task to
convert. If this is the case, I would suggest first doing a more detailed
analysis of how other shared online environments are implemented before
attempting a new design; other systems which don't duplicate the SL model;
This could result in a far more flexible design which could take
OpenSimulator far beyond what SL users expect in a server.

On Fri, Dec 28, 2012 at 3:13 PM, James Hughes &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jamesh at bluewallgroup.com</A>&gt;wrote:

&gt;<i> The original proposal to the dev list is here: <A HREF="http://lists.berlios.de/**">http://lists.berlios.de/**</A>
</I>&gt;<i> pipermail/opensim-dev/2009-**December/008098.html&lt;<A HREF="../2009-December/008098.html">http://lists.berlios.de/pipermail/opensim-dev/2009-December/008098.html</A>&gt;
</I>&gt;<i>
</I>&gt;<i> And the attached document here: <A HREF="https://lists.berlios.de/**">https://lists.berlios.de/**</A>
</I>&gt;<i> pipermail/opensim-dev/**attachments/20091211/6e190ca7/**attachment.pdf&lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20091211/6e190ca7/attachment.pdf">https://lists.berlios.de/pipermail/opensim-dev/attachments/20091211/6e190ca7/attachment.pdf</A>&gt;
</I>&gt;<i>
</I>&gt;<i> -BlueWall
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 12/28/2012 02:24 PM, Adams, Robert wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Sounds perfect. The reason I started this here was to get the discussion
</I>&gt;&gt;<i> bouncing.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm interested in seeing past proposals. I searched around the
</I>&gt;&gt;<i> OpenSimulator wiki looking for Adam's old proposal (Wiki's are just useless
</I>&gt;&gt;<i> for finding and organizing things) but I could not find it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -- ra
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.</A>**berlios.de&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>&gt;[mailto:
</I>&gt;&gt;<i> opensim-dev-bounces@**lists.berlios.de&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>&gt;]
</I>&gt;&gt;<i> On Behalf Of Melanie
</I>&gt;&gt;<i> Sent: Friday, December 28, 2012 10:59 AM
</I>&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> Subject: Re: [Opensim-dev] IRegisterInterface for extending scene entities
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I suggest we bounce this about a bit and maybe cooperatively work on a
</I>&gt;&gt;<i> test case/POC. That will certainly clarify issues. I could also pull out
</I>&gt;&gt;<i> the prosal I did for ReX which deals with this
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Melanie
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 28 Dec 2012, at 18:38, &quot;Adams, Robert&quot;&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">robert.adams at intel.com</A>**&gt;
</I>&gt;&gt;<i>  wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  I agree with &quot;not reinventing the wheel&quot;.  And your valid concerns about
</I>&gt;&gt;&gt;<i> the implementation are probably just the tip of the iceberg.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have been toying with the architectural idea that OpenSim core only
</I>&gt;&gt;&gt;<i> provides a basic framework. Functionalities are added as plugin modules
</I>&gt;&gt;&gt;<i> rather than implemented as if's and tests imbedded in core. For instance,
</I>&gt;&gt;&gt;<i> could linksets be implemented as a plugin module[1]? Or maybe entity
</I>&gt;&gt;&gt;<i> physical representation (meshing)?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I merely consider llSetKeyFrameMotion as a test case to expose needed
</I>&gt;&gt;&gt;<i> core features which support plugin modules (Necessary events available?
</I>&gt;&gt;&gt;<i> Correct data-structures exposed/hidden? ...)  Like you, I am pretty sure
</I>&gt;&gt;&gt;<i> the ability to programmatically extend scene entities will be needed and is
</I>&gt;&gt;&gt;<i> a Good Thing.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Since llSetKeyframeMotion has already been completed and will be
</I>&gt;&gt;&gt;<i> incorporated soon, I'll look for another simple test case to exercise the
</I>&gt;&gt;&gt;<i> requirements for full featured plugin modules.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -- ra
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> [1] Why would one want to do this? I've been thinking about fancy
</I>&gt;&gt;&gt;<i> linksets where the joints are not fixed and static but could be
</I>&gt;&gt;&gt;<i> parameterized and dynamic (hinges, sliders, 6DOF, ...). This could be used
</I>&gt;&gt;&gt;<i> to support skeletons, doors with real hinges and/or weird and wonderful
</I>&gt;&gt;&gt;<i> vehicles. Rather than mangling OpenSim core with lots of experimental code,
</I>&gt;&gt;&gt;<i> it would be nice if I could build an &quot;ExtendedLinksets&quot; module that could
</I>&gt;&gt;&gt;<i> be plugged in and experimented with.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.</A>**berlios.de&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>&gt;
</I>&gt;&gt;&gt;<i> [mailto:opensim-dev-bounces@**lists.berlios.de&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>&gt;]
</I>&gt;&gt;&gt;<i> On Behalf Of Melanie
</I>&gt;&gt;&gt;<i> Sent: Friday, December 28, 2012 12:44 AM
</I>&gt;&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> Subject: Re: [Opensim-dev] IRegisterInterface for extending scene
</I>&gt;&gt;&gt;<i> entities
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> first off, extending scene entities is a Good Thing. I'll think a bit
</I>&gt;&gt;&gt;<i> about the ins and outs of it and the caveats (for instance, module load
</I>&gt;&gt;&gt;<i> order will have some hidden traps for the unwary) and serialization - well,
</I>&gt;&gt;&gt;<i> there be dragons, you can't serialize module refs/interfaces since the
</I>&gt;&gt;&gt;<i> destination may not have them.....
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> llSetKeyfranedMotion can most likely not be implemented that way. We
</I>&gt;&gt;&gt;<i> know, because we have implemented it. Also, there is no need to reinvent
</I>&gt;&gt;&gt;<i> the wheel - llSetKeyframedMotion has been slated for core release for a
</I>&gt;&gt;&gt;<i> while now, we just haven't found the dev time to extract it. So there is
</I>&gt;&gt;&gt;<i> really no need for a second, competing implementation.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So, in summary
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> +1 on extension points for scene entities
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -0 on a second implementation of llSetKeyframedMotion as a tested and
</I>&gt;&gt;&gt;<i> working one already exists.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That's -0 because of you really want it I won't kee you from doing it -
</I>&gt;&gt;&gt;<i> it's just a waste of effort.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Melanie
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 28/12/2012 08:38, Adams, Robert wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The discussion about the implementation of the llKeyframeMotion
</I>&gt;&gt;&gt;&gt;<i> function hinted at a need for region modules to be able to add data and
</I>&gt;&gt;&gt;&gt;<i> functions to existing scene items. Here is a modest proposal for
</I>&gt;&gt;&gt;&gt;<i> discussion[1].
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Define a general module/interface registration interface to add to
</I>&gt;&gt;&gt;&gt;<i> EntityBase (and thus to SceneObjectGroup and ScenePresence).
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> IRegisterInterface
</I>&gt;&gt;&gt;&gt;<i>                Void RegisterInterface&lt;T&gt;(T iface);
</I>&gt;&gt;&gt;&gt;<i>                Bool TryGet&lt;T&gt;(out T iface);
</I>&gt;&gt;&gt;&gt;<i>                T Get&lt;T&gt;();
</I>&gt;&gt;&gt;&gt;<i>                Void ClearRegisteredInterfaces();
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Any class that implements the IRegisterInterface interface would
</I>&gt;&gt;&gt;&gt;<i> contain a:
</I>&gt;&gt;&gt;&gt;<i>                Private Dictionary&lt;Type, object&gt;  m_registeredInterfaces
</I>&gt;&gt;&gt;&gt;<i> = new Dictionary&lt;Type, object&gt;();
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 'Scene' already has a RegisterModule interface which has a bunch of
</I>&gt;&gt;&gt;&gt;<i> neat features (like being able to register multiple instances of the same
</I>&gt;&gt;&gt;&gt;<i> interface type) but I'm not sure that is needed here (discussion?)
</I>&gt;&gt;&gt;&gt;<i> Particularly industrious changing could merge this proposed interface and
</I>&gt;&gt;&gt;&gt;<i> the existing 'Scene' functions.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> So, something like a llKeyframeMotion implementing region module could
</I>&gt;&gt;&gt;&gt;<i> register a KeyframeMotionState type structure on the SOG to save
</I>&gt;&gt;&gt;&gt;<i> information about the keyframe for that SOG. Other uses could be a uniform
</I>&gt;&gt;&gt;&gt;<i> way for adding classes of functionality to scene objects (&quot;get me the
</I>&gt;&gt;&gt;&gt;<i> interface for extracting the physical mesh for this SOG&quot;) or just adding
</I>&gt;&gt;&gt;&gt;<i> limpet like code to a scene entity.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Not sure of the nuances of serialization. I believe that the registered
</I>&gt;&gt;&gt;&gt;<i> interfaces would just be serialized with the SOG (thus saving and restoring
</I>&gt;&gt;&gt;&gt;<i> the values in the registered interface instances) but I can't be totally
</I>&gt;&gt;&gt;&gt;<i> sure of that.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Anyway, run your sword through this strawman.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> -- ra
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> [1] This is similar to other interfaced proposed in the past
</I>&gt;&gt;&gt;&gt;<i> (particularly one by Adam Frizby).
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt;
</I>&gt;&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  ______________________________**_________________
</I>&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt;
</I>&gt;&gt;<i> ______________________________**_________________
</I>&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20121228/bbeb7cdd/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20121228/bbeb7cdd/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011571.html">[Opensim-dev] IRegisterInterface for extending scene entities
</A></li>
	<LI>Next message: <A HREF="011573.html">[Opensim-dev] IRegisterInterface for extending scene entities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11572">[ date ]</a>
              <a href="thread.html#11572">[ thread ]</a>
              <a href="subject.html#11572">[ subject ]</a>
              <a href="author.html#11572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
