<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] llDetectedType and NPC's
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2012-July/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20llDetectedType%20and%20NPC%27s&In-Reply-To=%3C4FFB7C94.1040902%40rigutech.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011283.html">
   <LINK REL="Next"  HREF="011286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] llDetectedType and NPC's</H1>
    <B>R.Gunther</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20llDetectedType%20and%20NPC%27s&In-Reply-To=%3C4FFB7C94.1040902%40rigutech.nl%3E"
       TITLE="[Opensim-dev] llDetectedType and NPC's">rigun at rigutech.nl
       </A><BR>
    <I>Tue Jul 10 02:51:32 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="011283.html">[Opensim-dev] llDetectedType and NPC's
</A></li>
        <LI>Next message: <A HREF="011286.html">[Opensim-dev] llDetectedType and NPC's
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11284">[ date ]</a>
              <a href="thread.html#11284">[ thread ]</a>
              <a href="subject.html#11284">[ subject ]</a>
              <a href="author.html#11284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just a short question. why did we not named the NPC's OSNPC ? then i 
think you dont get quick problems with sl.

On 2012-07-10 02:30, Justin Clark-Casey wrote:
&gt;<i> Argus, I'm a little confused.  Some of what you say seems to concern 
</I>&gt;<i> NPCs going to other regions via Hypergrid.  But OS NPCs are bound to 
</I>&gt;<i> the region they are instantiated in.  Possibly they may be able to 
</I>&gt;<i> cross to regions in the same simulator in the future, but they will 
</I>&gt;<i> never be able to go to other simulators, let alone Hypergrid.
</I>&gt;<i>
</I>&gt;<i> So I'm assuming you're talking about reliable NPC detection in a 
</I>&gt;<i> Hypergrid situation.  Ultimately, this is impossible because the 
</I>&gt;<i> OpenSimulator operator can always change the code to return what they 
</I>&gt;<i> like.  So it doesn't matter what function the script uses - it can 
</I>&gt;<i> always be fooled.
</I>&gt;<i>
</I>&gt;<i> I don't personally object to extending llDetectedType() to return NPC, 
</I>&gt;<i> though NPC was a poor choice of constant name imo since it could clash 
</I>&gt;<i> with Linden developments in the future.  I also don't object to some 
</I>&gt;<i> config value to stop the use of OS_NPC_SENSE_AS_AGENT on a particular 
</I>&gt;<i> simulator.  But being able to use NPCs with existing scripts is very 
</I>&gt;<i> useful in some contexts so if llDetectedType() is to be extended it 
</I>&gt;<i> must accomodate that option for consistency with everything else.
</I>&gt;<i>
</I>&gt;<i> Perhaps you could provide a concrete example.  Not a whole script but 
</I>&gt;<i> described functionality for some real in-world tool.
</I>&gt;<i>
</I>&gt;<i> On 08/07/12 20:22, Argus wrote:
</I>&gt;&gt;<i> Quote: &quot;If your solution is dependent on deviating from  the SL 
</I>&gt;&gt;<i> definition for any &quot;ll&quot; API call, it may be easier for
</I>&gt;&gt;<i> all involved in the future if you can redesign it such as to avoid 
</I>&gt;&gt;<i> future incompatibilities.&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   The implementation of NPCs are causing the deviations from SL while 
</I>&gt;&gt;<i> all my scripts are based on the SL definitions and
</I>&gt;&gt;<i> also run 1:1 in SL. If there would be a possebility to solve this 
</I>&gt;&gt;<i> issue, I also would redesign my application, but sofar
</I>&gt;&gt;<i> I havnt found any relyable method for NPC detection other than 
</I>&gt;&gt;<i> llDetectedType returning NPC even when using
</I>&gt;&gt;<i> OS_NPC_SENCE_AS_AGENT. Even in our Opensim code we find the name 
</I>&gt;&gt;<i> changes for hg visitors implemented as detection with
</I>&gt;&gt;<i> the deffrence that NPC are excluded via the opensim code.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is also a problem for others, it not only me who is having 
</I>&gt;&gt;<i> issues with NPC detection.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Am 08.07.2012 20:26, schrieb Dahlia Trimble:
</I>&gt;&gt;&gt;<i> In general it's not a good idea to extend any &quot;ll&quot; function beyond 
</I>&gt;&gt;&gt;<i> the equivalent SL definition as there is no
</I>&gt;&gt;&gt;<i> guarantee that LL may add any new functionality that may conflict in 
</I>&gt;&gt;&gt;<i> the future. If this were to happen it would be
</I>&gt;&gt;&gt;<i> difficult to resolve the conflicts as there would be scripts in use 
</I>&gt;&gt;&gt;<i> that depend on the conflicting definitions. Also
</I>&gt;&gt;&gt;<i> some scripters don't always use symbolic constants (a terrible 
</I>&gt;&gt;&gt;<i> practice but it does happen) so it's not just a matter
</I>&gt;&gt;&gt;<i> of changing a conflicting value for  a constant and recompiling. If 
</I>&gt;&gt;&gt;<i> your solution is dependent on deviating from the
</I>&gt;&gt;&gt;<i> SL definition for any &quot;ll&quot; API call, it may be easier for all 
</I>&gt;&gt;&gt;<i> involved in the future if you can redesign it such as to
</I>&gt;&gt;&gt;<i> avoid future incompatibilities.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Sun, Jul 8, 2012 at 3:14 AM, Argus &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">argus at archimuh.de</A> 
</I>&gt;&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">argus at archimuh.de</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     Hi.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      I have a problem with the way that NPCs might be implemented in 
</I>&gt;&gt;&gt;<i> llDetectedType. A patch can be found in Mantis 6066.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      In the events touch, collision and sensor one can use the 
</I>&gt;&gt;&gt;<i> function llDetectedType which return some basic infos
</I>&gt;&gt;&gt;<i>     on what type of object/agent... has been detected by the event. 
</I>&gt;&gt;&gt;<i> To complete this function, we still need to add
</I>&gt;&gt;&gt;<i>     NPCs as type. Sofar, so good...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      NPC do however also have the possebility to be created using 
</I>&gt;&gt;&gt;<i> OS_NPC_SENCE_AS_AGENT. This was implemented sothat
</I>&gt;&gt;&gt;<i>     NPCs would work with sensor events ( without changing the lsl 
</I>&gt;&gt;&gt;<i> script). At that time NPCs were not implemented to
</I>&gt;&gt;&gt;<i>     llDetectedType which one could have easely used to change the 
</I>&gt;&gt;&gt;<i> lsl script to work with NPCs and/OR agents instead
</I>&gt;&gt;&gt;<i>     of implementing OS_NPC_SENCE_AS_AGENT. The result is, that using 
</I>&gt;&gt;&gt;<i> OS_NPC_SENCE_AS_AGENT would return an agent when
</I>&gt;&gt;&gt;<i>     using llDetected AND that there is NO way to know if the event 
</I>&gt;&gt;&gt;<i> was triggered by an agent or NPC without forcing
</I>&gt;&gt;&gt;<i>     the users to enable osIsNPC for everybody,  and I do realy mean 
</I>&gt;&gt;&gt;<i> everybody. For me and some other projects I know
</I>&gt;&gt;&gt;<i>     of, this will have fatal sideeffects.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>       Let look at our 3 avatar type, normal agent, liblibomv bot and 
</I>&gt;&gt;&gt;<i> NPC's and how these can be used for identification.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     Situation 1) A closed grid with hypergrid disabled.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     - Normal agent = registered at grid, unique uuid + name within 
</I>&gt;&gt;&gt;<i> grid, controled by human
</I>&gt;&gt;&gt;<i>     - Bots = basicaly same as agent, registered at grid,  with 
</I>&gt;&gt;&gt;<i> unique uuid + name within grid, but remotly controled
</I>&gt;&gt;&gt;<i>     by software
</I>&gt;&gt;&gt;<i>     - NPC = NOT registered, unique uuid within grid, ANY fictional 
</I>&gt;&gt;&gt;<i> OR existing name possible and like bots remotly
</I>&gt;&gt;&gt;<i>     controled.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     If llDetectedType return agent for NPCs using OS_NPC_SENSE_AGENT 
</I>&gt;&gt;&gt;<i> we only could detect the NPC using
</I>&gt;&gt;&gt;<i>     llRequestAgentData to see if we get a posetive respone via 
</I>&gt;&gt;&gt;<i> DATA_NAME (unless the region itself detects the online
</I>&gt;&gt;&gt;<i>     NPC as agent and returns the NPC data, havnt tested that yet.) 
</I>&gt;&gt;&gt;<i> In any case, the uuid remains unique and can always
</I>&gt;&gt;&gt;<i>     be used to identify a single agent/npc/bot
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     Situation 2) Multigrid system with hypergrid enabled.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     - Normal agent = registered at grid, unique uuid + name within 
</I>&gt;&gt;&gt;<i> grid, controled by human, surname changes with
</I>&gt;&gt;&gt;<i>     hypergrid, name supplies griddata on hypergrid travels
</I>&gt;&gt;&gt;<i>     - Bots = basicaly same as agent, registered at grid,  with 
</I>&gt;&gt;&gt;<i> unique uuid + name within grid, but remotly controled
</I>&gt;&gt;&gt;<i>     by software, surname changes with hypergrid, name supplies 
</I>&gt;&gt;&gt;<i> griddata on hypergrid travels
</I>&gt;&gt;&gt;<i>     - NPC = NOT registered, unique uuid within grid, ANY fictional 
</I>&gt;&gt;&gt;<i> OR existing name possible and like bots remotly
</I>&gt;&gt;&gt;<i>     controled.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      The uuid - name relation is still unique WITHIN a grid, but the 
</I>&gt;&gt;&gt;<i> same uuid-name relationship can be used in
</I>&gt;&gt;&gt;<i>     multiple grids by DIFFRENT users. However when hypergrid 
</I>&gt;&gt;&gt;<i> traveling the name changes and one can extract the agents
</I>&gt;&gt;&gt;<i>     origin grid sothat one recieves a unique uuid+name+grid 
</I>&gt;&gt;&gt;<i> relationship. In a multigrid system were llDetectedType
</I>&gt;&gt;&gt;<i>     return agent for NPCs using OS_NPC_SENSE_AGENT there is NO 
</I>&gt;&gt;&gt;<i> method using plain lsl to get the unique uuid+name+grid
</I>&gt;&gt;&gt;<i>     relationship,  llRequestAgentData is not available in all grids 
</I>&gt;&gt;&gt;<i> from the hypergrid visitor. The names of NPCs are
</I>&gt;&gt;&gt;<i>     NOT unique within a grid AND the uuid could already exist in 
</I>&gt;&gt;&gt;<i> another grid for an agent. The uuid alone CAN'T be
</I>&gt;&gt;&gt;<i>     used to identify a single agent/bot/npc in a multi grid system 
</I>&gt;&gt;&gt;<i> which is hypergrid enabled.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      Short summary: In a mutligrid system with hypergrid each 
</I>&gt;&gt;&gt;<i> agent/bot has a unique uuid - name - grid relationship
</I>&gt;&gt;&gt;<i>     were 2 elements are needed for identification, in a single grid 
</I>&gt;&gt;&gt;<i> without hypergrid the uuid is enough to identify
</I>&gt;&gt;&gt;<i>     each agent/bot/npc. In a multigrid system NPC have to be 
</I>&gt;&gt;&gt;<i> identified as NPC sothat one can identify the NPC using
</I>&gt;&gt;&gt;<i>     uuid + grid.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     As mentioned there is no plain lsl method for identification in 
</I>&gt;&gt;&gt;<i> a multiple grid system with hypergrid if
</I>&gt;&gt;&gt;<i>     llDetectedType returns an Agent for NPCs using 
</I>&gt;&gt;&gt;<i> OS_NPC_SENSE_AGENT. In Opensim we do have OSSL function which could
</I>&gt;&gt;&gt;<i>     be used to help to distinguish between a registered agent and a 
</I>&gt;&gt;&gt;<i> NPC, eg. osIsNPC. The problem is however, that a
</I>&gt;&gt;&gt;<i>     multigrid system would have to have multiple scripts available 
</I>&gt;&gt;&gt;<i> for all sorts of ossl combinations.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     a) No NPCs allowed for anyone - script does not need any NPCs 
</I>&gt;&gt;&gt;<i> and all event can only be triggered by agents.
</I>&gt;&gt;&gt;<i>     b) NPCs allowed  for 1 or more users, osIsNPC not enabled - Our 
</I>&gt;&gt;&gt;<i> script CAN'T recognize an NPC, so the service has
</I>&gt;&gt;&gt;<i>     to be excluded and may not be used on that region
</I>&gt;&gt;&gt;<i>     c) NPC allowed for 1 or more users, osIsNPC enabled for those 
</I>&gt;&gt;&gt;<i> users - Our script CAN'T recognize an NPC if the
</I>&gt;&gt;&gt;<i>     script is owned by someone not enabled to use osIsNPC, so the 
</I>&gt;&gt;&gt;<i> service has to be excluded and may not be used on
</I>&gt;&gt;&gt;<i>     that region.
</I>&gt;&gt;&gt;<i>     d) NPC allowed for 1 or more users, osIsNPC enabled for everyone 
</I>&gt;&gt;&gt;<i> - Our script can now use osIsNPC nowmatter who
</I>&gt;&gt;&gt;<i>     the owner is, only now we can recognize NPCs
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     So if your offering a multigrid service, were we need 2 elements 
</I>&gt;&gt;&gt;<i> for identification, it is required to have
</I>&gt;&gt;&gt;<i>     atleast 2 script. 1 script for regions were noone can use NPCs 
</I>&gt;&gt;&gt;<i> and another were osIsNPC is enabled for everyone.
</I>&gt;&gt;&gt;<i>     This means that atleast 2 scripts need to be maintained by the 
</I>&gt;&gt;&gt;<i> scriptor and a huge support team which has to
</I>&gt;&gt;&gt;<i>     personaly speak to each customer to explain what script to use 
</I>&gt;&gt;&gt;<i> etc etc. Latest after 1 year the customer has
</I>&gt;&gt;&gt;<i>     forgotten everything and changes the NPC settings, which messes 
</I>&gt;&gt;&gt;<i> up the agent identification or the region owner
</I>&gt;&gt;&gt;<i>     changes something without notifying the parcelwoners because he 
</I>&gt;&gt;&gt;<i> himself only wants to try something.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      Now if the script is in a hud, then we never know what region 
</I>&gt;&gt;&gt;<i> settings are configured on the region we visit. So
</I>&gt;&gt;&gt;<i>     as we dont know anything about the settings, our entire 
</I>&gt;&gt;&gt;<i> uuid+name+grid relation is useless and we have NO method
</I>&gt;&gt;&gt;<i>     atall for identification in a multigrid system with hypergrid 
</I>&gt;&gt;&gt;<i> enabled. All ossl that could be used for NPC
</I>&gt;&gt;&gt;<i>     detection must be considered not avialble while NPC can be used 
</I>&gt;&gt;&gt;<i> by others.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     One could create extra modules to help us, but latest if a 
</I>&gt;&gt;&gt;<i> closed grid is involved we are not able to run our
</I>&gt;&gt;&gt;<i>     additional module. So thats also not an option.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     R&#233;sum&#233;: The only method that would help in a multigrid system 
</I>&gt;&gt;&gt;<i> is, if llDetectedType ALWAYS returns NPC nomatter
</I>&gt;&gt;&gt;<i>     what settings is used and AGENT for any agent/bot. Enabling 
</I>&gt;&gt;&gt;<i> OS_NPC_SENSE_AGENT to alow llDetectedType to return
</I>&gt;&gt;&gt;<i>     agent makes all 3rd party systems in a multigrid hypergrid 
</I>&gt;&gt;&gt;<i> enabled enviroment virtualy impossible to handle.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     It was thus also my intention to get this issue solved prior to 
</I>&gt;&gt;&gt;<i> implementation of osNPCTouch, but for that it is
</I>&gt;&gt;&gt;<i>     to late now anyway :(.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     Michelle Argus
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     _______________________________________________
</I>&gt;&gt;&gt;<i>     Opensim-dev mailing list
</I>&gt;&gt;&gt;<i>     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt;
</I>&gt;&gt;&gt;<i>     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011283.html">[Opensim-dev] llDetectedType and NPC's
</A></li>
	<LI>Next message: <A HREF="011286.html">[Opensim-dev] llDetectedType and NPC's
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11284">[ date ]</a>
              <a href="thread.html#11284">[ thread ]</a>
              <a href="subject.html#11284">[ subject ]</a>
              <a href="author.html#11284">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
