<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Profiler installed on osgrid plazas server and profiler dump now available
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Profiler%20installed%20on%20osgrid%20plazas%20server%20and%0A%20profiler%20dump%20now%20available&In-Reply-To=%3C47BF45E0.10400%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000923.html">
   <LINK REL="Next"  HREF="000926.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Profiler installed on osgrid plazas server and profiler dump now available</H1>
    <B>Justin Clark-Casey</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Profiler%20installed%20on%20osgrid%20plazas%20server%20and%0A%20profiler%20dump%20now%20available&In-Reply-To=%3C47BF45E0.10400%40googlemail.com%3E"
       TITLE="[Opensim-dev] Profiler installed on osgrid plazas server and profiler dump now available">jjustincc at googlemail.com
       </A><BR>
    <I>Fri Feb 22 23:00:00 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000923.html">[Opensim-dev] SL lego
</A></li>
        <LI>Next message: <A HREF="000926.html">[Opensim-dev] Profiler installed on osgrid plazas server and	profiler dump now available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#925">[ date ]</a>
              <a href="thread.html#925">[ thread ]</a>
              <a href="subject.html#925">[ subject ]</a>
              <a href="author.html#925">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This afternoon (with a bit of haxoring) I installed the mono heap-shot 
profiler on the OSGrid plazas server in pursuit of current memory 
leaks.  heap-shot will take a dump while in operation when it receives a 
signal.  More details on it can be found here.

<A HREF="http://www.mono-project.com/HeapShot">http://www.mono-project.com/HeapShot</A>

Now that it's installed it's very easy to run, if anyone with access to 
the plazas wants to take further dumps.

I started the profile on Wright Plaza with just me on it.  
Interestingly, that was enough to cause memory to continuously grow.  
This was associated with continuous requests for the same assets (which 
do not exist) on the console.  This in itself, though bad, should not be 
enough to cause the memory leak.  I took several dumps, the smallest of 
which (along with the log file) can be downloaded from

<A HREF="http://opensimulator.org/dump/OpenSim-at-595mb-one-avatar-with-scripts-wright.zip">http://opensimulator.org/dump/OpenSim-at-595mb-one-avatar-with-scripts-wright.zip</A>

On a very preliminary analysis of the dump, it looked like the major 
problem is data building up in the outgoing texture packet queue.  This 
is why I created extra statistical information which prints out the 
number of packets in the different queue types for each agent (which can 
be seen by typing 'show stats' on the console).  Hopefully this should 
reveal whether this is really where the issue is (I'm not yet convinced 
I'm interpreting the dump information correctly).

I very probably won't have any time now to work on this until next week 
- I thought I would make the data available for general interest and in 
case anyone wanted to take a shot at it.

--
justincc

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000923.html">[Opensim-dev] SL lego
</A></li>
	<LI>Next message: <A HREF="000926.html">[Opensim-dev] Profiler installed on osgrid plazas server and	profiler dump now available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#925">[ date ]</a>
              <a href="thread.html#925">[ thread ]</a>
              <a href="subject.html#925">[ subject ]</a>
              <a href="author.html#925">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
