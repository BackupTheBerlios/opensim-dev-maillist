<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Proposal to eliminate the name, description and invType fields from the assets db
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%20to%20eliminate%20the%20name%2C%0A%20description%20and%20invType%20fields%20from%20the%20assets%20db&In-Reply-To=%3C48601FF5.30601%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001980.html">
   <LINK REL="Next"  HREF="001984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Proposal to eliminate the name, description and invType fields from the assets db</H1>
    <B>Justin Clark-Casey</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%20to%20eliminate%20the%20name%2C%0A%20description%20and%20invType%20fields%20from%20the%20assets%20db&In-Reply-To=%3C48601FF5.30601%40googlemail.com%3E"
       TITLE="[Opensim-dev] Proposal to eliminate the name, description and invType fields from the assets db">jjustincc at googlemail.com
       </A><BR>
    <I>Tue Jun 24 00:13:09 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001980.html">[Opensim-dev] Proposal to eliminate the name, description and invType fields from the assets db
</A></li>
        <LI>Next message: <A HREF="001984.html">[Opensim-dev] Proposal to eliminate the name, description and invType fields	from the assets db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1983">[ date ]</a>
              <a href="thread.html#1983">[ thread ]</a>
              <a href="subject.html#1983">[ subject ]</a>
              <a href="author.html#1983">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Stefan Andersson wrote:
&gt;<i> Again, I don't see why we need to have assetId === sha-1 hash - if the 
</I>&gt;<i> only thing we want to accomplish with it is de-duping, we just make sure 
</I>&gt;<i> to send the hash along, and any context can choose to use it to de-dupe 
</I>&gt;<i> or not.
</I>&gt;<i>  
</I>&gt;<i> And to trust it or not.
</I>&gt;<i>  
</I>&gt;<i> Obviously, you wouldn't trust an assetId generated by an 
</I>&gt;<i> untrusted source to represent the asset binary anyway, so quite a lot of 
</I>&gt;<i> re-hashing and checking will be done along the way anyway.
</I>
I think that whether there's a trust issue or not depends on where you 
calculate the hash.  If it's calculated at the asset service then 
there's no issue.  Even if it's calculated externally, then you could 
always force a recalculation if there appears to be a hash collision 
when an upload is attempted.

I do think that the dupe issue is going to loom larger if we were to get 
to an intergrid architecture of federated asset databases with lots of 
people loading in material at different points.  The number of 
duplicates for a popular texture, say, would steadily increase over time 
without any realistic way of co-ordinating reaping within the federation.

I know flexibility is our watchword, but I wonder if this isn't one 
design point where making efforts to be as bendy as possible isn't too 
costly in terms of adding extra layers of indirection or passing more 
information around a network than is really needed.

Another good thing about asset uuid hashes is that they can potentially 
make the uuids disappear into the background when integrating with 
external programs (and the rest of the web).  For instance, suppose that 
a user wants to design a complex object or entire scene in some external 
program, and periodically upload different versions to their region 
server (grid connected or not).  If our hashes are random, either the 
user or their program has to worry about generating new random ones for 
each changed prim in their building/vehicle/elaborate clothing design. 
For OpenSim to be reliable we have to assume that they will forget and 
attempt to upload changed assets with existing uuids.  OpenSim might 
then need to drag down large amounts of existing data from the asset 
service to run internal hashing to know whether it needs to generate new 
uuids or not, or force every single imported prim to have a new uuid 
(which will really push up the dupe levels).

If asset uuids are hashes, then they can disappear from the user and 
program's view.  Outside of OpenSim, there is no need to manipulate 
uuids in this scenario - collections of objects or scenes can be 
structured in any way that the external program pleases.  Instead of 
getting asset uuids on import, the importing process calculates the 
necessary uuids from data, and can ask the asset service whether these 
already exist without needing to actually obtain the blobs.

I think that it's possible to experiment with the hashing idea without 
requiring the whole system to change.  Indeed, because of the very 
import scenario outlined above, I may well try using it for importing 
object archives.  This shouldn't impact the rest of the system since, of 
course, the chances of collision are small.

&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> Stefan Andersson
</I>&gt;<i> Tribal Media AB
</I>&gt;<i>  
</I>&gt;<i> Join the 3d web revolution : <A HREF="http://tribalnet.se/">http://tribalnet.se/</A>
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------------------------------------------------
</I>&gt;<i>     Date: Mon, 23 Jun 2008 15:59:39 -0400
</I>&gt;<i>     From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">teravus at gmail.com</A>
</I>&gt;<i>     To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i>     Subject: Re: [Opensim-dev] Proposal to eliminate the name,
</I>&gt;<i>     description and invType fields from the assets db table
</I>&gt;<i> 
</I>&gt;<i>     I'm not convinced the SHA1 UUID will be extensible enough to allow
</I>&gt;<i>     for future plans.   The idea is to not assume anything with a UUID. 
</I>&gt;<i>     Adding assumptions increases scalability at the cost of extensibility.
</I>&gt;<i>      
</I>&gt;<i>     Best Regards
</I>&gt;<i>      
</I>&gt;<i>     Teravus
</I>&gt;<i> 
</I>&gt;<i>      
</I>&gt;<i>     On 6/23/08, *Melanie* &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">melanie at t-data.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">melanie at t-data.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>         Hi,
</I>&gt;<i> 
</I>&gt;<i>         Sean Dague wrote:
</I>&gt;<i>          &gt; I don't understand how your approach deals with sniffing the
</I>&gt;<i>         wire or the
</I>&gt;<i>          &gt; cache, finding the asset UUID, and just embedding that in you
</I>&gt;<i>         items or
</I>&gt;<i>          &gt; scripts.
</I>&gt;<i> 
</I>&gt;<i>         It doesn't. Because that approach is not enjoying blanket coverage
</I>&gt;<i>         in the DMCA. Means, in the case of UUID sniffing, each _item_ is a
</I>&gt;<i>         separate violation, subject to a separate takedown order. Yes, one
</I>&gt;<i>         per prim!
</I>&gt;<i> 
</I>&gt;<i>         If the texture is re-uploaded, blanket protection applies.
</I>&gt;<i> 
</I>&gt;<i>         The law isn't always common sense - in fact, it mostly diverges from
</I>&gt;<i>         common sense!
</I>&gt;<i> 
</I>&gt;<i>          &gt; Anyway, it's a little moot for right now, as the current
</I>&gt;<i>         system is
</I>&gt;<i>          &gt; there.  But I really think the way forward involves us using
</I>&gt;<i>         a hashing
</I>&gt;<i>          &gt; strategy.  Once we dig in there, we'll see how hard it would
</I>&gt;<i>         be to make
</I>&gt;<i>          &gt; UUID generation runtime configurable.  And keep this in mind.
</I>&gt;<i> 
</I>&gt;<i>         I'm happy if that concern is not forgotten. That is all I wanted,
</I>&gt;<i>         recognition of this as a valid concern, so no decisions are made
</I>&gt;<i>         that could ultimately lead to an entire grid being judicially
</I>&gt;<i>         shut down.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>         Melanie
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>         Opensim-dev mailing list
</I>&gt;<i>         <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt;
</I>&gt;<i>         <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>

-- 
justincc
Justin Clark-Casey
<A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001980.html">[Opensim-dev] Proposal to eliminate the name, description and invType fields from the assets db
</A></li>
	<LI>Next message: <A HREF="001984.html">[Opensim-dev] Proposal to eliminate the name, description and invType fields	from the assets db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1983">[ date ]</a>
              <a href="thread.html#1983">[ thread ]</a>
              <a href="subject.html#1983">[ subject ]</a>
              <a href="author.html#1983">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
