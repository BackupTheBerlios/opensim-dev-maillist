<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Proposal to eliminate the name,	description and invType fields from the assets db table
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%20to%20eliminate%20the%20name%2C%0A%09description%20and%20invType%20fields%20from%20the%20assets%20db%20table&In-Reply-To=%3Cb046ff2a0806231735u7fc29e81id26e7385e287cf49%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001967.html">
   <LINK REL="Next"  HREF="001957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Proposal to eliminate the name,	description and invType fields from the assets db table</H1>
    <B>liu xiaolu</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%20to%20eliminate%20the%20name%2C%0A%09description%20and%20invType%20fields%20from%20the%20assets%20db%20table&In-Reply-To=%3Cb046ff2a0806231735u7fc29e81id26e7385e287cf49%40mail.gmail.com%3E"
       TITLE="[Opensim-dev] Proposal to eliminate the name,	description and invType fields from the assets db table">lulurun at gmail.com
       </A><BR>
    <I>Tue Jun 24 02:35:07 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001967.html">[Opensim-dev] Proposal to eliminate the name, description and invType fields from the assets db table
</A></li>
        <LI>Next message: <A HREF="001957.html">[Opensim-dev] LSL2CS compiler [WAS: Critical Plugin Check]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1985">[ date ]</a>
              <a href="thread.html#1985">[ thread ]</a>
              <a href="subject.html#1985">[ subject ]</a>
              <a href="author.html#1985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>it seems that the topic is changed to &quot;UUID&quot;, I almost missed your reply,
thank you very much for your consideration,

lulurun,
regards

JustinCC

2008/6/24 Justin Clark-Casey &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>&gt;:

&gt;<i> liu xiaolu wrote:
</I>&gt;<i> &gt; I agree with removing the invtype, completly duplicate, I wanted to
</I>&gt;<i> &gt; remove it for a long time. :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; but about asset's name and description, I have the same concern with
</I>&gt;<i> &gt; your &quot;1st disadvantage&quot;.
</I>&gt;<i> &gt; and also I do not think they are duplicate with inventoryitem's columns
</I>&gt;<i> &gt; even they are not used currently.
</I>&gt;<i> &gt; To stretch a point, if you want only one name, the one should be deleted
</I>&gt;<i> &gt; is the name of inventoryitem.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would like to share my reasons:
</I>&gt;<i> &gt; 1. Semantically,
</I>&gt;<i> &gt; Asset should keep its own information by itself but not refer to an
</I>&gt;<i> &gt; external service.
</I>&gt;<i> &gt; * Asset name is just the name of itself, it is named by the creator, it
</I>&gt;<i> &gt; is used to describe what the asset is.
</I>&gt;<i> &gt; * Inventoryitem's name is a &quot;nickname&quot; named by inventory owner, its
</I>&gt;<i> &gt; purpose is for quick understanding
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For example:
</I>&gt;<i> &gt; A picture's name could be &quot;opensim_screen_shot_20020101&quot;, description:
</I>&gt;<i> &gt; &quot;screen shot of the
</I>&gt;<i> &gt; 1st release version of opensim, client: SLViewer, taken by test user&quot;,
</I>&gt;<i> &gt; but in lulurun's inventory it could be called
</I>&gt;<i> &gt; &quot;lulurun's favourite photo&quot;
</I>&gt;<i>
</I>&gt;<i> I think that you make some valid points, Lulurun.  Having thought about
</I>&gt;<i> it a bit more, I agree that there is value in retaining the originally
</I>&gt;<i> uploaded name for some assets, in particular those which always have
</I>&gt;<i> meaningful original names on creation (such as textures).  Although it
</I>&gt;<i> doesn't make any difference from the client point of view, I can see
</I>&gt;<i> uses on the server end (e.g. giving assets more meaningful names if they
</I>&gt;<i> are exported).
</I>&gt;<i>
</I>&gt;<i> Description, I think, is more contentious.  To my mind, this is
</I>&gt;<i> information which should rest in the asset file itself (e.g. embedded
</I>&gt;<i> within the jpeg2000 format of the texture itself.  After all, this is
</I>&gt;<i> the way it is handled within a common or garden filesystem).
</I>&gt;<i>
</I>&gt;<i> However, what I'm very probably going to do is simply look to remove
</I>&gt;<i> InvType for now.  I think that this is relatively uncontentious.
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2. To think the way we are using assets,
</I>&gt;<i> &gt; Asset service could become a large, indenpendent storage service, it
</I>&gt;<i> &gt; contains objects in virtual worlds *but*
</I>&gt;<i> &gt; may not be *only* used by UGI R servers, it may have a different (web)
</I>&gt;<i> &gt; interface to let users/grid_admins manage it.
</I>&gt;<i> &gt; and in the future peple maybe trade/exchange/gift assets out of the
</I>&gt;<i> &gt; world (by using other ways (website, mobilephone, email...) )
</I>&gt;<i> &gt; in that case asset name, description will be used directly(not from
</I>&gt;<i> &gt; inventory).
</I>&gt;<i> &gt; //
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; As you mentioned in your major point of the advantages(the 1st one),
</I>&gt;<i> &gt; even with name, description, ... we can still put asset in a file like:
</I>&gt;<i> &gt; | body size | asset data | semantic information size | name,
</I>&gt;<i> &gt; description, ... |
</I>&gt;<i> &gt; this is just a example.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; and, I am agree with developping a filesystem based asset server, it
</I>&gt;<i> &gt; makes the program simple and easy to implement inside other httpserver.
</I>&gt;<i> &gt; most of all, the number of asset will become very large, and asset is
</I>&gt;<i> &gt; not related to any other data, to use a RDB is a kind of waste and
</I>&gt;<i> &gt; inefficient.
</I>&gt;<i> &gt; but this is not going to replace current assetserver , for small grid or
</I>&gt;<i> &gt; personal use, current assetserver can give a good enough solution.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So my personal opinion is remove invtype, retain name, description
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; lulurun,
</I>&gt;<i> &gt; regards
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2008/6/22 Justin Clark-Casey &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>
</I>&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>&gt;&gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     This is mainly a question for core developers, though other
</I>&gt;<i> viewpoints
</I>&gt;<i> &gt;     are welcomed.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     In the OpenSim assets database table currently there are eight fields
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     +-------------+-------------+------+-----+---------+-------+
</I>&gt;<i> &gt;     | Field       | Type        | Null | Key | Default | Extra |
</I>&gt;<i> &gt;     +-------------+-------------+------+-----+---------+-------+
</I>&gt;<i> &gt;     | name        | varchar(64) | NO   |     |         |       |
</I>&gt;<i> &gt;     | description | varchar(64) | NO   |     |         |       |
</I>&gt;<i> &gt;     | assetType   | tinyint(4)  | NO   |     |         |       |
</I>&gt;<i> &gt;     | invType     | tinyint(4)  | NO   |     |         |       |
</I>&gt;<i> &gt;     | local       | tinyint(1)  | NO   |     |         |       |
</I>&gt;<i> &gt;     | temporary   | tinyint(1)  | NO   |     |         |       |
</I>&gt;<i> &gt;     | data        | longblob    | NO   |     |         |       |
</I>&gt;<i> &gt;     | id          | varchar(36) | NO   | PRI |         |       |
</I>&gt;<i> &gt;     +-------------+-------------+------+-----+---------+-------+
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Of these, name, description and invType are not really used by
</I>&gt;<i> OpenSim
</I>&gt;<i> &gt;     (there are a couple of places in the code that use invType, but these
</I>&gt;<i> &gt;     could easily use other data sources).  Name and description are a
</I>&gt;<i> little
</I>&gt;<i> &gt;     pointless for assets - the real names and descriptions are actually
</I>&gt;<i> &gt;     always kept in the inventory items which reference these assets.
</I>&gt;<i> &gt;     InvType is also information which is always duplicated in items.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Eliminating these fields would have the following advantages
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     1.  Make it easier to save and load and integrate assets with
</I>&gt;<i> locations
</I>&gt;<i> &gt;     outside OpenSim.  If you don't need to maintain name, description or
</I>&gt;<i> &gt;     invType, it should be possible to save assets with the uuid embedded
</I>&gt;<i> in
</I>&gt;<i> &gt;     the filename and an extension which shows the asset type (e.g. .jp2
</I>&gt;<i> for
</I>&gt;<i> &gt;     JPEG2000 textures).  The assets wouldn't require persistence of the
</I>&gt;<i> &gt;     local and temporary attributes.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Two immediate use cases are that elimination of these asset fields
</I>&gt;<i> would
</I>&gt;<i> &gt;      make the creation and manipulation of archives and inventory
</I>&gt;<i> libraries
</I>&gt;<i> &gt;     much simpler.  There may also be integration benefits.  For instance,
</I>&gt;<i> &gt;     asset data files could be served directly by a stock webserver
</I>&gt;<i> without
</I>&gt;<i> &gt;     having to wrap them in XML to provide the extra metadata).  Moreover,
</I>&gt;<i> if
</I>&gt;<i> &gt;     we adopt generation of UUIDs using a hashing algorithm (e.g. SHA1) at
</I>&gt;<i> &gt;     some stage, we wouldn't even need to embed the UUID in the name.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     2.  Eliminate the code which maintains these fields, simplifying the
</I>&gt;<i> &gt;     codebase and making it easier to read.  This is a minor point, since
</I>&gt;<i> the
</I>&gt;<i> &gt;     amount of code isn't large.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     3.  Reduce data storage requirements.  This is also a minor point,
</I>&gt;<i> since
</I>&gt;<i> &gt;     these fields will always be dwarfed by the blobs (although this might
</I>&gt;<i> &gt;     come into play much further down the line if blobs are moved out of
</I>&gt;<i> &gt;     the db).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     The one disadvantage I can think of is
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     1.  It becomes a little hard to get a sense of what's in your asset
</I>&gt;<i> &gt;     database by just browsing the assets table.  For instance, you get a
</I>&gt;<i> &gt;     rough sense of how many objects are in prim or avatar inventories by
</I>&gt;<i> &gt;     counting the number of times that 'Primitive' appears as a name...
</I>&gt;<i> &gt;     However, statistical information could still be derived (if desired)
</I>&gt;<i> by
</I>&gt;<i> &gt;     analysing the type field.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     In summary, I would like to see if the name, description and invType
</I>&gt;<i> &gt;     asset table fields can be removed at some point in the near future.
</I>&gt;<i> &gt;     Does anybody have a good or necessary reason to retain them?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     --
</I>&gt;<i> &gt;     justincc
</I>&gt;<i> &gt;     Justin Clark-Casey
</I>&gt;<i> &gt;     <A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>
</I>&gt;<i> &gt;     _______________________________________________
</I>&gt;<i> &gt;     Opensim-dev mailing list
</I>&gt;<i> &gt;     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt;     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Lulurun
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> justincc
</I>&gt;<i> Justin Clark-Casey
</I>&gt;<i> <A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>
</I>


-- 
Lulurun
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20080624/b1f87be7/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20080624/b1f87be7/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001967.html">[Opensim-dev] Proposal to eliminate the name, description and invType fields from the assets db table
</A></li>
	<LI>Next message: <A HREF="001957.html">[Opensim-dev] LSL2CS compiler [WAS: Critical Plugin Check]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1985">[ date ]</a>
              <a href="thread.html#1985">[ thread ]</a>
              <a href="subject.html#1985">[ subject ]</a>
              <a href="author.html#1985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
