<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Automated tests have started failing on OpenSim.Data.Tetsts.BasicRegionTest.T016_RandomSogWithSceneParts() for SQLite
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Automated%20tests%20have%20started%20failing%20on%0A%20OpenSim.Data.Tetsts.BasicRegionTest.T016_RandomSogWithSceneParts%28%29%20for%0A%20SQLite&In-Reply-To=%3C4B7AF61C.2050207%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008369.html">
   <LINK REL="Next"  HREF="008370.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Automated tests have started failing on OpenSim.Data.Tetsts.BasicRegionTest.T016_RandomSogWithSceneParts() for SQLite</H1>
    <B>Justin Clark-Casey</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Automated%20tests%20have%20started%20failing%20on%0A%20OpenSim.Data.Tetsts.BasicRegionTest.T016_RandomSogWithSceneParts%28%29%20for%0A%20SQLite&In-Reply-To=%3C4B7AF61C.2050207%40googlemail.com%3E"
       TITLE="[Opensim-dev] Automated tests have started failing on OpenSim.Data.Tetsts.BasicRegionTest.T016_RandomSogWithSceneParts() for SQLite">jjustincc at googlemail.com
       </A><BR>
    <I>Tue Feb 16 20:46:36 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008369.html">[Opensim-dev] How to retreive pictures from the inventory ?
</A></li>
        <LI>Next message: <A HREF="008370.html">[Opensim-dev] Status of presence refactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8367">[ date ]</a>
              <a href="thread.html#8367">[ thread ]</a>
              <a href="subject.html#8367">[ subject ]</a>
              <a href="author.html#8367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Teravus,

I notice that the automated tests have started failing on OpenSim.Data.Tetsts.BasicRegionTest.T016_RandomSogWithSceneParts() for SQLite.

Running locally on mono 2.4.2.3, the trace is

     [exec] Tests run: 65, Failures: 1, Not run: 0, Time: 13.286 seconds
     [exec] Test Case Failures:
     [exec] 1) OpenSim.Data.SQLite.Tests.SQLiteRegionTest.T016_RandomSogWithSceneParts : System.Reflection.TargetInvocationException : Exception has been thrown by the target of an invocation.
     [exec]   ----&gt; System.OutOfMemoryException : Out of memory.
     [exec] at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000]
     [exec] at System.Reflection.MonoProperty.SetValue (System.Object obj, System.Object value, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] index, System.Globalization.CultureInfo culture) [0x00000]
     [exec] at System.Reflection.PropertyInfo.SetValue (System.Object obj, System.Object value, System.Object[] index) [0x00000]
     [exec] at OpenSim.Data.Tests.PropertyScrambler`1[OpenSim.Region.Framework.Scenes.SceneObjectPart].RandomizeProperty (System.Object obj, System.Reflection.PropertyInfo property, System.Object[] index) [0x00000]
     [exec] at OpenSim.Data.Tests.PropertyScrambler`1[OpenSim.Region.Framework.Scenes.SceneObjectPart].internalScramble (System.Object obj) [0x00000]
     [exec] at OpenSim.Data.Tests.PropertyScrambler`1[OpenSim.Region.Framework.Scenes.SceneObjectPart].RandomizeProperty (System.Object obj, System.Reflection.PropertyInfo property, System.Object[] index) [0x00000]
     [exec] at OpenSim.Data.Tests.PropertyScrambler`1[OpenSim.Region.Framework.Scenes.SceneObjectPart].internalScramble (System.Object obj) [0x00000]
     [exec] at OpenSim.Data.Tests.PropertyScrambler`1[OpenSim.Region.Framework.Scenes.SceneObjectPart].Scramble (OpenSim.Region.Framework.Scenes.SceneObjectPart obj) [0x00000]
     [exec] at OpenSim.Data.Tests.BasicRegionTest.T016_RandomSogWithSceneParts () [0x00000]
     [exec] at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[],System.Exception&amp;)
     [exec] at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000]
     [exec] --OutOfMemoryException
     [exec] at (wrapper managed-to-native) object:__icall_wrapper_mono_array_new_specific (intptr,int)
     [exec] at System.Array.Resize[SceneObjectPart] (OpenSim.Region.Framework.Scenes.SceneObjectPart[]&amp; array, Int32 length, Int32 newSize) [0x00000]
     [exec] at System.Array.Resize[SceneObjectPart] (OpenSim.Region.Framework.Scenes.SceneObjectPart[]&amp; array, Int32 newSize) [0x00000]
     [exec] at System.Collections.Generic.List`1[OpenSim.Region.Framework.Scenes.SceneObjectPart].set_Capacity (Int32 value) [0x00000]
     [exec] at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[],System.Exception&amp;)
     [exec] at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000]

BUILD FAILED - 1 non-fatal error(s), 0 warning(s)


The OutOfMemoryException is pretty odd - it looks like something in all the clever property scrambling code is going awry.

Any idea what this is?  Were the tests failing for you on Windows when you made the recent SQLite changes?

Unfortunately, since the cause of this is not at all clear, I've had to take the step of disabling T016 for now, much as I hate to do this.  Also unfortunately, due to the way the tests are structured this disables it for MySQL as well.

-- 
Justin Clark-Casey (justincc)
<A HREF="http://justincc.org">http://justincc.org</A>
<A HREF="http://twitter.com/justincc">http://twitter.com/justincc</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008369.html">[Opensim-dev] How to retreive pictures from the inventory ?
</A></li>
	<LI>Next message: <A HREF="008370.html">[Opensim-dev] Status of presence refactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8367">[ date ]</a>
              <a href="thread.html#8367">[ thread ]</a>
              <a href="subject.html#8367">[ subject ]</a>
              <a href="author.html#8367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
