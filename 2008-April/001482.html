<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Proposal for removing &quot;ERROR: There was an error while scanning assembly:&quot; message
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%20for%20removing%20%22ERROR%3A%20There%20was%20an%20error%0A%20while%20scanning%20assembly%3A%22%20message&In-Reply-To=%3COFAE43B3A7.47D40FA9-ON85257432.003FE41F-85257432.004057F5%40us.ibm.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001476.html">
   <LINK REL="Next"  HREF="001485.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Proposal for removing &quot;ERROR: There was an error while scanning assembly:&quot; message</H1>
    <B>Alan M Webb</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%20for%20removing%20%22ERROR%3A%20There%20was%20an%20error%0A%20while%20scanning%20assembly%3A%22%20message&In-Reply-To=%3COFAE43B3A7.47D40FA9-ON85257432.003FE41F-85257432.004057F5%40us.ibm.com%3E"
       TITLE="[Opensim-dev] Proposal for removing &quot;ERROR: There was an error while scanning assembly:&quot; message">alan_webb at us.ibm.com
       </A><BR>
    <I>Mon Apr 21 13:42:44 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001476.html">[Opensim-dev] Proposal for removing &quot;ERROR: There was an error while scanning assembly:&quot; message
</A></li>
        <LI>Next message: <A HREF="001485.html">[Opensim-dev] Proposal for removing &quot;ERROR: There was an error while	scanning assembly:&quot; message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1482">[ date ]</a>
              <a href="thread.html#1482">[ thread ]</a>
              <a href="subject.html#1482">[ subject ]</a>
              <a href="author.html#1482">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I thought the traditional way to deal with polytheistic areas such as 
configuration, module loading, etc. was to define a local interface whose 
syntax and semantics are fixed, and then allow the underlying 
implementation to evolve. We should have implementation agnostic 
specifications of loading and configuration to which we fit both OpenSim 
and the underlying implementations. That way OpenSim, and the majority of 
its developers and users, never needs to worry about how any of this is 
being implemented. And for those of us that do care, the interface remains 
a persistent testamenrt of what is supposed to exist ad how it is supposed 
to work. This principle should extend to all abstract notions such as 
plug-ins et al too. Without this the all of these areas will remain 
shrouded in mystery and confusion.

Best regards
Alan
-------------------
T.J. Watson Research Center, Hawthorne, NY
1-914-784-7286
<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">alan_webb at us.ibm.com</A>



Stefan Andersson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">stefan at tribalmedia.se</A>&gt; 
Sent by: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>
04/20/2008 02:58 PM
Please respond to
<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>


To
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&gt;
cc
<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-users at lists.berlios.de</A>
Subject
Re: [Opensim-dev] Proposal for removing &quot;ERROR: There was an error while 
scanning assembly:&quot; message






Justin,
 
First: we should strive to have one system/paradigm to maintain plugins. 
(We were supposed to have one system/paradigm to handle config files too, 
but we've all seen how far we've come on that...)
 
Second: A plugin handling infrastructure ain't no rocket science; and 
should not be construed as such. If we gave our current module system some 
love (as in refactoring and care) I'm pretty sure it can be made into 
something sexy, simple and solid.
 
Whatever we do, we should support
a) pick-up loading of modules (shared/non-shared region,and application) 
from one designated pick-up directory
b) explicit loading of modules (shared/non-shared region,and application) 
via path in config file
 
Best,
/Stefan

 

&gt;<i> Date: Sun, 20 Apr 2008 17:51:12 +0100
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> CC: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-users at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [Opensim-dev] Proposal for removing &quot;ERROR: There was an 
</I>error while scanning assembly:&quot; message
&gt;<i> 
</I>&gt;<i> Stefan Andersson wrote:
</I>&gt;<i> &gt; Justin,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; what was the problem with moving plug-in dll's to a separate 
</I>directory?
&gt;<i> &gt; 
</I>&gt;<i> &gt; Or, doesn't mono plugins support loading named plugins from an xml 
</I>file, 
&gt;<i> &gt; for example?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Wouldn't either of these solve the problem?
</I>&gt;<i> 
</I>&gt;<i> Stefan,
</I>&gt;<i> 
</I>&gt;<i> The mono addins package doesn't appear to support picking up modules 
</I>&gt;<i> from a root directory different from the one in which the assembly 
</I>&gt;<i> loading the plugins is situated. The directory you give the addins 
</I>&gt;<i> manager on initialization only appears to place the addin caching 
</I>&gt;<i> information in a different directory instead. Possibly this is as yet 
</I>&gt;<i> incomplete functionality.
</I>&gt;<i> 
</I>&gt;<i> The xml in the addins directory looks tantalisingly like it should allow 
</I>
&gt;<i> the naming of different plugin directories, but from reading the code 
</I>&gt;<i> this doesn't appear to be the case.
</I>&gt;<i> 
</I>&gt;<i> I haven't done much more experimentation, mainly because I'm beginning 
</I>&gt;<i> to think it would be better if we re-used the same module loading code 
</I>&gt;<i> we use to load region modules to load application 'plugins'. This would 
</I>&gt;<i> mean removing the mono addins manager. The cons of this are
</I>&gt;<i> 
</I>&gt;<i> * We end up writing (and maintaining) our own plugin code, though much 
</I>&gt;<i> of this is written already for region modules.
</I>&gt;<i> * We lose the ability to have a multiple application plugin cache, 
</I>&gt;<i> though I'm not sure how useful this is for us.
</I>&gt;<i> * We lose the ability to version plugins - we would have to write this 
</I>&gt;<i> in our own code.
</I>&gt;<i> 
</I>&gt;<i> The pro is
</I>&gt;<i> 
</I>&gt;<i> * We get what will probably be a simpler to understand system without 
</I>&gt;<i> the complexity of maintaining an addins cache and the bugs which result. 
</I>
&gt;<i> Mono.Addins pretty much has as much documentation as our own code, but 
</I>&gt;<i> at least we wrote our own code...
</I>&gt;<i> 
</I>&gt;<i> On the whole, I think the pro outweighs the cons - particularly as it 
</I>&gt;<i> seems odd for us to maintain two distinct plugin systems. Any changes 
</I>&gt;<i> we make will also be with a view to enhancing the current modularization 
</I>
&gt;<i> a little further down the road (e.g. to allow the explicit selection of 
</I>&gt;<i> plugins).
</I>&gt;<i> 
</I>&gt;<i> Thoughts?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Best,
</I>&gt;<i> &gt; Stefan
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>------------------------------------------------------------------------
&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; Date: Fri, 18 Apr 2008 20:00:38 +0100
</I>&gt;<i> &gt; &gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>
</I>&gt;<i> &gt; &gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-users at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; Subject: [Opensim-dev] Proposal for removing &quot;ERROR: There was an 
</I>&gt;<i> &gt; error while scanning assembly:&quot; messages
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Hello,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This is a technical post but I'm copying it to users for 
</I>information.
&gt;<i> &gt; &gt; You may (or may not) want to stop reading quickly :-)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; So, some of you may have noticed that the latest OpenSim revisions 
</I>now
&gt;<i> &gt; &gt; have many more of the subject error messages on the console. The 
</I>cause
&gt;<i> &gt; &gt; is the Mono Addins manager we're using, which writes these errors to 
</I>the
&gt;<i> &gt; &gt; console if the dll doesn't contain the configuration data it's 
</I>expecting.
&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; So today I looked at removing these errors. I had to follow several
</I>&gt;<i> &gt; &gt; lines of investigation.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 1. My initial thought was to move all the external libraries which 
</I>are
&gt;<i> &gt; &gt; causing the problem to a separate $OPENSIM_ROOT/lib/ext directory.
</I>&gt;<i> &gt; &gt; However, this means changes to make sure that the dlls can be found 
</I>in
&gt;<i> &gt; &gt; the new directory. For a cross platform application, it's hard. On
</I>&gt;<i> &gt; &gt; Microsoft's CLR we can simply use &lt;Probing&gt; in config files. 
</I>However,
&gt;<i> &gt; &gt; Mono does appear to support this, at least according to
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; <A HREF="http://www.mono-project.com/Assemblies_and_the_GAC">http://www.mono-project.com/Assemblies_and_the_GAC</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I tried it anyway, without success. Instead, the only option on Mono 
</I>is
&gt;<i> &gt; &gt; to either set the MONO_PATH or put the assemblies in the Global 
</I>Assembly
&gt;<i> &gt; &gt; Cache.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 2. This makes things awkward, so instead I looked at moving the 
</I>plugin
&gt;<i> &gt; &gt; dlls. Same problem.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 3. So instead I looked at simply suppressing the messages.
</I>&gt;<i> &gt; &gt; Unfortunately, the Mono addins code writes these messages out to the
</I>&gt;<i> &gt; &gt; console. Although in theory you could give it an IProgressMonitor 
</I>and
&gt;<i> &gt; &gt; stop this, all the classes for this (and the interface) are internal 
</I>and
&gt;<i> &gt; &gt; hence not accessible. Later versions of mono-addins than the one we 
</I>are
&gt;<i> &gt; &gt; using would appear to have the same problem.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; So although we could hack the code in 3. to remove the message (or 
</I>even
&gt;<i> &gt; &gt; replace or code our own plugin solution), the fact is that we really
</I>&gt;<i> &gt; &gt; need to have dlls in different directories eventually anyway - bin/ 
</I>is
&gt;<i> &gt; &gt; already overloaded. This means I'm forced to come back to suggestion
</I>&gt;<i> &gt; &gt; 1. Putting things in the GAC is unrealistic at this stage I think, 
</I>so
&gt;<i> &gt; &gt; I'm proposing that we move all the external libraries to
</I>&gt;<i> &gt; &gt; $OPENSIM_ROOT/lib/ext and set the MONO_PATH environmental variable 
</I>to
&gt;<i> &gt; &gt; point to this directory. Under Windows, we would instead put 
</I>&lt;Probing&gt;
&gt;<i> &gt; &gt; entries in the executable's config files.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I tried setting MONO_PATH programatically in OpenSimMain.cs, but the 
</I>set
&gt;<i> &gt; &gt; doesn't look like it is exported so the load fails. The same path 
</I>works
&gt;<i> &gt; &gt; fine when exported from the command line.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; If we go the MONO_PATH route, then I think we could provide shell
</I>&gt;<i> &gt; &gt; scripts for all the executables to set the path and then launch the
</I>&gt;<i> &gt; &gt; program, even though this is a little messy. The executable itself
</I>&gt;<i> &gt; &gt; would complain loudly if it is not on Windows and MONO_PATH is unset
</I>&gt;<i> &gt; &gt; (which would be inconvenient for Windows mono users, though there 
</I>may
&gt;<i> &gt; &gt; not be that many of them).
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I'm open to constructive suggestions on this, particularly from core
</I>&gt;<i> &gt; &gt; developers.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; justincc
</I>&gt;<i> &gt; &gt; Justin Clark-Casey
</I>&gt;<i> &gt; &gt; <A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>------------------------------------------------------------------------
&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> justincc
</I>&gt;<i> Justin Clark-Casey
</I>&gt;<i> <A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>_______________________________________________
Opensim-dev mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20080421/3fcaf886/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20080421/3fcaf886/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001476.html">[Opensim-dev] Proposal for removing &quot;ERROR: There was an error while scanning assembly:&quot; message
</A></li>
	<LI>Next message: <A HREF="001485.html">[Opensim-dev] Proposal for removing &quot;ERROR: There was an error while	scanning assembly:&quot; message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1482">[ date ]</a>
              <a href="thread.html#1482">[ thread ]</a>
              <a href="subject.html#1482">[ subject ]</a>
              <a href="author.html#1482">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
