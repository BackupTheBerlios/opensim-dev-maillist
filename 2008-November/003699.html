<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Lockless Lists?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Lockless%20Lists%3F&In-Reply-To=%3C63FAD4F222230A4EA79DE9E8BE66473502D870DA%40winxbeus19.exchange.xchg%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003698.html">
   <LINK REL="Next"  HREF="003700.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Lockless Lists?</H1>
    <B>Frisby, Adam</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Lockless%20Lists%3F&In-Reply-To=%3C63FAD4F222230A4EA79DE9E8BE66473502D870DA%40winxbeus19.exchange.xchg%3E"
       TITLE="[Opensim-dev] Lockless Lists?">adam at deepthink.com.au
       </A><BR>
    <I>Mon Nov 24 11:23:06 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003698.html">[Opensim-dev] OpenSim on Mac G5
</A></li>
        <LI>Next message: <A HREF="003700.html">[Opensim-dev] Lockless Lists?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3699">[ date ]</a>
              <a href="thread.html#3699">[ thread ]</a>
              <a href="subject.html#3699">[ subject ]</a>
              <a href="author.html#3699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've recently discovered (and perhaps I should have known this earlier) it's possible to create a reasonably high performance lock-free list/dictionary/stack/queue structure under C#.

Julian Bucknall has posted the sourcecode to a bunch of these here: <A HREF="http://www.boyet.com/articles/lockfreestack.html">http://www.boyet.com/articles/lockfreestack.html</A>

One of the big performance issues with OpenSim is our overreliance on locking data structures, which can cause issues when those locks don't release in a timely manner. If we switched to lockless structures - we could effectively eliminate those issues. (and probably create new ones.)

Does anyone have any opposition if we try to replace some of the core structures with lock-free versions, and then removing the locks on them? I'm thinking Scene.Entities, Scene.Presences would be two good targets for the first lot, then maybe we can attack some deeper bits later.

Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20081124/0bc7a7c6/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20081124/0bc7a7c6/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003698.html">[Opensim-dev] OpenSim on Mac G5
</A></li>
	<LI>Next message: <A HREF="003700.html">[Opensim-dev] Lockless Lists?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3699">[ date ]</a>
              <a href="thread.html#3699">[ thread ]</a>
              <a href="subject.html#3699">[ subject ]</a>
              <a href="author.html#3699">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
