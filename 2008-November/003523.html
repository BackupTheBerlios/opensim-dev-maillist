<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Renaming innerscene
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Renaming%20innerscene&In-Reply-To=%3CBLU134-W11397041224976D80AE1C5D5190%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003514.html">
   <LINK REL="Next"  HREF="003524.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Renaming innerscene</H1>
    <B>Stefan Andersson</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Renaming%20innerscene&In-Reply-To=%3CBLU134-W11397041224976D80AE1C5D5190%40phx.gbl%3E"
       TITLE="[Opensim-dev] Renaming innerscene">stefan at tribalmedia.se
       </A><BR>
    <I>Fri Nov  7 08:42:13 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003514.html">[Opensim-dev] Renaming innerscene
</A></li>
        <LI>Next message: <A HREF="003524.html">[Opensim-dev] Renaming innerscene
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3523">[ date ]</a>
              <a href="thread.html#3523">[ thread ]</a>
              <a href="subject.html#3523">[ subject ]</a>
              <a href="author.html#3523">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Actually, the innerscene vs scene bit was a step in the 'right' direction given that at the time we were trying to move to a better MVC separation. In the beginning, everything was a tangly mess, and classes couldn't be used for anything but the context they were coded for. Slowly, we've been inching away from that, so that we can re-use components for other contexts.
 
The goal is to be able to have a full SceneGraph class family that could be used for data manipulation of an OpenSim region without actually running a region. This is a need we've run into on several occasions, especially when modifying/transferring content.
 
And regarding the sog/sop - it makes sense to have a common baseclass, the 'object' but it also makes GREAT sense to have differentiated behaviours depending on context.
 
Again, the scene model that is expressed in the SL Protocol, and the non-normalized transfer of data is perfectly good for an application, but not for a platform. We need better API:s than what would be rendered into any protocol.
Regarding the InnerScene calling the Scene, that is probably a case that should have been solved with events firing instead - OR move the parts in InnerScene that depended on information in Scene out to Scene.
 
So,
+1 on keeping, and deepining the Scene (Scene Controller) vs InnerScene (Scene Model) divide.
+1 on thinking MVC and layered separation.
+1 on re-viewing the SOG/SOP
+1 on having a base class SceneObject
+1 on having a clean API that lets code add and interact with object in an intelligble and straightforward manner, with no request for implicit and auxiliary knowledge about object state.
Best regards,Stefan AnderssonTribal Media AB Join the 3d web revolution : <A HREF="http://tribalnet.se/">http://tribalnet.se/</A> &gt; Date: Thu, 6 Nov 2008 17:02:26 +0000&gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">melanie at t-data.com</A>&gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&gt; Subject: Re: [Opensim-dev] Renaming innerscene&gt; &gt; Precisely. Let's not perpetuate SOG that locks us into the SL model &gt; forever. New viewers are emerging as we speak and the potential for &gt; bugs like the ones you allude to can be minimized. Where sensible, &gt; any call to a &quot;group&quot; type method on a child can be made to act on &gt; the group, so that &quot;group move&quot;, for instance, can be done using any &gt; object in the group, rather than looking up the root first. Also, &gt; every child prim can indeed be delinked separately - why not? SL &gt; doesn't support it, but we can. Other viewers can. I see that, &gt; though i have been bashed for being too sl centric, i see more sl &gt; centric thinking in here than mine. Let's do the sensible thing and &gt; dump SOG, R.I.P.&gt; &gt; Melanie&gt; &gt; &gt; Justin Clark-Casey wrote:&gt; &gt; Michael Wright wrote:&gt; &gt;&gt; Yeah I don't care what base class the actual link/etc code goes in. Just &gt; &gt;&gt; meant there should be some seperation of the levels. So I was actually &gt; &gt;&gt; thinking of SceneObjectGroup as part of the InnerScene level and not at &gt; &gt;&gt; this point really concerned which class has which functions.&gt; &gt;&gt; &gt; &gt;&gt; And with SceneObjectPart I believe the general opinion of just about &gt; &gt;&gt; everyone is that we should get rid of it and just have SceneObjects.&gt; &gt; &gt; &gt; I dunno, I'll confess that I'm not 100% convinced. Certainly in Second Life setup there are some things you can do to &gt; &gt; objects as a whole which it's not sensible to do for individual prims/objects within the group. If a scene object is &gt; &gt; just a hierarchy of objects, then there may be potential for bugs which wouldn't occur if the non-root objects didn't &gt; &gt; have all the methods of the 'root' scene object.&gt; &gt; &gt; &gt; For example, if you attach an object, then it doesn't make sense to be able to go and detach individual child objects &gt; &gt; without first delinking the whole group. The SOG can enforce this by only exposing attach methods at that level (even &gt; &gt; though it effectively doesn't at the moment). A tree of SOPs where every SOP has public attach methods cannot enforce &gt; &gt; this so easily. Perhaps this is a constraint that should be somehow policed separately from a core scene object model.&gt; &gt; &gt; &gt; I also understand the argument that having a scene object be a hierarchy of objects might make multi-level linking (as &gt; &gt; opposed to Second Life's single level of linking), easier.&gt; &gt; &gt; &gt;&gt; &gt; &gt;&gt; */&quot;Frisby, Adam&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">adam at deepthink.com.au</A>&gt;/* wrote:&gt; &gt;&gt; &gt; &gt;&gt; I actually think that linking/etc probably doesn&#8217;t belong in scene.&gt; &gt;&gt; &gt; &gt;&gt; Rather &#8211; it belongs in SceneObjectGroup &#8211; I actually think that&gt; &gt;&gt; SceneObjectPart doesn&#8217;t belong in Scene either.&gt; &gt;&gt; &gt; &gt;&gt; Eg:&gt; &gt;&gt; &gt; &gt;&gt; InnerScene -&gt; IEntity[]&gt; &gt;&gt; &gt; &gt;&gt; IEntity[] += SceneObjectGroup&gt; &gt;&gt; &gt; &gt;&gt; SceneObjectGroup Parts[];&gt; &gt;&gt; &gt; &gt;&gt; We do the conversions/etc in LLClientView and other clientstacks&gt; &gt;&gt; which support a IClientPrimitive interface.&gt; &gt;&gt; &gt; &gt;&gt; Adam&gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt;&gt; *From:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>&gt; &gt;&gt; [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>] *On Behalf Of *Michael&gt; &gt;&gt; Wright&gt; &gt;&gt; *Sent:* Thursday, 6 November 2008 8:01 AM&gt; &gt;&gt; *To:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; *Subject:* Re: [Opensim-dev] Renaming innerscene&gt; &gt;&gt; &gt; &gt;&gt; Well parts of the Linking /attaching code would need to be in there.&gt; &gt;&gt; The code to actually connect the prims. But the actually handling of&gt; &gt;&gt; the client commands and anything above the actual connect commands&gt; &gt;&gt; should be in the Region level. Like with attachments if we update&gt; &gt;&gt; the attachment db list, that should be handled in the Region level.&gt; &gt;&gt; &gt; &gt;&gt; Same with Rezzing a object. There would be a base command in the&gt; &gt;&gt; InnerScene to add a new prim(s), but the handling of the Client&gt; &gt;&gt; command, and the fetching of the Prim data from Inventory would be a&gt; &gt;&gt; higher level function.&gt; &gt;&gt; &gt; &gt;&gt; So I just mean we should keep the very base level of functionality&gt; &gt;&gt; related to the 3D objects in the InnerScene. And anything above that&gt; &gt;&gt; should be in a high level.&gt; &gt;&gt; &gt; &gt;&gt; */Justin Clark-Casey &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>&gt;/* wrote:&gt; &gt;&gt; Michael Wright wrote:&gt; &gt;&gt; &gt; Well I think the plan/design was always meant to be based on&gt; &gt;&gt; functional&gt; &gt;&gt; &gt; units. Region/current Scene was never meant to be a metadata wrapper&gt; &gt;&gt; &gt; around InnerScene. It was meant to contain high level functions,&gt; &gt;&gt; at the&gt; &gt;&gt; &gt; region level. Like rezzing a object/ derezzing a object. Linking&gt; &gt;&gt; &gt; objects, attaching objects to a Avatar. I wouldn't class those as&gt; &gt;&gt; base&gt; &gt;&gt; &gt; scene level functions. And they can be seperated however we want.&gt; &gt;&gt; &gt; &gt;&gt; So what kind of things would be in InnerScene/SceneGraph, if not&gt; &gt;&gt; things link linking/delink and attachment/detachment&gt; &gt;&gt; (both of which are there at the moment)? I'm not that familiar with&gt; &gt;&gt; exactly what one would normally expect to be in a&gt; &gt;&gt; scene graph, coming as I do from an enterprise programming environment.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; I just firmly believe we should have a base layer that has the&gt; &gt;&gt; &gt; functionality that is focused on the 3D and sending/receiving&gt; &gt;&gt; clients&gt; &gt;&gt; &gt; related to the movement of objects in the scene.&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; */Justin Clark-Casey /* wrote:&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; Heh, InnerScene has always confused me too - interesting to find out&gt; &gt;&gt; &gt; that nobody remembers what it was for (as Alan&gt; &gt;&gt; &gt; alluded to, this shows the value of writing embedded class level&gt; &gt;&gt; &gt; code documentation ;)&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; I agree with Melanie - I feel that ultimately a split into&gt; &gt;&gt; &gt; functional units would be better than having two classes, one&gt; &gt;&gt; &gt; containing all region related information and one providing scene&gt; &gt;&gt; &gt; services. Especially if the outer class just wraps&gt; &gt;&gt; &gt; the inner classes' methods (but I suspect that wouldn't be the plan).&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; I assume that the conceptual difference between scene and a region&gt; &gt;&gt; &gt; is that the first provides the core simulation&gt; &gt;&gt; &gt; services while the latter consists of metadata (e.g. which region&gt; &gt;&gt; &gt; the scene represents). If there was a separate region&gt; &gt;&gt; &gt; class, I'm not convinced that there would be very much in it, beyond&gt; &gt;&gt; &gt; what is already in RegionInfo.&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; Melanie wrote:&gt; &gt;&gt; &gt; &gt; As one who has spent a lot of time in InnerScene with the local&gt; &gt;&gt; &gt; &gt; dragons, I see that in lots of cases, even having it InnerScene at&gt; &gt;&gt; &gt; &gt; all complicates things horrendously.&gt; &gt;&gt; &gt; &gt; There are actions that change between Scene and InnerScene 4 times&gt; &gt;&gt; &gt; &gt; to get the job done. That could be done much more efficiently if&gt; &gt;&gt; &gt; &gt; those methods were combined and then split up into functional&gt; &gt;&gt; units,&gt; &gt;&gt; &gt; &gt; rather than &quot;3d&quot; scoped.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; One flow I found was like this:&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Caller calls Scene:A&gt; &gt;&gt; &gt; &gt; Scene:A calls InnerScene:A&gt; &gt;&gt; &gt; &gt; Scene:A calls Scene:B&gt; &gt;&gt; &gt; &gt; Scene:A calls InnerScene:C&gt; &gt;&gt; &gt; &gt; InnerScene:C calls Scene:C&gt; &gt;&gt; &gt; &gt; Scene:A returns.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; This is overcomplex and baffling to new coders. I am not surprised&gt; &gt;&gt; &gt; &gt; that many people choose not to touch it.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Needless to say, I removed the above flow and made it into a single&gt; &gt;&gt; &gt; &gt; call into InnerScene. It was part of attachment rezzing. When i did&gt; &gt;&gt; &gt; &gt; that, I streamlined that flow.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; I believe InnerScene and Scene should not be separate, or not be&gt; &gt;&gt; &gt; &gt; separated along the line they are separated now.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; On the name, I don't really care.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; +-0 there.&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Melanie&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt; &gt; Frisby, Adam wrote:&gt; &gt;&gt; &gt; &gt;&gt; +1'ing,&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; I had no idea what InnerScene was for myself.&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; Adam&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>&gt; &gt;&gt; &gt; [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>] On Behalf Of Michael&gt; &gt;&gt; &gt; Wright&gt; &gt;&gt; &gt; &gt;&gt; Sent: Thursday, 6 November 2008 5:22 AM&gt; &gt;&gt; &gt; &gt;&gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; &gt; &gt;&gt; Subject: [Opensim-dev] Renaming innerscene&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; A long time ago, we started the process of separating the 3d&gt; &gt;&gt; &gt; scene handling code into its own class, rather than having it mixed&gt; &gt;&gt; &gt; in with more region level code, like rezzing/inventory handling.&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; It was always planned to renamed the InnerScene and Scene&gt; &gt;&gt; &gt; classes, once this separation of the 3d scene graph code was&gt; &gt;&gt; &gt; completed. The original plan being that Scene became Region (or&gt; &gt;&gt; &gt; something like that) and InnerScene changed to Scene.&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; It might be a bit to much work to rename the Scene class at this&gt; &gt;&gt; &gt; stage. But what are everyone thoughts on renaming InnerScene to&gt; &gt;&gt; &gt; something like SceneGraph.&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; I think the InnerScene class is one of the more confusing areas&gt; &gt;&gt; &gt; as a lot new coders aren't really aware what design role it is meant&gt; &gt;&gt; &gt; to play.&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; ------------------------------------------------------------------------&gt; &gt;&gt; &gt; &gt;&gt;&gt; &gt;&gt; &gt; &gt;&gt; _______________________________________________&gt; &gt;&gt; &gt; &gt;&gt; Opensim-dev mailing list&gt; &gt;&gt; &gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; &gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt;&gt; &gt; &gt; _______________________________________________&gt; &gt;&gt; &gt; &gt; Opensim-dev mailing list&gt; &gt;&gt; &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; --&gt; &gt;&gt; &gt; justincc&gt; &gt;&gt; &gt; Justin Clark-Casey&gt; &gt;&gt; &gt; <A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>&gt; &gt;&gt; &gt; _______________________________________________&gt; &gt;&gt; &gt; Opensim-dev mailing list&gt; &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt;&gt; ------------------------------------------------------------------------&gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; _______________________________________________&gt; &gt;&gt; &gt; Opensim-dev mailing list&gt; &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt;&gt; -- &gt; &gt;&gt; justincc&gt; &gt;&gt; Justin Clark-Casey&gt; &gt;&gt; <A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>&gt; &gt;&gt; _______________________________________________&gt; &gt;&gt; Opensim-dev mailing list&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt;&gt; _______________________________________________&gt; &gt;&gt; Opensim-dev mailing list&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt;&gt; ------------------------------------------------------------------------&gt; &gt;&gt; &gt; &gt;&gt; _______________________________________________&gt; &gt;&gt; Opensim-dev mailing list&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt; &gt; &gt; &gt; &gt; _______________________________________________&gt; Opensim-dev mailing list&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20081107/cd0696bc/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20081107/cd0696bc/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003514.html">[Opensim-dev] Renaming innerscene
</A></li>
	<LI>Next message: <A HREF="003524.html">[Opensim-dev] Renaming innerscene
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3523">[ date ]</a>
              <a href="thread.html#3523">[ thread ]</a>
              <a href="subject.html#3523">[ subject ]</a>
              <a href="author.html#3523">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
