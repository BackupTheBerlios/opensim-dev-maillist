<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Lockless Lists?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Lockless%20Lists%3F&In-Reply-To=%3C492D5931.4020508%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003731.html">
   <LINK REL="Next"  HREF="003734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Lockless Lists?</H1>
    <B>Justin Clark-Casey</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Lockless%20Lists%3F&In-Reply-To=%3C492D5931.4020508%40googlemail.com%3E"
       TITLE="[Opensim-dev] Lockless Lists?">jjustincc at googlemail.com
       </A><BR>
    <I>Wed Nov 26 15:12:01 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003731.html">[Opensim-dev] Lockless Lists?
</A></li>
        <LI>Next message: <A HREF="003734.html">[Opensim-dev] Lockless Lists?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3717">[ date ]</a>
              <a href="thread.html#3717">[ thread ]</a>
              <a href="subject.html#3717">[ subject ]</a>
              <a href="author.html#3717">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Christopher Yeoh wrote:
&gt;<i> On Mon, 24 Nov 2008 20:43:09 +0100
</I>&gt;<i> &quot;Homer Horwitz&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">homerhorwitz at googlemail.com</A>&gt; wrote:
</I>&gt;&gt;<i> So, I'm not sure if we really should do that move. If at all, I'm for
</I>&gt;&gt;<i> a very slow move to lock-free versions from a rather stable software
</I>&gt;&gt;<i> base (which we currently don't have in trunk), so errors that are
</I>&gt;&gt;<i> introduced during that move are more easily identifiable, with much
</I>&gt;&gt;<i> testing in-between. Even then, I'm absolutely sure we will get a lot
</I>&gt;&gt;<i> of Heisenbugs in the process, which will take us weeks to find.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Perhaps what is really needed here is some performance benchmarks 
</I>&gt;<i> which highlight existing problems? So for individual
</I>&gt;<i> changes to lockless versions we better see what improvements we'd
</I>&gt;<i> get on both small and large SMP machines and whether its worth the
</I>&gt;<i> increase in complexity.
</I>
Programmatic performance benchmarks would be very good.  It's probably a pretty complex area (interaction of actual 
client activity, numbers of prims, physics engines, etc.) but even simple not-very-realistic stuff would be a start.

Once we have something like that, we may also be able to have a script that attaches the user's machine information to 
the test output and sends it to some collating website.  That would help to answer the perennial question 'what kind of 
machine do I need to run my own region server'?

&gt;<i> 
</I>&gt;<i> I did some debugging of a deadlock a couple of weeks ago and found it
</I>&gt;<i> already pretty complicated. Any suggestions on how other people
</I>&gt;<i> approach these problems with OpenSim? I sprinkled lots of console
</I>&gt;<i> messages around as mdb doesn't seem to work for me, but in retrospect
</I>&gt;<i> it would have been really handy to have been able to just turn on
</I>&gt;<i> a lock debugging flag and have debug output when locks are taken
</I>&gt;<i> and released.
</I>
On mono, it is possible to get a thread dump by sending SIGQUIT to the vm process.  I've used this before to find out 
where a deadlock was happening, though it's a bit of a pain to pick out the information.

-- 
justincc
Justin Clark-Casey
<A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003731.html">[Opensim-dev] Lockless Lists?
</A></li>
	<LI>Next message: <A HREF="003734.html">[Opensim-dev] Lockless Lists?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3717">[ date ]</a>
              <a href="thread.html#3717">[ thread ]</a>
              <a href="subject.html#3717">[ subject ]</a>
              <a href="author.html#3717">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
