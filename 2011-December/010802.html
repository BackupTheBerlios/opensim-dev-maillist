<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Sit position changes in OpenSimulator b6df9e9 (Sat 5th Nov 2011)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2011-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Sit%20position%20changes%20in%20OpenSimulator%20b6df9e9%0A%20%28Sat%205th%20Nov%202011%29&In-Reply-To=%3CCAJaF1_HyYDq-AVRE3c7%2B%3D%3DWqv5eri6ex6Hw%3DB-zZhwGEf%2BhF3Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010796.html">
   <LINK REL="Next"  HREF="010792.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Sit position changes in OpenSimulator b6df9e9 (Sat 5th Nov 2011)</H1>
    <B>Mic Bowman</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Sit%20position%20changes%20in%20OpenSimulator%20b6df9e9%0A%20%28Sat%205th%20Nov%202011%29&In-Reply-To=%3CCAJaF1_HyYDq-AVRE3c7%2B%3D%3DWqv5eri6ex6Hw%3DB-zZhwGEf%2BhF3Q%40mail.gmail.com%3E"
       TITLE="[Opensim-dev] Sit position changes in OpenSimulator b6df9e9 (Sat 5th Nov 2011)">cmickeyb at gmail.com
       </A><BR>
    <I>Mon Dec  5 18:11:33 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010796.html">[Opensim-dev] Sit position changes in OpenSimulator b6df9e9 (Sat 5th Nov 2011)
</A></li>
        <LI>Next message: <A HREF="010792.html">[Opensim-dev] Sit position changes in OpenSimulator b6df9e9 (Sat 5th Nov 2011)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10802">[ date ]</a>
              <a href="thread.html#10802">[ thread ]</a>
              <a href="subject.html#10802">[ subject ]</a>
              <a href="author.html#10802">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a good fix (thanks for doing it Melanie!). And, so long as it isn't
back-patched into an existing release, only affects people when they
upgrade to the *next* release (or those who track daily... and they get
what you would expect... daily changes).

--mic


On Sun, Dec 4, 2011 at 11:42 PM, Melanie &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">melanie at t-data.com</A>&gt; wrote:

&gt;<i> As I am the one who did it, +1 on leaving it fixed. Items can be
</I>&gt;<i> fixed and copy/paste compatibility for new objects coming in from sl
</I>&gt;<i> is more important, IMHO.
</I>&gt;<i>
</I>&gt;<i> Melanie
</I>&gt;<i>
</I>&gt;<i> On 05/12/2011 04:14, Trinity wrote:
</I>&gt;<i> &gt; i say fix it and let the chips fall where they may
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Fri, Dec 2, 2011 at 3:55 PM, Justin Clark-Casey &lt;
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>
</I>&gt;<i> &gt;&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; OpenSimulator commit b6df9e9 (dev code) changed the sit target
</I>&gt;<i> adjustment
</I>&gt;<i> &gt;&gt; to better match that used in Second Life.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Unfortunately, this has the effect of making all existing sit positions
</I>&gt;<i> &gt;&gt; set by scripts using llSitTarget() inaccurate (e.g. avatar ends up
</I>&gt;<i> hovering
</I>&gt;<i> &gt;&gt; above a chair).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; From a user/scripter point of view this is a bad thing.  Not only do
</I>&gt;<i> &gt;&gt; existing objects with user inventory/prim inventory now have wrong
</I>&gt;<i> values,
</I>&gt;<i> &gt;&gt; but positions loaded from OARs/IARs will now be wrong without
</I>&gt;<i> adjustment,
</I>&gt;<i> &gt;&gt; and OARs/IARs saved in dev code or future 0.7.3 will have wrong sit
</I>&gt;<i> values
</I>&gt;<i> &gt;&gt; when loaded into older OpenSim releases.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; However, I believe that's it's practically impossible to have old
</I>&gt;<i> objects
</I>&gt;<i> &gt;&gt; correctly use the old sit adjustment and new objects the new one.  Here
</I>&gt;<i> are
</I>&gt;<i> &gt;&gt; the alternative courses of action and my considered pros/cons of each
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 1.  Change sit adjustment with no other action.
</I>&gt;<i> &gt;&gt; PROS: llSitTarget() is now implemented correctly.  No legacy mess in the
</I>&gt;<i> &gt;&gt; code.  No extra complexity required.  No development work required.
</I>&gt;<i> &gt;&gt; CONS: Without adjustment, all region, inventory objects and scripts now
</I>&gt;<i> &gt;&gt; use wrong sit values.  Wrong sit values in OARs and IARs.  Wrong sit
</I>&gt;<i> values
</I>&gt;<i> &gt;&gt; when OARs/IARs/objects moved between dev/future 0.7.3 versions and older
</I>&gt;<i> &gt;&gt; OpenSim versions.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 2.  Provide a tool to correct sit values in scripts
</I>&gt;<i> &gt;&gt; CONS: Too difficult since requires massive amount of script analysis.
</I>&gt;<i> &gt;&gt;  Might be possible in a limited way to catch 80/20 cases.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 3.  Use different sit adjustment depending on prim creation date (pre
</I>&gt;<i> Sat
</I>&gt;<i> &gt;&gt; 5 Nov 2011 use old value).
</I>&gt;<i> &gt;&gt; PROS: Stops older sit positions from being wrong.  Doesn't require much
</I>&gt;<i> &gt;&gt; code change.
</I>&gt;<i> &gt;&gt; CONS: A user has to know an opaque magic date when the sit position
</I>&gt;<i> &gt;&gt; changed.  Somewhat messy legacy code.  Future upgraders from 0.7.2 will
</I>&gt;<i> get
</I>&gt;<i> &gt;&gt; some prims with 'wrong' sit positions and others with 'right' depending
</I>&gt;<i> on
</I>&gt;<i> &gt;&gt; when they were created, which is in the long term possibly more
</I>&gt;<i> confusing
</I>&gt;<i> &gt;&gt; than everything needing adjustment.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 4.  Revert llSitTarget() behave and create an osSitTarget() using the
</I>&gt;<i> new
</I>&gt;<i> &gt;&gt; adjustment instead.
</I>&gt;<i> &gt;&gt; PROS: All existing sit targets continue to be 'correct', and old scripts
</I>&gt;<i> &gt;&gt; still work correctly in new objects.
</I>&gt;<i> &gt;&gt; CONS: llSitTarget() remains wrong for all time (could warn on use and
</I>&gt;<i> &gt;&gt; eventually change, but users don't pay attention to such warnings).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 5.  Store new sit positions in a different field on SOP and use this if
</I>&gt;<i> &gt;&gt; present with new sit adjustment, otherwise use old field with old sit
</I>&gt;<i> &gt;&gt; adjustment.
</I>&gt;<i> &gt;&gt; PROS: Works invisibly as long as old scripts don't set new values.
</I>&gt;<i> &gt;&gt; CONS: Messy legacy code.  Old scripts probably will set new values -
</I>&gt;<i> then
</I>&gt;<i> &gt;&gt; would need to act differently on script item creation date, with same
</I>&gt;<i> &gt;&gt; issues as 3.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 6.  Provide a config switch to use old sit adjustment or new.
</I>&gt;<i> &gt;&gt; PROS: Administrator controllable.  In a future OpenSim release, admin
</I>&gt;<i> can
</I>&gt;<i> &gt;&gt; decide when they are going to flip to using the 'new' value.  This
</I>&gt;<i> might be
</I>&gt;<i> &gt;&gt; done anyway for the use case where OpenSim is being used with content in
</I>&gt;<i> &gt;&gt; isolation from elsewhere.
</I>&gt;<i> &gt;&gt; CONS: Encourages the creation of more objects using the old sit values,
</I>&gt;<i> &gt;&gt; encouraging a continuous mix of old and new values which can't both be
</I>&gt;<i> used
</I>&gt;<i> &gt;&gt; on the same region.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Doubtless there are other strategies, but on the face of it there
</I>&gt;<i> doesn't
</I>&gt;<i> &gt;&gt; seem to be an ideal solution.  It's made much more difficult by the fact
</I>&gt;<i> &gt;&gt; that these values can only be scripts rather than as properties on the
</I>&gt;<i> part
</I>&gt;<i> &gt;&gt; (a decision which I find hard to swallow).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On the whole, I think that it's better to accept the pain of change as
</I>&gt;<i> &gt;&gt; early as possible and move to a world where all values are correct
</I>&gt;<i> rather
</I>&gt;<i> &gt;&gt; than remain with one where things are incorrect or a mish-mash in the
</I>&gt;<i> long
</I>&gt;<i> &gt;&gt; term.  As I said to Akira, the alpha nature of OpenSim is meant to be a
</I>&gt;<i> &gt;&gt; signal that these things can change as bugs are fixed.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; However, I'm certainly happy to hear alternative opinions or
</I>&gt;<i> &gt;&gt; well-researched and intelligent alternative proposals.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; Justin Clark-Casey (justincc)
</I>&gt;<i> &gt;&gt; <A HREF="http://justincc.org/blog">http://justincc.org/blog</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://twitter.com/justincc">http://twitter.com/justincc</A>
</I>&gt;<i> &gt;&gt; ______________________________**_________________
</I>&gt;<i> &gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;">https://lists.berlios.de/**mailman/listinfo/opensim-dev&lt;</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20111205/48b1d708/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20111205/48b1d708/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010796.html">[Opensim-dev] Sit position changes in OpenSimulator b6df9e9 (Sat 5th Nov 2011)
</A></li>
	<LI>Next message: <A HREF="010792.html">[Opensim-dev] Sit position changes in OpenSimulator b6df9e9 (Sat 5th Nov 2011)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10802">[ date ]</a>
              <a href="thread.html#10802">[ thread ]</a>
              <a href="subject.html#10802">[ subject ]</a>
              <a href="author.html#10802">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
