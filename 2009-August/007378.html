<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] No more inventory downloads -- yey! (Re: pruning reference servers in core)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20No%20more%20inventory%20downloads%20--%20yey%21%20%28Re%3A%20pruning%0A%20reference%20servers%20in%20core%29&In-Reply-To=%3C4A84C3D5.6060602%40metaverseink.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007382.html">
   <LINK REL="Next"  HREF="007387.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] No more inventory downloads -- yey! (Re: pruning reference servers in core)</H1>
    <B>diva at metaverseink.com</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20No%20more%20inventory%20downloads%20--%20yey%21%20%28Re%3A%20pruning%0A%20reference%20servers%20in%20core%29&In-Reply-To=%3C4A84C3D5.6060602%40metaverseink.com%3E"
       TITLE="[Opensim-dev] No more inventory downloads -- yey! (Re: pruning reference servers in core)">diva at metaverseink.com
       </A><BR>
    <I>Fri Aug 14 03:54:29 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007382.html">[Opensim-dev] pruning reference servers in core
</A></li>
        <LI>Next message: <A HREF="007387.html">[Opensim-dev] No more inventory downloads -- yey! (Re: pruning	reference servers in core)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7378">[ date ]</a>
              <a href="thread.html#7378">[ thread ]</a>
              <a href="subject.html#7378">[ subject ]</a>
              <a href="author.html#7378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>FetchInventory() on TPs/crossings is no more!

FYI, I have my local mods available in github:
<A HREF="http://github.com/diva/Diva-s-OpenSim-Tests/tree/master">http://github.com/diva/Diva-s-OpenSim-Tests/tree/master</A>

In this code, the simulators don't load/cache inventory, they just 
pre-fetch a very small amount of info (the avie's &quot;system&quot; folders).
Virtually all core code, with 2 exceptions(*), has been redirected from 
facing an inventory cache (CachedUserInfo) to facing the inventory 
service interface. The new, minimal cache is transparent to the core code.

If anyone cares to test this, I will appreciate it. Since it's not 
coming from opensim.org, it will be a bit more cumbersome, but it's 
worth experimenting with this new git-enabled process.

(*) Features I didn't touch: IAR module and the Rest Inventory plugin. 
These still work as before, bringing the entire inventory to the regions

<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">diva at metaverseink.com</A> wrote:
&gt;<i> I'm fine with waiting until September before pruning reference 
</I>&gt;<i> implementations down to one of each. But someone needs to give love to 
</I>&gt;<i> Grid.Inventory, because I don't have time for loving so many servers :-)
</I>&gt;<i> 
</I>&gt;<i> The current improvement I'm doing right now (eliminating the need to 
</I>&gt;<i> pass the entire inventory around) only works for the new-style inventory 
</I>&gt;<i> service. It can easily be made to work for the old one. Whoever wants 
</I>&gt;<i> Grid.Inventory to support the simulators' [much more reasonable] needs 
</I>&gt;<i> should make the necessary improvements to it. I'll be happy to explain 
</I>&gt;<i> what the server needs to do -- 2 additional service handlers. I still 
</I>&gt;<i> haven't pushed my local commits, and I can wait a little bit for a 
</I>&gt;<i> Grid.InventoryServer lover to step up and volunteer. But I don't think 
</I>&gt;<i> it's reasonable to hold this improvement until September; I already have 
</I>&gt;<i> it, and it's almost ready to be pushed out to grids out there. Passing 
</I>&gt;<i> thousands of inventory items upon region crossings and TPs is probably 
</I>&gt;<i> one of the worst things in OpenSim right now, and needs fixing.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> MW wrote:
</I>&gt;&gt;<i> I'm fine with the AssetInventoryServer being removed as soon as possible 
</I>&gt;&gt;<i> because I don't think anyone uses it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But believe we should at least wait a couple of more weeks before the 
</I>&gt;&gt;<i> Grid.InventoryServer
</I>&gt;&gt;<i> and Grid.AssetServer are removed, so that everyone gets a chance to have 
</I>&gt;&gt;<i> their say/vote. As a number of people are on vacation around this time.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Personally as long as the ROBUST servers are fully tested on multiple 
</I>&gt;&gt;<i> grids that have a quite heavy load/userbase, then I'm okay with removing 
</I>&gt;&gt;<i> the old servers, as long as there is total agreement; I know a few 
</I>&gt;&gt;<i> people have said they don't want to swap to ROBUST.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --- On *Tue, 11/8/09, Frisby, Adam /&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">adam at deepthink.com.au</A>&gt;/* wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     From: Frisby, Adam &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">adam at deepthink.com.au</A>&gt;
</I>&gt;&gt;<i>     Subject: Re: [Opensim-dev] pruning reference servers in core
</I>&gt;&gt;<i>     To: &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i>     Date: Tuesday, 11 August, 2009, 10:09 PM
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Please do. I'd like a 0.6.X release shortly after every
</I>&gt;&gt;<i>     networkinterface version change if possible - since it makes compat
</I>&gt;&gt;<i>     with the latest stable release always a headache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     Adam
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      &gt; -----Original Message-----
</I>&gt;&gt;<i>      &gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>
</I>&gt;&gt;<i>     &lt;/mc/compose?to=<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i>     [mailto:opensim-dev-
</I>&gt;&gt;<i>      &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">bounces at lists.berlios.de</A>
</I>&gt;&gt;<i>     &lt;/mc/compose?to=<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">bounces at lists.berlios.de</A>&gt;] On Behalf Of Justin
</I>&gt;&gt;<i>     Clark-Casey
</I>&gt;&gt;<i>      &gt; Sent: Tuesday, 11 August 2009 12:04 PM
</I>&gt;&gt;<i>      &gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i>     &lt;/mc/compose?to=<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i>      &gt; Subject: Re: [Opensim-dev] pruning reference servers in core
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>      &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">diva at metaverseink.com</A> &lt;/mc/compose?to=<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">diva at metaverseink.com</A>&gt; wrote:
</I>&gt;&gt;<i>      &gt; &gt; Dear devs,
</I>&gt;&gt;<i>      &gt; &gt;
</I>&gt;&gt;<i>      &gt; &gt; I'm finally changing the way the simulator caches inventory.
</I>&gt;&gt;<i>     This is
</I>&gt;&gt;<i>      &gt; all
</I>&gt;&gt;<i>      &gt; &gt; good, and it's the beginning of the much awaited user services
</I>&gt;&gt;<i>      &gt; &gt; refactoring. This requires a few small changes in the inventory
</I>&gt;&gt;<i>      &gt; services
</I>&gt;&gt;<i>      &gt; &gt; interface, as well as additions to the implementation(s). So...
</I>&gt;&gt;<i>      &gt; &gt;
</I>&gt;&gt;<i>      &gt; &gt; We now have 3 -- yes 3! -- different inventory servers in core.
</I>&gt;&gt;<i>     (and
</I>&gt;&gt;<i>      &gt; 3
</I>&gt;&gt;<i>      &gt; &gt; asset servers too). I think it's time to make a decision on what to
</I>&gt;&gt;<i>      &gt; keep
</I>&gt;&gt;<i>      &gt; &gt; and what to drop, because evolving this ecosystem of
</I>&gt;&gt;<i>     implementations
</I>&gt;&gt;<i>      &gt; in
</I>&gt;&gt;<i>      &gt; &gt; core is unscalable.
</I>&gt;&gt;<i>      &gt; &gt;
</I>&gt;&gt;<i>      &gt; &gt; With this, I'm proposing that we drop the old Grid.InventoryServer,
</I>&gt;&gt;<i>      &gt; the
</I>&gt;&gt;<i>      &gt; &gt; old Grid.AssetServer and the AssetInventoryServer (CB1). Some
</I>&gt;&gt;<i>     people
</I>&gt;&gt;<i>      &gt; may
</I>&gt;&gt;<i>      &gt; &gt; still be using the old servers, so it's time to switch everybody to
</I>&gt;&gt;<i>      &gt; &gt; ROBUST. Asking in the IRC, it looks like no one is using
</I>&gt;&gt;<i>      &gt; &gt; AssetInventoryServer.
</I>&gt;&gt;<i>      &gt; &gt;
</I>&gt;&gt;<i>      &gt; &gt; Comments? Objections?
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>      &gt; Might be an idea to knock out a 0.6.7 first before making that
</I>&gt;&gt;<i>     switch.
</I>&gt;&gt;<i>      &gt;
</I>&gt;&gt;<i>      &gt; --
</I>&gt;&gt;<i>      &gt; justincc
</I>&gt;&gt;<i>      &gt; Justin Clark-Casey
</I>&gt;&gt;<i>      &gt; <A HREF="http://justincc.wordpress.com">http://justincc.wordpress.com</A>
</I>&gt;&gt;<i>      &gt; _______________________________________________
</I>&gt;&gt;<i>      &gt; Opensim-dev mailing list
</I>&gt;&gt;<i>      &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i>     &lt;/mc/compose?to=<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i>      &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;<i>     _______________________________________________
</I>&gt;&gt;<i>     Opensim-dev mailing list
</I>&gt;&gt;<i>     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i>     &lt;/mc/compose?to=<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt;
</I>&gt;&gt;<i>     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ------------------------------------------------------------------------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Opensim-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007382.html">[Opensim-dev] pruning reference servers in core
</A></li>
	<LI>Next message: <A HREF="007387.html">[Opensim-dev] No more inventory downloads -- yey! (Re: pruning	reference servers in core)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7378">[ date ]</a>
              <a href="thread.html#7378">[ thread ]</a>
              <a href="subject.html#7378">[ subject ]</a>
              <a href="author.html#7378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
