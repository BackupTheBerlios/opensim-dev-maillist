<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] So I decided to give this one more shot before I	start chopping it up with a chainsaw.......
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20So%20I%20decided%20to%20give%20this%20one%20more%20shot%20before%20I%0A%09start%20chopping%20it%20up%20with%20a%20chainsaw.......&In-Reply-To=%3C34cc66250712140710h15cfba76y4c5c4956a081e284%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000549.html">
   <LINK REL="Next"  HREF="000550.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] So I decided to give this one more shot before I	start chopping it up with a chainsaw.......</H1>
    <B>Teravus Ovares</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20So%20I%20decided%20to%20give%20this%20one%20more%20shot%20before%20I%0A%09start%20chopping%20it%20up%20with%20a%20chainsaw.......&In-Reply-To=%3C34cc66250712140710h15cfba76y4c5c4956a081e284%40mail.gmail.com%3E"
       TITLE="[Opensim-dev] So I decided to give this one more shot before I	start chopping it up with a chainsaw.......">teravus at gmail.com
       </A><BR>
    <I>Fri Dec 14 16:10:15 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000549.html">[Opensim-dev] So I decided to give this one more shot before I	start chopping it up with a chainsaw.......
</A></li>
        <LI>Next message: <A HREF="000550.html">[Opensim-dev] So I decided to give this one more shot before	I	start chopping it up with a chain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#552">[ date ]</a>
              <a href="thread.html#552">[ thread ]</a>
              <a href="subject.html#552">[ subject ]</a>
              <a href="author.html#552">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, I would have to agree, it doesn't specifically solve my odd Com+
error, however;

Given that the LLUUID has changed so drastically, is it really smart to
continue to use it throughout our project and not insulate ourselves from
the changes to the LLUUID object?

One more change in the LLUUID object that's coming up in the next LibSL
update that we implement in OpenSim..  is they're removing
.ToStringHyphenated..   and changing the .ToString() functionality so that
it does what ToStringHyphenated() did previously.

I suppose my point, is;  Does anyone know what the LLUUID object is going to
look like on LibSL v0.4? 0.o   Because, I sure don't.

- Tera


On 12/14/07, Justin Clark-Casey &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Michael Wright wrote:
</I>&gt;<i> &gt; hmm,  has there been a 100% certain case of LLUUID in the grid
</I>&gt;<i> &gt; communitcations causing a problem ? As we don't actually use the
</I>&gt;<i> &gt; ISerializable interfeace, for the REST postings (which inventory
</I>&gt;<i> &gt; uses). We use XML serialising  and from all the tests I have done
</I>&gt;<i> &gt; (just did another one to be sure before I wrote this email), LLUUID is
</I>&gt;<i> &gt; serializable into XML. If it wasn't then we would no longer be able to
</I>&gt;<i> &gt; take items in and out of inventory as that serialises/deserialises the
</I>&gt;<i> &gt; SceneObjectGroup to and from xml.  Same with load-xml/save-xml.
</I>&gt;<i> &gt;
</I>&gt;<i> Yes, I thought it was odd that I wasn't seeing the same failures Teravus
</I>&gt;<i> was seeing on my Windows system.  Nonetheless, I've attached another
</I>&gt;<i> patch (a very nasty hack job) to #145 to temporarily store Guids in the
</I>&gt;<i> inventory data structures rather than LLUIDs.  See if this helps.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If possible, I would rather us leave the changing to guids for now as
</I>&gt;<i> &gt; I think we need to think of a longer term plan. As I said, the
</I>&gt;<i> &gt; Sceneobjects are full of LLUUID and using xml serialising and if we
</I>&gt;<i> &gt; want to avoid future problems with changes to LLUUID etc (like old
</I>&gt;<i> &gt; saved xml files or iventory items not working), we need to come up
</I>&gt;<i> &gt; with something to replace those classes in there and not sure Guid is
</I>&gt;<i> &gt; ideal there.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Anyway on a slightly different subject, could anyone who is working on
</I>&gt;<i> &gt; inventory, either try to catch me on irc or reply to this and let me
</I>&gt;<i> &gt; know which bits they are working on and which bits would be safe for
</I>&gt;<i> &gt; me to do some changes to. Just I want to do some refactoring to the
</I>&gt;<i> &gt; Inventory Code in scene and most likely the cache code, but don't want
</I>&gt;<i> &gt; to mess up anyone current work.
</I>&gt;<i> Since I'm already writing an e-mail, I'm just going to confirm that I'm
</I>&gt;<i> not actively looking at anything in this area (apart from this).  I
</I>&gt;<i> probably won't do so until you've finished the refactoring unless it's
</I>&gt;<i> very minor.
</I>&gt;<i> &gt; */Teravus Ovares &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">teravus at gmail.com</A>&gt;/* wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Hey Guys'n Gals..
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Digging into Bug number 145 on Mantis..    I discovered profuse
</I>&gt;<i> &gt;     and prolific use of the unserializable LLUUID in inventory..
</I>&gt;<i> &gt;     It's used *everywhere*.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     It's no wonder inventory is spotty and error prone!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     It's used in InventoryFolderBase
</I>&gt;<i> &gt;     It's used in InventoryItemBase
</I>&gt;<i> &gt;     It's used in the REST calls
</I>&gt;<i> &gt;     All of this data is being transferred over Grid Communications :/
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Once again, I restate that the LLUUID is no longer serializable.
</I>&gt;<i> &gt;     It now implements the IComparable interface which is *not*
</I>&gt;<i> &gt;     serializable..   Therefore, it can 'never' be used in any grid
</I>&gt;<i> &gt;     communications, period.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     We all need to take a good look at the grid inventory service and
</I>&gt;<i> &gt;     'fix' all uses of LLUUID.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     It's *really* easy to use a Guid instead.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     To go from a System.Guid to a LLUUID, you instantiate a new LLUUID
</I>&gt;<i> &gt;     and pass the Guid to it's constructor.
</I>&gt;<i> &gt;     ex:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Guid gAgentID = 'xxxxxxx-xx-x--x-x--xx';
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     LLUUID AgentID = new LLUUID(gAgentID);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     To go from a LLUUID to a guid, you use the UUID property of the
</I>&gt;<i> &gt;     LLUUID.
</I>&gt;<i> &gt;     ex:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Guid gAgentID = AgentID.UUID;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     So, given that you've got a userID LLUUID..      to get it over
</I>&gt;<i> &gt;     grid communications reliably..  you have to turn it into a Guid.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     requester.BeginPostObject&lt;*Guid*&gt;(_inventoryServerUrl +
</I>&gt;<i> &gt;     &quot;/GetInventory/&quot;, *userID.UUID*);
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Then on the receiving side,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      httpServer.AddStreamHandler(
</I>&gt;<i> &gt;                     new RestDeserialisehandler&lt;*Guid*,
</I>&gt;<i> &gt;     InventoryCollection&gt;(&quot;POST&quot;, &quot;/GetInventory/&quot;,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     m_inventoryService.GetUserInventory));
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     public InventoryCollection GetUserInventory(*Guid userID*)
</I>&gt;<i> &gt;             {
</I>&gt;<i> &gt;                 InventoryCollection invCollection = new
</I>&gt;<i> &gt;     InventoryCollection();
</I>&gt;<i> &gt;                 List&lt;InventoryFolderBase&gt; folders;
</I>&gt;<i> &gt;                 List&lt;InventoryItemBase&gt; allItems;
</I>&gt;<i> &gt;                 if (TryGetUsersInventory(*new LLUUID(userID),* out
</I>&gt;<i> &gt;     folders, out allItems))
</I>&gt;<i> &gt;                 {
</I>&gt;<i> &gt;                     invCollection.AllItems = allItems;
</I>&gt;<i> &gt;                     invCollection.Folders = folders;
</I>&gt;<i> &gt;                     invCollection.UserID = *new LLUUID(userID);*
</I>&gt;<i> &gt;                 }
</I>&gt;<i> &gt;                 return invCollection;
</I>&gt;<i> &gt;             }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Additionally,
</I>&gt;<i> &gt;     Any object that encapsulates a LLUUID directly, is NOT
</I>&gt;<i> &gt;     serializable...   that means..   the objects;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     InventoyFolderBase
</I>&gt;<i> &gt;     and
</I>&gt;<i> &gt;     InventoryItemBase
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Are not serializable because they encapsulate LLUUIDs.  This is
</I>&gt;<i> &gt;     *bad* :D.  They cannot go over Grid Communications reliably.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     They all need to be changed to Guids, or we'll continue to have
</I>&gt;<i> &gt;     spotty inventory.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;      :D
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     I'm mentioning this because it's a big problem..
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     I don't really know this portion of the code well..   so if I edit
</I>&gt;<i> &gt;     it, it's likely to break..  hence the subject.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Someone take this on please..   so I don't have to chop it up with
</I>&gt;<i> &gt;     a chainsaw..    grind it down with a tree stump grinder, run it
</I>&gt;<i> &gt;     over with a steam roller and jack-hammer it to itty bitty bite
</I>&gt;<i> &gt;     sized serializable components that can reliably be transferred
</I>&gt;<i> &gt;     over grid communications. :D
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Best Regards
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Tera
</I>&gt;<i> &gt;     _______________________________________________
</I>&gt;<i> &gt;     Opensim-dev mailing list
</I>&gt;<i> &gt;     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;     <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt; Sent from Yahoo!
</I>&gt;<i> &gt; &lt;
</I>&gt;<i> <A HREF="http://us.rd.yahoo.com/mailuk/taglines/isp/control/*http://us.rd.yahoo.com/evt=51949/*http://uk.docs.yahoo.com/mail/winter07.html">http://us.rd.yahoo.com/mailuk/taglines/isp/control/*http://us.rd.yahoo.com/evt=51949/*http://uk.docs.yahoo.com/mail/winter07.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - a smarter inbox.
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20071214/5c568a09/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20071214/5c568a09/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000549.html">[Opensim-dev] So I decided to give this one more shot before I	start chopping it up with a chainsaw.......
</A></li>
	<LI>Next message: <A HREF="000550.html">[Opensim-dev] So I decided to give this one more shot before	I	start chopping it up with a chain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#552">[ date ]</a>
              <a href="thread.html#552">[ thread ]</a>
              <a href="subject.html#552">[ subject ]</a>
              <a href="author.html#552">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
