<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Issues with the Simulator under high load
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2012-March/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Issues%20with%20the%20Simulator%20under%20high%20load&In-Reply-To=%3C4F6406A5.7080702%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010996.html">
   <LINK REL="Next"  HREF="011023.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Issues with the Simulator under high load</H1>
    <B>Justin Clark-Casey</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Issues%20with%20the%20Simulator%20under%20high%20load&In-Reply-To=%3C4F6406A5.7080702%40googlemail.com%3E"
       TITLE="[Opensim-dev] Issues with the Simulator under high load">jjustincc at googlemail.com
       </A><BR>
    <I>Sat Mar 17 04:36:05 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="010996.html">[Opensim-dev] Issues with the Simulator under high load
</A></li>
        <LI>Next message: <A HREF="011023.html">[Opensim-dev] Issues with the Simulator under high load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11018">[ date ]</a>
              <a href="thread.html#11018">[ thread ]</a>
              <a href="subject.html#11018">[ subject ]</a>
              <a href="author.html#11018">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Akira.  I have now updated the &quot;show threads&quot; method to show threadpool statistics for the main threadpool.  Please 
note that each XEngine script engine will also have it's own threadpool (which can be seen using the &quot;xengine status&quot; 
command).  Might need to improve this further.

&quot;show threads&quot; will also show all in-use threads.  However, at least on mono 2.6.7 this isn't reported by the VM so 
won't be shown.

I'm not sure whether this will help you or not in tracking down performance issues.  In some situations it could help 
(e.g. if threads are encountering deadlock the number of 'in use' threads will leap up, though you've probably already 
noticed deadlock by the long-running threads reporting monitoring failures and the sim locking up).

So I'd be happy to hear suggestions for additional data and I'll implement them if I can, since I think this is going to 
be a growing area of concern.  Unfortunately pinning down performance issues with a system as complex as OpenSimulator 
(with massive numbers of threads and user generated scripts) is likely to remain a significant challenge for the 
forseeable future.

On 11/03/12 19:15, Akira Sonoda wrote:
&gt;<i> Am 10. M&#228;rz 2012 03:25 schrieb Justin Clark-Casey &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">jjustincc at googlemail.com</A>&gt;&gt;:
</I>&gt;<i>
</I>&gt;<i>     I'm sorry to say that you'll have to take the ThreadPool numbers with a very very very large pinch of salt.  I
</I>&gt;<i>     believe they only refer to the built-in mono thread pool and not the SmartThreadPool which is the one actually used
</I>&gt;<i>     (and beyond that the core simulator and xengine use separate pools).  I will try and improve this situation soon.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thank you Justin!
</I>&gt;<i>
</I>&gt;<i> Would be nice to have some meaningful statistics for all those ThreadPools! Maybe there is a possibility to write those
</I>&gt;<i> statistics to the log from time to time ( e.g. every 30 seconds). Together with some documented &quot;best practices&quot; from
</I>&gt;<i> those who operate Sims, with lots of avatars on it - I'm thinking mainly the OSgrid Plazas are good references - this
</I>&gt;<i> could be highly valuable information for those who operate Sims for similar purposes ( meeting points, parties, concerts
</I>&gt;<i> etc. )
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>

-- 
Justin Clark-Casey (justincc)
<A HREF="http://justincc.org/blog">http://justincc.org/blog</A>
<A HREF="http://twitter.com/justincc">http://twitter.com/justincc</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010996.html">[Opensim-dev] Issues with the Simulator under high load
</A></li>
	<LI>Next message: <A HREF="011023.html">[Opensim-dev] Issues with the Simulator under high load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11018">[ date ]</a>
              <a href="thread.html#11018">[ thread ]</a>
              <a href="subject.html#11018">[ subject ]</a>
              <a href="author.html#11018">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
