<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Proposal: cache compiled scripts across server	restarts
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2011-June/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%3A%20cache%20compiled%20scripts%20across%20server%0A%09restarts&In-Reply-To=%3CC06C9845-4B38-409C-B67F-7A65EB69ABB4%40t-data.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010295.html">
   <LINK REL="Next"  HREF="010297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Proposal: cache compiled scripts across server	restarts</H1>
    <B>Melanie</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Proposal%3A%20cache%20compiled%20scripts%20across%20server%0A%09restarts&In-Reply-To=%3CC06C9845-4B38-409C-B67F-7A65EB69ABB4%40t-data.com%3E"
       TITLE="[Opensim-dev] Proposal: cache compiled scripts across server	restarts">melanie at t-data.com
       </A><BR>
    <I>Sun Jun 19 12:36:48 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="010295.html">[Opensim-dev] Proposal: cache compiled scripts across server	restarts
</A></li>
        <LI>Next message: <A HREF="010297.html">[Opensim-dev] Proposal: cache compiled scripts across server	restarts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10296">[ date ]</a>
              <a href="thread.html#10296">[ thread ]</a>
              <a href="subject.html#10296">[ subject ]</a>
              <a href="author.html#10296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

that nwould break quite a few systems that people have created to manage the script files externally as well as having implications for script transfer between regions configured differently and therefore impact interop and heterogenous grids negatively.

There is an option already that stops Xengine fro. deleting the scripts on startup - if used, the user needs to take care of time based cleanup or risk scrip file bloat.

The compiler version does't really come into it, so there is no need for themechanism you describe and it would in fact be potentially harmful.

Melanie

On 19 Jun 2011, at 11:27, Oren Hurvitz &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">orenh at kitely.com</A>&gt; wrote:

&gt;<i> XEngine currently caches compiled scripts in the &quot;ScriptEngines&quot; directory, so it only has to compile each script once, even if it's used many times. However, whenever OpenSim starts XEngine deletes all the previously-compiled scripts, which means they need to be recompiled. This makes region startup slow if the region has many scripts.
</I>&gt;<i> 
</I>&gt;<i> I propose keeping cached scripts even across OpenSim restarts. The only challenge is to make sure scripts are recompiled if the script engine has changed. To do so, I'll append the compiler version to the compiled assembly filename. When XEngine starts, instead of deleting *all* the compiled scripts it will only delete scripts whose version doesn't match the current version.
</I>&gt;<i> 
</I>&gt;<i> The compiler version will be defined by the user, in OpenSim.ini. For example:
</I>&gt;<i> 
</I>&gt;<i> [XEngine]
</I>&gt;<i> ...
</I>&gt;<i>     ;; The current version of the compiler (e.g., the version of OpenSim from Git)
</I>&gt;<i>     CompilerVersion = &quot;94d3076&quot;
</I>&gt;<i> 
</I>&gt;<i> The default value would be an empty string, which means that the compiler version is undefined. In that case XEngine will continue to use the current logic, i.e. delete all the compiled scripts whenever OpenSim is started. I expect most casual users will keep the default value, so they will see no change from the current behavior. However, more advanced users who have a standard process to upgrade OpenSim (e.g., me ;) ) will be able to improve caching using this mechanism.
</I>&gt;<i> 
</I>&gt;<i> The filenames would look like this (notice the compiler version at the end):
</I>&gt;<i> 
</I>&gt;<i> CommonCompiler_compiled_14d3d7a9-0e3b-456d-8f09-54a31b5b2a22_94d3076.dll
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Any thoughts?
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Oren Hurvitz
</I>&gt;<i> VP R&amp;D
</I>&gt;<i> Kitely Ltd.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010295.html">[Opensim-dev] Proposal: cache compiled scripts across server	restarts
</A></li>
	<LI>Next message: <A HREF="010297.html">[Opensim-dev] Proposal: cache compiled scripts across server	restarts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10296">[ date ]</a>
              <a href="thread.html#10296">[ thread ]</a>
              <a href="subject.html#10296">[ subject ]</a>
              <a href="author.html#10296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
