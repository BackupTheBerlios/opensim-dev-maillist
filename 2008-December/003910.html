<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Protocol documentation, anyone?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Protocol%20documentation%2C%20anyone%3F&In-Reply-To=%3C62BFE5680C037E4DA0B0A08946C0933D4A867A70%40rrsmsx506.amr.corp.intel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003896.html">
   <LINK REL="Next"  HREF="003883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Protocol documentation, anyone?</H1>
    <B>Hurliman, John</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Protocol%20documentation%2C%20anyone%3F&In-Reply-To=%3C62BFE5680C037E4DA0B0A08946C0933D4A867A70%40rrsmsx506.amr.corp.intel.com%3E"
       TITLE="[Opensim-dev] Protocol documentation, anyone?">john.hurliman at intel.com
       </A><BR>
    <I>Wed Dec 10 19:02:50 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003896.html">[Opensim-dev] Protocol documentation, anyone?
</A></li>
        <LI>Next message: <A HREF="003883.html">[Opensim-dev] An Open Letter to Open Source and OpenSim Communities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3910">[ date ]</a>
              <a href="thread.html#3910">[ thread ]</a>
              <a href="subject.html#3910">[ subject ]</a>
              <a href="author.html#3910">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A> [mailto:opensim-dev- 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">bounces at lists.berlios.de</A>] On Behalf Of Cristina Videira Lopes
</I>&gt;<i> Sent: Tuesday, December 09, 2008 2:55 PM
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> Subject: [Opensim-dev] Protocol documentation, anyone?
</I>&gt;<i> 
</I>&gt;<i> It's clear that we don't know a lot of things of the client-server
</I>&gt;<i> protocol with the LL viewer. The fact that things like TPs and crossings
</I>&gt;<i> kind of work seems to be entirely due to the relentless work of
</I>&gt;<i> trial-and-error of some early contributors to OpenSim. Kudos to them!
</I>&gt;<i> The fact that no one was even aware of EnableAgentCommunication is an
</I>&gt;<i> indicator that this has been really, truly a case of honest reverse-
</I>&gt;<i> engineering... The current state of things is extremely fragile, though.
</I>&gt;<i> If we try to fix some oddity in one corner of the protocol, chances are
</I>&gt;<i> we are going to screw up seven different things in the rest of the
</I>&gt;<i> protocol, because we don't know what the client wants.
</I>&gt;<i> 
</I>&gt;<i> So -- we need help. Calling for people who don't see themselves
</I>&gt;<i> contributing code to OpenSim core, but that want to help its
</I>&gt;<i> development by helping make the guessing game less painful!
</I>&gt;<i> 
</I>&gt;<i> The challenge is to read the LL viewer source code and try to get an
</I>&gt;<i> understanding of what the client expects from the servers with respect
</I>&gt;<i> to region crossings and teleports. Here are some examples of things I
</I>&gt;<i> would like to know:
</I>&gt;<i> 
</I>&gt;<i> - How are seed capabilities being used in the client? - Do all child
</I>&gt;<i> agents have their own seed cap, or do they share that seed with the root
</I>&gt;<i> agent? - Does the client care about who sends it seed capabilities? -
</I>&gt;<i> What is the expectation on the seed cap that is sent on
</I>&gt;<i> EstablishAgentCommunication, CrossRegion, FinishTeleport? - Do child
</I>&gt;<i> agents have Event Queues? If so, when are they opened/closed? - Under
</I>&gt;<i> what circumstances does the client close or refuse to use an Event
</I>&gt;<i> Queue? ...
</I>&gt;<i> 
</I>&gt;<i> If anyone is interested in doing this important piece of work, I have
</I>&gt;<i> very concrete viewer log messages that can serve as starting points
</I>&gt;<i> for mining the client code. Just let me know!
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Crista
</I>&gt;<i> 
</I>
There's always the route of reverse engineering the communications (which has worked well in the past). I know no one likes to work on things that aren't directly fixing bugs or adding features to OpenSim core, but the indirect benefits are huge of having a robust set of tools for reverse engineering these things. The EstablishAgentCommunication issue would have been discovered much earlier if logs were made of capabilities requests and EventQueue communication for every viewer release.

The viewer is also a fairly good debugging tool itself. If you get ahold of a copy compiled in RelWithDebugInfo mode, it will dump lots of good information to the console while it runs. Watching the SecondLife.log in real-time or going back after something went wrong can sometimes give hints.

I bring it up because this thread looks exactly like what the libomv team went through about six months into the project. Everyone shouted for help, attended lots of in-world meetings, participated on sldev, and tried to start documentation efforts, without much success. Anything that came out of it is scattered across <A HREF="http://wiki.secondlife.com/wiki/,">http://wiki.secondlife.com/wiki/,</A> but we only made real progress by improving GridProxy and working with dedicated reverse engineers.

John

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003896.html">[Opensim-dev] Protocol documentation, anyone?
</A></li>
	<LI>Next message: <A HREF="003883.html">[Opensim-dev] An Open Letter to Open Source and OpenSim Communities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3910">[ date ]</a>
              <a href="thread.html#3910">[ thread ]</a>
              <a href="subject.html#3910">[ subject ]</a>
              <a href="author.html#3910">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
