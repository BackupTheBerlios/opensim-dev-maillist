<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] external host name
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20external%20host%20name&In-Reply-To=%3Caf5e8e660812112357j2259671evafcb35cebd63df2a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003984.html">
   <LINK REL="Next"  HREF="003986.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] external host name</H1>
    <B>Lc</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20external%20host%20name&In-Reply-To=%3Caf5e8e660812112357j2259671evafcb35cebd63df2a%40mail.gmail.com%3E"
       TITLE="[Opensim-dev] external host name">lcc1967 at gmail.com
       </A><BR>
    <I>Fri Dec 12 08:57:38 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003984.html">[Opensim-dev] external host name
</A></li>
        <LI>Next message: <A HREF="003986.html">[Opensim-dev] external host name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3985">[ date ]</a>
              <a href="thread.html#3985">[ thread ]</a>
              <a href="subject.html#3985">[ subject ]</a>
              <a href="author.html#3985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>and it will break any failover system too.



On Fri, Dec 12, 2008 at 8:49 AM, Hurliman, John &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">john.hurliman at intel.com</A>&gt;wrote:

&gt;<i> Resolving all hostnames to IP addresses would break virtual hosting, a very
</I>&gt;<i> common practice. I don't understand your earlier argument: we can't assume
</I>&gt;<i> DNS presence*, so we should use DNS to resolve all hostnames? Can you
</I>&gt;<i> clarify that?
</I>&gt;<i>
</I>&gt;<i> *If you're building a virtual world in an environment where there is no DNS
</I>&gt;<i> service, why would you put a hostname in your config file?
</I>&gt;<i>
</I>&gt;<i> John
</I>&gt;<i>
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev-bounces at lists.berlios.de</A> [mailto:opensim-dev-
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">bounces at lists.berlios.de</A>] On Behalf Of Melanie
</I>&gt;<i> &gt; Sent: Thursday, December 11, 2008 9:31 PM
</I>&gt;<i> &gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; Subject: Re: [Opensim-dev] external host name
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Then we should resolve all hostname fields int he LL stack, and feed
</I>&gt;<i> &gt; the client IP addresses. That should still allow us flexible handling.
</I>&gt;<i> &gt; Most importantly, we should not string-compare hostss. Not if (host a
</I>&gt;<i> &gt; == host b) but if (resolve(host a) == resolve(host b))
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Melanie
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Diva Canto wrote:
</I>&gt;<i> &gt;&gt; I agree. The problem is that the client doesn't understand that, and
</I>&gt;<i> &gt;&gt; this causes problems with caps urls.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Melanie wrote:
</I>&gt;<i> &gt;&gt;&gt; A host name can also be an IP address. IP addresses and hostnames are
</I>&gt;<i> &gt;&gt;&gt; interchangable and we can't assume DNS presence. So, the field should
</I>&gt;<i> &gt;&gt;&gt; accept a name or IP, and resolve names, like almost everything else on
</I>&gt;<i> &gt;&gt;&gt; the internet does.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Melanie
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Cristina Videira Lopes wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; The thing is that this can potentially create a RegionInfo data
</I>&gt;<i> &gt;&gt;&gt;&gt; structure with
</I>&gt;<i> &gt;&gt;&gt;&gt;            nRegionInfo.ExternalHostName = regionData.IPADDR;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; This is inconsistent with certain queries on the Grid server, like
</I>&gt;<i> &gt;&gt;&gt;&gt; &quot;give me all my neighbors&quot; which may send host names.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; So, back to the point: someone needs to decide what is it that
</I>&gt;<i> &gt;&gt;&gt;&gt; RegionInfo.ExternalHostName  is supposed to hold.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Teravus Ovares wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; RegionUpData is my fault, and spawned from compatibility issues
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; with .NET remoting and Mono remoting with complex types.  It is
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; only used to notify a neighbor region that 'this region is up'
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Best Regards
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Teravus
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; On 12/11/08, Cristina Videira Lopes &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">lopes at ics.uci.edu</A>&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Things are very messy right now. You can search for &quot;sim_ip&quot;, for
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; example, which is used in chatting with the grid server, and where
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; it is being converted to an IP address in about half of the cases.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; To compensate, and before I noticed this inconsistency, Homer
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; introduced another field called &quot;sim_host&quot;, so not to mess with
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; what was already there, that is supposed to carry the external host
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; name, but this only works up to the point in which RegionInfo data
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; structures are created. At that point, we need to decide what to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; place in m_externalHostName, sim_ip or sim_host. Which means
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; changes in OGS1.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; I also noticed that there is yet another data structure called
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; RegionUpData that uses IP addresses.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; So, messy. Someone should decide what this field is supposed to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; be, and make it a rule.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Charles Krinke wrote:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Dear Diva:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; You have a very good point and I would support harmonizing to
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; one notion even at the expense of breaking some things for a while.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; In fact, if someone can identify what some of those things are, or
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; come up with a couple of search strings or grep expressions, I
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; would like to look at the anomalies myself.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; +1 on external_host_name
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Charles
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; ________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; From: Cristina Videira Lopes &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">lopes at ics.uci.edu</A>&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Sent: Thursday, December 11, 2008 2:42:05 PM
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Subject: [Opensim-dev] external host name
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; It turns out that a lot of problems with CAPs have to do with
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; inconsistencies surrounding the URL of the seed cap. Specifically,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; in some cases we're producing URLs with hostnames, other times
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; we're producing URLs with IP addresses, for example:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="http://ucigrid03.nacs.uci.edu:9000/CAPS/4cfc94fa-09be-409b-b136-">http://ucigrid03.nacs.uci.edu:9000/CAPS/4cfc94fa-09be-409b-b136-</A> cd
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; a2cdde0000/ vs. MailScanner has detected a possible fraud attempt
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; from &quot;128.200.71.43:9000&quot; claiming to be MailScanner warning:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; numerical links are often malicious:
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="http://128.200.71.43:9000/CAPS/4cfc94fa-09be-409b-b136-">http://128.200.71.43:9000/CAPS/4cfc94fa-09be-409b-b136-</A> cda2cdde000
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; 0/
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; The client is not smart enough to test if this is the same host,
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; it assumes it isn't, so it decides someone's trying to game it.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; The inconsistencies are all over the code in OpenSim, and they
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; pertain to the use of ExternalHostName in several data s!
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; tructures. In some cases, an explicit conversion to IP addresses is
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; made.
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; We should converge to one single thing. And I believe that thing
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; should be whatever it is given in external_host_name config. Is
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; this right? However, I am a bit afraid this is going to break 17
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; different things...
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Crista
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; ________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Opensim-dev
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; mailing
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; ------------------------------------------------------------------ -
</I>&gt;<i> &gt;&gt;&gt;&gt; - ----
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; -------------------------------------------------------------------- -
</I>&gt;<i> &gt;&gt; - --
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20081212/12928642/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20081212/12928642/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003984.html">[Opensim-dev] external host name
</A></li>
	<LI>Next message: <A HREF="003986.html">[Opensim-dev] external host name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3985">[ date ]</a>
              <a href="thread.html#3985">[ thread ]</a>
              <a href="subject.html#3985">[ subject ]</a>
              <a href="author.html#3985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
