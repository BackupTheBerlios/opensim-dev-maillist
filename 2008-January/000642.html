<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] another little can of worms: attachments :-)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20another%20little%20can%20of%20worms%3A%20attachments%20%3A-%29&In-Reply-To=%3CBLU134-W19567459B402D13DC90FF3D54C0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000641.html">
   <LINK REL="Next"  HREF="000644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] another little can of worms: attachments :-)</H1>
    <B>Stefan Andersson</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20another%20little%20can%20of%20worms%3A%20attachments%20%3A-%29&In-Reply-To=%3CBLU134-W19567459B402D13DC90FF3D54C0%40phx.gbl%3E"
       TITLE="[Opensim-dev] another little can of worms: attachments :-)">stefan at tribalmedia.se
       </A><BR>
    <I>Fri Jan  4 21:27:59 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000641.html">[Opensim-dev] another little can of worms: attachments :-)
</A></li>
        <LI>Next message: <A HREF="000644.html">[Opensim-dev] another little can of worms: attachments :-)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#642">[ date ]</a>
              <a href="thread.html#642">[ thread ]</a>
              <a href="subject.html#642">[ subject ]</a>
              <a href="author.html#642">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 
I agree - thank you for this very enlightening writing! (It really should be copied up on a wiki somewhere)
 
This said, I have two questions (that are probably noob++ and rtfc/rtfw but hey...) just to be sure I understand the situation;
 
* I understand this to mean that the attached prims actually don't 'move' as in 'changing coordinates' during an animation, so that even if they move on the screen, they don't move representation wise; nothing actually is communicated or changed. Is this correct? (this would mean that there is no way of ever processing physics on attachments)
* What is meant with &quot;ALL the above is client side&quot;? Surely, the rotation- and position offset changes are updated on the server and then transmitted to the client?Best regards,
Stefan



&gt;<i> Date: Fri, 4 Jan 2008 11:31:20 -0800&gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">danbmil99 at yahoo.com</A>&gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>&gt; Subject: Re: [Opensim-dev] another little can of worms: attachments :-)&gt; &gt; great exposition! This really helps me understand the situation wrt SL&gt; servers.&gt; &gt; However I think it's worth considering what we can do that goes beyond&gt; Linden's implementation, but stays compatible with the client. What you&gt; describe with tinys and attachments is really an elaborate kluge to avoid&gt; the limitations of Linden's server-side architecture.&gt; &gt; Since the client is basically constructed as a 3D viewer, and knows nothing&gt; about physics, it seems to me there is an opportunity to think about&gt; attachments in a much more reasonable way. The subtleties arise when you&gt; start thinking about how animation interacts with server-side movement.&gt; &gt; Even without getting into attachments, the whole paradigm of the avatar&gt; represented as a simple bounding volume can be called into question -- but&gt; this probably leads inevitably to client-side changes, such as animations&gt; with physics, as Adam suggests in another post.&gt; &gt; In my dream world, there is no distinction between physics and animation. &gt; What we call animation today would be translated into physics commands,&gt; which would be implemented using control logic on top of virtual forces. At&gt; that point, it would generally be impossible to animate something that is&gt; physically unrealistic, such as two body parts interpenetrating.&gt; &gt; The key to making this work is to understand the relationship between server&gt; and client, and managing the unavoidable latency between the two. What I'm&gt; still unclear on is how far we can go without requiring changes to the&gt; client protocol.&gt; &gt; -dan&gt; &gt; &gt; --- Melanie &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">melanie at t-data.com</A>&gt; wrote:&gt; &gt; &gt; Hi,&gt; &gt; &gt; &gt; Dalien Talbot wrote:&gt; &gt; &gt; 1) from Dan's: &quot;how are the 'huge dino' avatars are made - whose height&gt; &gt; is&gt; &gt; &gt; above the max height of the avatar&quot;&gt; &gt; &gt; &gt; Simple...&gt; &gt; &gt; &gt; You can make an animation that offsets the visible avatar from the &gt; &gt; true position. Now, the physics aspect is very interesting:&gt; &gt; &gt; &gt; For the purpose of physics, an animation doesn't cause the avatar to &gt; &gt; move at all!&gt; &gt; The avatar is always represented in physics at the point where the &gt; &gt; server sees it, as it's bounding box, at it's position.&gt; &gt; &gt; &gt; Now, your wyrm avatar:&gt; &gt; &gt; &gt; For physics, the avie is located at ground level. Typically about &gt; &gt; where the legs are. So, you can bump into the legs. You actually &gt; &gt; bump into the avatar!&gt; &gt; The animation lifts the _visible_ avie 5 m into the air, sets it at &gt; &gt; an angle and folds in the arms and legs, so that the avie is 100% &gt; &gt; within the dragon body.&gt; &gt; Finally, the attachments are put on. They are attached to the limbs, &gt; &gt; which makes for some unusual joint translations. That is why these &gt; &gt; avies have their own set of animations, AO style. They are phantom.&gt; &gt; &gt; &gt; If you want to do battle with this dragon, you have to attack it's &gt; &gt; legs, since, for collision purposes, that's where the avatar is. The &gt; &gt; translation which is effected by the animation is simply not a &gt; &gt; factor here.&gt; &gt; &gt; &gt; Try to collide with such a beastie while flying - you'll fly &gt; &gt; straight through it!&gt; &gt; Airspace above a Tiny? No, you'd bump into an avatar. Tinies cannot &gt; &gt; go through tiny doors! The door must be at least the height of the &gt; &gt; bounding box of the shortest possible &quot;normal&quot; avatar.&gt; &gt; &gt; &gt; So:&gt; &gt; Physics: serverside, bounding box @ position. That simple.&gt; &gt; Animation: clientside. It has no bearing on physics interaction, &gt; &gt; even if it visually translates the avatar somewhere else.&gt; &gt; Attachment: in world, phantom, and always rooted at the avatar's &gt; &gt; center of mass. The true offset of an attachment from the avatar's &gt; &gt; physics center is always 0,0,0. The asset contains a separate set of &gt; &gt; offsets, which are a display offset. This is added to the offset for &gt; &gt; the attachment point, clientside.&gt; &gt; &gt; &gt; In an attachment: (from memory)&gt; &gt; llGetPos() = world position (avatar center)&gt; &gt; llGetLocalPos() = offset from attachment point&gt; &gt; llGetRot() = world rotation of the AVATAR. The looking direction is &gt; &gt; always parallel to the ground plane, unless in mouselook.&gt; &gt; llGetLocalRot() = rotation at the attachment point.&gt; &gt; llGetRootRotation() = llGetRot()&gt; &gt; &gt; &gt; llSetPos() = sets attachemnt point offset&gt; &gt; llSetRot() = does nothing&gt; &gt; llSetLocalRot() = rotates attachemnt.&gt; &gt; &gt; &gt; ALL the above is clientside!&gt; &gt; &gt; &gt; Attachments are phantom, but collisions of the AVATAR trigger &gt; &gt; collision() events in attachments.&gt; &gt; &gt; &gt; Attachments can enable physics. That makes them no less phantom, but &gt; &gt; allows them to use damping motion to move the AVATAR. This is how &gt; &gt; the windwalker/wallwalker work. The object, going physical, actually &gt; &gt; just links their physics functions the the avatar's physics.&gt; &gt; &gt; &gt; Here is a little bug that LL has in there: If a script makes an &gt; &gt; attachment physical, and the script is then restarted/resaved/reset, &gt; &gt; the attachment will not behave as a physical attachment anymore, but &gt; &gt; will claim it is one. So, physics can not be re-enabled, since the &gt; &gt; LSL interpreter thinks it already is.&gt; &gt; In order to edit/test a script that does physical movement, you need &gt; &gt; to unwear and re-wear the attachemnt, which resets that flag.&gt; &gt; &gt; &gt; Weird, but I make weapons, I know. I wish there were swords that &gt; &gt; actually collide with the avie they visually hit!&gt; &gt; &gt; &gt; Melanie&gt; &gt; _______________________________________________&gt; &gt; Opensim-dev mailing list&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>&gt; &gt; &gt; &gt; _______________________________________________&gt; Opensim-dev mailing list&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20080104/8416200e/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20080104/8416200e/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000641.html">[Opensim-dev] another little can of worms: attachments :-)
</A></li>
	<LI>Next message: <A HREF="000644.html">[Opensim-dev] another little can of worms: attachments :-)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#642">[ date ]</a>
              <a href="thread.html#642">[ thread ]</a>
              <a href="subject.html#642">[ subject ]</a>
              <a href="author.html#642">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
