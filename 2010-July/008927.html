<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts and &quot;On The Fly&quot; loading/unloading of inactive idle regions
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Feature%20Request%3A%20Smart%20Regions%20-%20Idle%20Region%0A%20Timeouts%20and%20%22On%20The%20Fly%22%20loading/unloading%20of%20inactive%20idle%20regions&In-Reply-To=%3C4C349212.8030905%40metaverseink.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008926.html">
   <LINK REL="Next"  HREF="008928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts and &quot;On The Fly&quot; loading/unloading of inactive idle regions</H1>
    <B>Diva Canto</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Feature%20Request%3A%20Smart%20Regions%20-%20Idle%20Region%0A%20Timeouts%20and%20%22On%20The%20Fly%22%20loading/unloading%20of%20inactive%20idle%20regions&In-Reply-To=%3C4C349212.8030905%40metaverseink.com%3E"
       TITLE="[Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts and &quot;On The Fly&quot; loading/unloading of inactive idle regions">diva at metaverseink.com
       </A><BR>
    <I>Wed Jul  7 16:41:22 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008926.html">[Opensim-dev] Feature Request: Smart Regions - Idle	Region	Timeouts and &quot;On The Fly&quot; loading/unloading of	inactive idle regions
</A></li>
        <LI>Next message: <A HREF="008928.html">[Opensim-dev] Feature Request: Smart Regions - Idle Region	Timeouts and &quot;On The Fly&quot; loading/unloading of inactive idle regions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8927">[ date ]</a>
              <a href="thread.html#8927">[ thread ]</a>
              <a href="subject.html#8927">[ subject ]</a>
              <a href="author.html#8927">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There is a ton of interesting engineering challenges on the server side 
of these systems. We haven't even begun to scratch the surface. As such, 
it's completely unrealistic to expect things like what you describe to 
happen any time soon -- at least for interactive, shared, immersive 
spaces; non-interactive, non-shared, non-immersive (like Google Earth) 
it's another matter. It's also fairly unrealistic to expect those kinds 
of optimizations to happen spontaneously and for free. There needs to be 
a lot of money thrown in for those things to be prototyped and 
experimented with -- research money, for starters; that's the kind of 
thing that will keep a lot of graduate students busy for the next few years.

On 7/6/2010 6:54 PM, Mark Malewski wrote:
&gt;<i> OpenSim/RealXtend,
</I>&gt;<i>
</I>&gt;<i> Another thought is the issue of &quot;scalability&quot; with the current OpenSim 
</I>&gt;<i> and/or realXtend Architecture.
</I>&gt;<i>
</I>&gt;<i> Running hundreds (or thousands) of IDLE regions require too many 
</I>&gt;<i> system resources (RAM, CPU cycles, etc.)
</I>&gt;<i>
</I>&gt;<i> I believe that the basic server core (OpenSim) should eventually be 
</I>&gt;<i> modified so that ALL regions should have a configurable &quot;timeout&quot; 
</I>&gt;<i> option field (in the regions.ini file).
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://opensimulator.org/wiki/Configuring_Regions">http://opensimulator.org/wiki/Configuring_Regions</A>
</I>&gt;<i>
</I>&gt;<i> That way an idle &quot;region timeout&quot; can be set (on a region per region 
</I>&gt;<i> basis), and this would allow the OpenSim server to shut down idle 
</I>&gt;<i> regions (based on the &quot;idle timeout&quot; configured in the regions.ini file).
</I>&gt;<i>
</I>&gt;<i> So if a region were completely empty for a particular number of 
</I>&gt;<i> minutes (let's say a region were empty and idle for 5 minutes, then 
</I>&gt;<i> the idle region could be shut down automatically after the set &quot;idle 
</I>&gt;<i> timeout&quot; period for that particular region).
</I>&gt;<i>
</I>&gt;<i> This way idle (and empty) regions are not consuming valuable system 
</I>&gt;<i> resources.
</I>&gt;<i>
</I>&gt;<i> Then as a user attempts to &quot;teleport&quot; to an idle (empty) region, the 
</I>&gt;<i> server would simply start that idle region (on-the-fly) so that the 
</I>&gt;<i> user could teleport into the idle region.
</I>&gt;<i>
</I>&gt;<i> It may create a little bit of a slight &quot;pause&quot; (as an idle region is 
</I>&gt;<i> started) while teleporting, but you normally experience a pause 
</I>&gt;<i> anyways while teleporting, so a few additional two or three seconds 
</I>&gt;<i> shouldn't make that much of a difference when teleporting to an empty 
</I>&gt;<i> or idle region.
</I>&gt;<i>
</I>&gt;<i> A second improvement upon this, would be a &quot;smart idle regions&quot; grid 
</I>&gt;<i> option (configurable at the grid and/or region level).  The &quot;smart 
</I>&gt;<i> idle regions&quot; grid option would take things one step further, and 
</I>&gt;<i> would automatically allow the configuration option to bring nearby 
</I>&gt;<i> idle regions out of &quot;sleep&quot; mode, and start them automatically (if an 
</I>&gt;<i> avatar is within a certain number of meters from a nearby neighboring 
</I>&gt;<i> region).
</I>&gt;<i>
</I>&gt;<i> For example this number could be configurable at the Grid and/or 
</I>&gt;<i> region level to be anything from 1 meter, to 100 meters, or even 256 
</I>&gt;<i> meters (thus automatically loading the idle region to the North, the 
</I>&gt;<i> idle region to the South, the idle region to the East and the idle 
</I>&gt;<i> region to the West). So that nearby regions could be loaded (as an 
</I>&gt;<i> avatar gets close to the border of another nearby region).
</I>&gt;<i>
</I>&gt;<i> This way if avatars are using high speed vehicles (aircraft, boats, 
</I>&gt;<i> trains, etc.) and they are getting close to a region crossing (to 
</I>&gt;<i> another region that may be idle) that region could automatically be 
</I>&gt;<i> started (if &quot;smart regions&quot; was enabled), thus making the region 
</I>&gt;<i> crossing seamless (and in real-time).  So that flight simulators and 
</I>&gt;<i> ship simulators could be developed (with large global high resolution 
</I>&gt;<i> land region maps of the whole world) that could easily be stored on 
</I>&gt;<i> any single server.  (The idle regions would simply load &quot;on-demand&quot; as 
</I>&gt;<i> needed).
</I>&gt;<i>
</I>&gt;<i> This way OpenSim core could be used for Science, Educational, 
</I>&gt;<i> Flight/Train/Ship simulation or even gaming purposes.
</I>&gt;<i>
</I>&gt;<i> So that way an OpenSim/realXtend server could technically store 
</I>&gt;<i> thousands of regions all on a single server instance (possibly even 
</I>&gt;<i> 50-60GB's of high resolution GIS/terrain/region maps of the whole world).
</I>&gt;<i>
</I>&gt;<i> So that things like high resolution &quot;Global Scenery&quot; could be created 
</I>&gt;<i> (and downloaded) under a &quot;Creative Commons&quot; license for high 
</I>&gt;<i> resolution scenery (stored in Mega regions) for OpenSim.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.global-scenery.org/">http://www.global-scenery.org/</A>
</I>&gt;<i>
</I>&gt;<i> I do have a military GIS (Imagery Analysis/Intelligence) background, 
</I>&gt;<i> and don't mind working on things like basic high resolution 
</I>&gt;<i> OpenSim/realXtend region content creation (empty regions based on high 
</I>&gt;<i> resolution GIS/DTED data).  DTED data could be used to create 
</I>&gt;<i> elevation maps, and high resolution imagery could be used for terrain 
</I>&gt;<i> textures.
</I>&gt;<i>
</I>&gt;<i> I believe an OpenSim GIS project would be a very good &quot;basis&quot; for 
</I>&gt;<i> other projects (educational, gaming, city planning, development, 
</I>&gt;<i> architectural development and multi-person Flight/Train/Ship 
</I>&gt;<i> simulation &amp; training development) since terrain/region modules would 
</I>&gt;<i> be available free for download.
</I>&gt;<i>
</I>&gt;<i> The reason &quot;Smart Regions&quot; (idle region timeouts) would be necessary, 
</I>&gt;<i> is so things like modeling rural areas like &quot;Yellowstone&quot; National 
</I>&gt;<i> Park could easily be possible on a small single server (or even a 
</I>&gt;<i> small single workstation running a single OpenSim/osgrid/realXtend 
</I>&gt;<i> server instance), since the majority of those regions would usually 
</I>&gt;<i> remain idle/empty (and with the idle regions shutting down they would 
</I>&gt;<i> consume NO CPU clock cycles or RAM, thus making &quot;idle&quot; regions 
</I>&gt;<i> identical to idle web pages that take up nothing more than hard drive 
</I>&gt;<i> space).
</I>&gt;<i>
</I>&gt;<i> Certain regions (like a lobby, main Plaza, or high-traffic regions) 
</I>&gt;<i> would need to remain active (no idle timeout) and would simply have a 
</I>&gt;<i> idle timeout value of &quot;9999&quot;.  (Which would equate to requiring the 
</I>&gt;<i> region to be completely idle and empty for a minimum of 9999 minutes, 
</I>&gt;<i> or about 7 days) before going into a &quot;sleep&quot; or idle &quot;shutdown&quot; mode.
</I>&gt;<i>
</I>&gt;<i> I supposed a timeout value of &quot;0000&quot; could also be used for an 
</I>&gt;<i> &quot;infinite&quot; time (no idle timeout or idle shut down) so that regions 
</I>&gt;<i> that want to remain up (forever) with no idle timeout period or idle 
</I>&gt;<i> shutdown could thus stay running all the time (consuming valuable RAM, 
</I>&gt;<i> CPU and system resources).
</I>&gt;<i>
</I>&gt;<i> But as we begin to look at global region mapping and developing large 
</I>&gt;<i> regions (especially from a GIS perspective) then we need to look at 
</I>&gt;<i> the &quot;flaws&quot; in the current OpenSim server design architecture, and see 
</I>&gt;<i> that it would simply not be possible to create something like a 
</I>&gt;<i> virtual 3D world (on a 1:1 virtual/GIS scale) without having billions 
</I>&gt;<i> of physical servers (and trillions of dollars for physical hardware, 
</I>&gt;<i> let alone the costs of electricity and hardware just to even run a 
</I>&gt;<i> single instance).  It seems to be a major flaw in the basic design 
</I>&gt;<i> architecture to require the &quot;always-on&quot; concept of regions without 
</I>&gt;<i> having a region &quot;idle-timeout&quot; feature.
</I>&gt;<i>
</I>&gt;<i> Wasting RAM and CPU clock cycles on empty/idle regions (without having 
</I>&gt;<i> an &quot;idle timeout&quot; option would seem like a huge waste of energy, and 
</I>&gt;<i> system resources, especially when those valuable system resources 
</I>&gt;<i> could be better spent on active regions with physical avatars that 
</I>&gt;<i> require the additional processing power and RAM that could be freed up 
</I>&gt;<i> by shutting down any idle regions (after a specified &quot;time out&quot; period).
</I>&gt;<i>
</I>&gt;<i> Since the majority of the regions would remain empty and idle on a 
</I>&gt;<i> server (similar to static web pages that are not being accessed or 
</I>&gt;<i> viewed on a web server), it seems extremely foolish to waste such 
</I>&gt;<i> valuable system resources (such as server CPU clock cycles and server 
</I>&gt;<i> RAM, let alone the energy/power) wasted on idle regions that remain 
</I>&gt;<i> empty and idle (but must be loaded as &quot;always on&quot;).
</I>&gt;<i>
</I>&gt;<i> Having an &quot;on-the-fly&quot; system that will shut down idle regions (based 
</I>&gt;<i> on their configurable regions.ini &quot;time out&quot; value in the regions.ini 
</I>&gt;<i> file, and automatically load idle regions &quot;on-the-fly&quot; would be much 
</I>&gt;<i> closer to the way the current web is designed, so that servers can 
</I>&gt;<i> hold thousands (possibly even millions) of web pages that consume no 
</I>&gt;<i> system resources (other than physical hard drive space) unless the web 
</I>&gt;<i> pages are being viewed.
</I>&gt;<i>
</I>&gt;<i> By allowing regions to startup/shutdown dynamically (with a &quot;region 
</I>&gt;<i> timeout&quot; feature) thus making servers able to hold infinite amounts of 
</I>&gt;<i> idle regions/land (only limited by the amount of hard drive/disk 
</I>&gt;<i> storage space, which could easily be expanded via RAID or SAN devices).
</I>&gt;<i>
</I>&gt;<i> System Administrators could put &quot;heavy load&quot; regions on separate 
</I>&gt;<i> dedicated servers, while keeping other &quot;idle load&quot; regions all on the 
</I>&gt;<i> same server (for regions that are generally idle and not visited very 
</I>&gt;<i> frequently).
</I>&gt;<i>
</I>&gt;<i> As we evolve and slowly get into simulation systems, such as aircraft, 
</I>&gt;<i> train or ship simulators I can see how having large numbers of &quot;idle&quot; 
</I>&gt;<i> regions would be a requirement for realistic train/ship/aircraft 
</I>&gt;<i> simulation and gaming (as well as GIS and global flight) and how it 
</I>&gt;<i> simply would not even be possible to have millions of regions running 
</I>&gt;<i> all on a single server (due to the current &quot;architectural&quot; problems 
</I>&gt;<i> with OpenSim).
</I>&gt;<i>
</I>&gt;<i> It just wouldn't even be possible to even create a simple flight, 
</I>&gt;<i> train or ship simulator using OpenSim (because OpenSim couldn't even 
</I>&gt;<i> store the image/region scenery maps).
</I>&gt;<i>
</I>&gt;<i> Yet, a small simple &quot;X-Plane&quot; flight simulator can store high 
</I>&gt;<i> resolution &quot;global scenery&quot; data for the WHOLE world on just 6 or 7 
</I>&gt;<i> double layer DVD's (about 60+ GB of terrain data) all on a single 
</I>&gt;<i> workstation.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.global-scenery.org/">http://www.global-scenery.org/</A>
</I>&gt;<i>
</I>&gt;<i> I don't mind starting a Global-Scenery package for OpenSim/realXtend 
</I>&gt;<i> and I do think it would be extremely nice to offer the community high 
</I>&gt;<i> resolution realistic regions (free of charge under a &quot;creative 
</I>&gt;<i> commons&quot; license).
</I>&gt;<i>
</I>&gt;<i> The problem with even starting a large content creation project, is 
</I>&gt;<i> that the current OpenSim architecture is unable to even use it.
</I>&gt;<i>
</I>&gt;<i> It would be a complete waste of time and effort to have realistic 
</I>&gt;<i> global high resolution terrain regions available for OpenSim to use 
</I>&gt;<i> for Flight/Train/Ship (as well as Education &amp; Science) simulation but 
</I>&gt;<i> the whole idea of a large scale GIS/terrain project for 
</I>&gt;<i> OpenSim/realXtend seems somewhat pointless since the current 
</I>&gt;<i> realXtend/OpenSim server architecture is not designed to currently 
</I>&gt;<i> even use/store thousands (or even millions) of idle regions (and the 
</I>&gt;<i> current server architecture of keeping ALL idle regions running is 
</I>&gt;<i> &quot;flawed&quot; by architectural design).
</I>&gt;<i>
</I>&gt;<i> It would seem to make much more sense (from an engineering standpoint) 
</I>&gt;<i> to have the option to shut any idle regions down, and only leave 
</I>&gt;<i> active regions running (or at least give users/operators/grid owners 
</I>&gt;<i> the ability to configure regions &amp; a grid to allow for idle region 
</I>&gt;<i> timeouts).  I believe this &quot;region idle time out&quot; time should be 
</I>&gt;<i> configured in the regions.ini configuration file.  With an option of 
</I>&gt;<i> &quot;9999&quot; for a 7 day idle timeout and a &quot;0000&quot; option to disable the 
</I>&gt;<i> idle timeout for a particular region (for regions that don't ever want 
</I>&gt;<i> to shut down due to an idle timeout).
</I>&gt;<i>
</I>&gt;<i> It would make sense to see OpenSim/realXtend support a &quot;smart region&quot; 
</I>&gt;<i> type of system which servers would/could be configured to shut idle 
</I>&gt;<i> regions down by default (configurable in the regions.ini file for each 
</I>&gt;<i> region) and the server could load idle regions &quot;On-The-Fly&quot; freeing up 
</I>&gt;<i> valuable system resources on a physical server.
</I>&gt;<i>
</I>&gt;<i> By implementing &quot;smart regions&quot; into the OpenSim core, a high 
</I>&gt;<i> resolution global GIS/terrain project would seem like a viable project 
</I>&gt;<i> to start (and I wouldn't mind starting such a project) especially for 
</I>&gt;<i> future science/flight/ship/train simulation.  I could probably find 
</I>&gt;<i> other universities (and sponsors) that would be willing to host mirror 
</I>&gt;<i> copies of the empty raw .OAR global terrain region files.  So that 
</I>&gt;<i> other developers, educators or users could freely download high 
</I>&gt;<i> resolution realistic region terrains (for educational, gaming or 
</I>&gt;<i> simulation purposes).
</I>&gt;<i>
</I>&gt;<i> If OpenSim was able to shut down idle regions on the fly, then it 
</I>&gt;<i> could be used for flight simulation, terrain simulation, or even 
</I>&gt;<i> realistic game simulation (could have large high resolution realistic 
</I>&gt;<i> global terrain maps).
</I>&gt;<i>
</I>&gt;<i> I don't mind starting/doing free &quot;creative commons&quot; (attribution by) 
</I>&gt;<i> based global GIS/terrain content creation work for the 
</I>&gt;<i> OpenSim/realXtend community, but the current problem that I see is 
</I>&gt;<i> that the current OpenSim architecture design would NEVER even be able 
</I>&gt;<i> to support such a feature (since the current server architecture would 
</I>&gt;<i> require thousands, or millions or possibly even billions of OpenSim 
</I>&gt;<i> servers just to handle ONE single copy of &quot;the world&quot; terrain in 
</I>&gt;<i> high-res region data.
</I>&gt;<i>
</I>&gt;<i> Thus making it completely impossible to ever &quot;sail a ship&quot; or &quot;fly an 
</I>&gt;<i> aircraft&quot; around the world on a standalone OpenSim server.
</I>&gt;<i>
</I>&gt;<i> I believe the basics of good simulation programs starts with high 
</I>&gt;<i> resolution image maps (and scenery data).  A flight simulation program 
</I>&gt;<i> is fairly useless without realistic global imagery.
</I>&gt;<i>
</I>&gt;<i> Although the basic default high resolution terrain/region data would 
</I>&gt;<i> probably only consume about 50-60 GB's of storage space (empty terrain 
</I>&gt;<i> regions stored in &quot;mega region&quot; OAR format), it would still be 
</I>&gt;<i> impossible to even store or use the terrain region data on a single 
</I>&gt;<i> OpenSim server (since an OpenSim server would require that all the 
</I>&gt;<i> regions be running at the same time, with no way to load/unload the 
</I>&gt;<i> regions (on-the-fly) as they are accessed or needed.  We would need to 
</I>&gt;<i> have an &quot;idle time-out&quot; feature and also a &quot;load-on-demand&quot; feature to 
</I>&gt;<i> load regions and shut down idle regions based on a region &quot;idle 
</I>&gt;<i> time-out&quot; system (and to load nearby regions, and load regions that 
</I>&gt;<i> users attempt to teleport to).
</I>&gt;<i>
</I>&gt;<i> I apologize for sounding repetitive.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>    
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20100707/cf12d32b/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20100707/cf12d32b/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008926.html">[Opensim-dev] Feature Request: Smart Regions - Idle	Region	Timeouts and &quot;On The Fly&quot; loading/unloading of	inactive idle regions
</A></li>
	<LI>Next message: <A HREF="008928.html">[Opensim-dev] Feature Request: Smart Regions - Idle Region	Timeouts and &quot;On The Fly&quot; loading/unloading of inactive idle regions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8927">[ date ]</a>
              <a href="thread.html#8927">[ thread ]</a>
              <a href="subject.html#8927">[ subject ]</a>
              <a href="author.html#8927">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
