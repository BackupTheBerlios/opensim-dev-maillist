<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts	and &quot;On The Fly&quot; loading/unloading of inactive idle regions
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Feature%20Request%3A%20Smart%20Regions%20-%20Idle%20Region%20Timeouts%0A%09and%20%22On%20The%20Fly%22%20loading/unloading%20of%20inactive%20idle%20regions&In-Reply-To=%3CAANLkTilv-taPlR0ScqPPeXoz_8eharR4YXVcXNC5pyNW%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008921.html">
   <LINK REL="Next"  HREF="008924.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts	and &quot;On The Fly&quot; loading/unloading of inactive idle regions</H1>
    <B>Mark Malewski</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Feature%20Request%3A%20Smart%20Regions%20-%20Idle%20Region%20Timeouts%0A%09and%20%22On%20The%20Fly%22%20loading/unloading%20of%20inactive%20idle%20regions&In-Reply-To=%3CAANLkTilv-taPlR0ScqPPeXoz_8eharR4YXVcXNC5pyNW%40mail.gmail.com%3E"
       TITLE="[Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts	and &quot;On The Fly&quot; loading/unloading of inactive idle regions">mark.malewski at gmail.com
       </A><BR>
    <I>Wed Jul  7 03:57:29 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="008921.html">[Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts	and &quot;On The Fly&quot; loading/unloading of inactive idle regions
</A></li>
        <LI>Next message: <A HREF="008924.html">[Opensim-dev] Feature Request: Smart Regions - Idle Region	Timeouts and &quot;On The Fly&quot; loading/unloading of inactive idle regions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8922">[ date ]</a>
              <a href="thread.html#8922">[ thread ]</a>
              <a href="subject.html#8922">[ subject ]</a>
              <a href="author.html#8922">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> OpenSim/RealXtend,
</I>&gt;<i>
</I>&gt;<i> Another thought is the issue of &quot;scalability&quot; with the current OpenSim
</I>&gt;<i> and/or realXtend Architecture.
</I>&gt;<i>
</I>&gt;<i> Running hundreds (or thousands) of IDLE regions require too many system
</I>&gt;<i> resources (RAM, CPU cycles, etc.)
</I>&gt;<i>
</I>&gt;<i> I believe that the basic server core (OpenSim) should eventually be
</I>&gt;<i> modified so that ALL regions should have a configurable &quot;timeout&quot; option
</I>&gt;<i> field (in the regions.ini file).
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://opensimulator.org/wiki/Configuring_Regions">http://opensimulator.org/wiki/Configuring_Regions</A>
</I>&gt;<i>
</I>&gt;<i> That way an idle &quot;region timeout&quot; can be set (on a region per region
</I>&gt;<i> basis), and this would allow the OpenSim server to shut down idle regions
</I>&gt;<i> (based on the &quot;idle timeout&quot; configured in the regions.ini file).
</I>&gt;<i>
</I>&gt;<i> So if a region were completely empty for a particular number of minutes
</I>&gt;<i> (let's say a region were empty and idle for 5 minutes, then the idle region
</I>&gt;<i> could be shut down automatically after the set &quot;idle timeout&quot; period for
</I>&gt;<i> that particular region).
</I>&gt;<i>
</I>&gt;<i> This way idle (and empty) regions are not consuming valuable system
</I>&gt;<i> resources.
</I>&gt;<i>
</I>&gt;<i> Then as a user attempts to &quot;teleport&quot; to an idle (empty) region, the server
</I>&gt;<i> would simply start that idle region (on-the-fly) so that the user could
</I>&gt;<i> teleport into the idle region.
</I>&gt;<i>
</I>&gt;<i> It may create a little bit of a slight &quot;pause&quot; (as an idle region is
</I>&gt;<i> started) while teleporting, but you normally experience a pause anyways
</I>&gt;<i> while teleporting, so a few additional two or three seconds shouldn't make
</I>&gt;<i> that much of a difference when teleporting to an empty or idle region.
</I>&gt;<i>
</I>&gt;<i> A second improvement upon this, would be a &quot;smart idle regions&quot; grid option
</I>&gt;<i> (configurable at the grid and/or region level).  The &quot;smart idle regions&quot;
</I>&gt;<i> grid option would take things one step further, and would automatically
</I>&gt;<i> allow the configuration option to bring nearby idle regions out of &quot;sleep&quot;
</I>&gt;<i> mode, and start them automatically (if an avatar is within a certain number
</I>&gt;<i> of meters from a nearby neighboring region).
</I>&gt;<i>
</I>&gt;<i> For example this number could be configurable at the Grid and/or region
</I>&gt;<i> level to be anything from 1 meter, to 100 meters, or even 256 meters (thus
</I>&gt;<i> automatically loading the idle region to the North, the idle region to the
</I>&gt;<i> South, the idle region to the East and the idle region to the West). So that
</I>&gt;<i> nearby regions could be loaded (as an avatar gets close to the border of
</I>&gt;<i> another nearby region).
</I>&gt;<i>
</I>&gt;<i> This way if avatars are using high speed vehicles (aircraft, boats, trains,
</I>&gt;<i> etc.) and they are getting close to a region crossing (to another region
</I>&gt;<i> that may be idle) that region could automatically be started (if &quot;smart
</I>&gt;<i> regions&quot; was enabled), thus making the region crossing seamless (and in
</I>&gt;<i> real-time).  So that flight simulators and ship simulators could be
</I>&gt;<i> developed (with large global high resolution land region maps of the whole
</I>&gt;<i> world) that could easily be stored on any single server.  (The idle regions
</I>&gt;<i> would simply load &quot;on-demand&quot; as needed).
</I>&gt;<i>
</I>&gt;<i> This way OpenSim core could be used for Science, Educational,
</I>&gt;<i> Flight/Train/Ship simulation or even gaming purposes.
</I>&gt;<i>
</I>&gt;<i> So that way an OpenSim/realXtend server could technically store thousands
</I>&gt;<i> of regions all on a single server instance (possibly even 50-60GB's of high
</I>&gt;<i> resolution GIS/terrain/region maps of the whole world).
</I>&gt;<i>
</I>&gt;<i> So that things like high resolution &quot;Global Scenery&quot; could be created (and
</I>&gt;<i> downloaded) under a &quot;Creative Commons&quot; license for high resolution scenery
</I>&gt;<i> (stored in Mega regions) for OpenSim.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.global-scenery.org/">http://www.global-scenery.org/</A>
</I>&gt;<i>
</I>&gt;<i> I do have a military GIS (Imagery Analysis/Intelligence) background, and
</I>&gt;<i> don't mind working on things like basic high resolution OpenSim/realXtend
</I>&gt;<i> region content creation (empty regions based on high resolution GIS/DTED
</I>&gt;<i> data).  DTED data could be used to create elevation maps, and high
</I>&gt;<i> resolution imagery could be used for terrain textures.
</I>&gt;<i>
</I>&gt;<i> I believe an OpenSim GIS project would be a very good &quot;basis&quot; for other
</I>&gt;<i> projects (educational, gaming, city planning, development, architectural
</I>&gt;<i> development and multi-person Flight/Train/Ship simulation &amp; training
</I>&gt;<i> development) since terrain/region modules would be available free for
</I>&gt;<i> download.
</I>&gt;<i>
</I>&gt;<i> The reason &quot;Smart Regions&quot; (idle region timeouts) would be necessary, is so
</I>&gt;<i> things like modeling rural areas like &quot;Yellowstone&quot; National Park could
</I>&gt;<i> easily be possible on a small single server (or even a small single
</I>&gt;<i> workstation running a single OpenSim/osgrid/realXtend server instance),
</I>&gt;<i> since the majority of those regions would usually remain idle/empty (and
</I>&gt;<i> with the idle regions shutting down they would consume NO CPU clock cycles
</I>&gt;<i> or RAM, thus making &quot;idle&quot; regions identical to idle web pages that take up
</I>&gt;<i> nothing more than hard drive space).
</I>&gt;<i>
</I>&gt;<i> Certain regions (like a lobby, main Plaza, or high-traffic regions) would
</I>&gt;<i> need to remain active (no idle timeout) and would simply have a idle timeout
</I>&gt;<i> value of &quot;9999&quot;.  (Which would equate to requiring the region to be
</I>&gt;<i> completely idle and empty for a minimum of 9999 minutes, or about 7 days)
</I>&gt;<i> before going into a &quot;sleep&quot; or idle &quot;shutdown&quot; mode.
</I>&gt;<i>
</I>&gt;<i> I supposed a timeout value of &quot;0000&quot; could also be used for an &quot;infinite&quot;
</I>&gt;<i> time (no idle timeout or idle shut down) so that regions that want to remain
</I>&gt;<i> up (forever) with no idle timeout period or idle shutdown could thus stay
</I>&gt;<i> running all the time (consuming valuable RAM, CPU and system resources).
</I>&gt;<i>
</I>&gt;<i> But as we begin to look at global region mapping and developing large
</I>&gt;<i> regions (especially from a GIS perspective) then we need to look at the
</I>&gt;<i> &quot;flaws&quot; in the current OpenSim server design architecture, and see that it
</I>&gt;<i> would simply not be possible to create something like a virtual 3D world (on
</I>&gt;<i> a 1:1 virtual/GIS scale) without having billions of physical servers (and
</I>&gt;<i> trillions of dollars for physical hardware, let alone the costs of
</I>&gt;<i> electricity and hardware just to even run a single instance).  It seems to
</I>&gt;<i> be a major flaw in the basic design architecture to require the &quot;always-on&quot;
</I>&gt;<i> concept of regions without having a region &quot;idle-timeout&quot; feature.
</I>&gt;<i>
</I>&gt;<i> Wasting RAM and CPU clock cycles on empty/idle regions (without having an
</I>&gt;<i> &quot;idle timeout&quot; option would seem like a huge waste of energy, and system
</I>&gt;<i> resources, especially when those valuable system resources could be better
</I>&gt;<i> spent on active regions with physical avatars that require the additional
</I>&gt;<i> processing power and RAM that could be freed up by shutting down any idle
</I>&gt;<i> regions (after a specified &quot;time out&quot; period).
</I>&gt;<i>
</I>&gt;<i> Since the majority of the regions would remain empty and idle on a server
</I>&gt;<i> (similar to static web pages that are not being accessed or viewed on a web
</I>&gt;<i> server), it seems extremely foolish to waste such valuable system resources
</I>&gt;<i> (such as server CPU clock cycles and server RAM, let alone the energy/power)
</I>&gt;<i> wasted on idle regions that remain empty and idle (but must be loaded as
</I>&gt;<i> &quot;always on&quot;).
</I>&gt;<i>
</I>&gt;<i> Having an &quot;on-the-fly&quot; system that will shut down idle regions (based on
</I>&gt;<i> their configurable regions.ini &quot;time out&quot; value in the regions.ini file, and
</I>&gt;<i> automatically load idle regions &quot;on-the-fly&quot; would be much closer to the way
</I>&gt;<i> the current web is designed, so that servers can hold thousands (possibly
</I>&gt;<i> even millions) of web pages that consume no system resources (other than
</I>&gt;<i> physical hard drive space) unless the web pages are being viewed.
</I>&gt;<i>
</I>&gt;<i> By allowing regions to startup/shutdown dynamically (with a &quot;region
</I>&gt;<i> timeout&quot; feature) thus making servers able to hold infinite amounts of idle
</I>&gt;<i> regions/land (only limited by the amount of hard drive/disk storage space,
</I>&gt;<i> which could easily be expanded via RAID or SAN devices).
</I>&gt;<i>
</I>&gt;<i> System Administrators could put &quot;heavy load&quot; regions on separate dedicated
</I>&gt;<i> servers, while keeping other &quot;idle load&quot; regions all on the same server (for
</I>&gt;<i> regions that are generally idle and not visited very frequently).
</I>&gt;<i>
</I>&gt;<i> As we evolve and slowly get into simulation systems, such as aircraft,
</I>&gt;<i> train or ship simulators I can see how having large numbers of &quot;idle&quot;
</I>&gt;<i> regions would be a requirement for realistic train/ship/aircraft simulation
</I>&gt;<i> and gaming (as well as GIS and global flight) and how it simply would not
</I>&gt;<i> even be possible to have millions of regions running all on a single server
</I>&gt;<i> (due to the current &quot;architectural&quot; problems with OpenSim).
</I>&gt;<i>
</I>&gt;<i> It just wouldn't even be possible to even create a simple flight, train or
</I>&gt;<i> ship simulator using OpenSim (because OpenSim couldn't even store the
</I>&gt;<i> image/region scenery maps).
</I>&gt;<i>
</I>&gt;<i> Yet, a small simple &quot;X-Plane&quot; flight simulator can store high resolution
</I>&gt;<i> &quot;global scenery&quot; data for the WHOLE world on just 6 or 7 double layer DVD's
</I>&gt;<i> (about 60+ GB of terrain data) all on a single workstation.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.global-scenery.org/">http://www.global-scenery.org/</A>
</I>&gt;<i>
</I>&gt;<i> I don't mind starting a Global-Scenery package for OpenSim/realXtend and I
</I>&gt;<i> do think it would be extremely nice to offer the community high resolution
</I>&gt;<i> realistic regions (free of charge under a &quot;creative commons&quot; license).
</I>&gt;<i>
</I>&gt;<i> The problem with even starting a large content creation project, is that
</I>&gt;<i> the current OpenSim architecture is unable to even use it.
</I>&gt;<i>
</I>&gt;<i> It would be a complete waste of time and effort to have realistic global
</I>&gt;<i> high resolution terrain regions available for OpenSim to use for
</I>&gt;<i> Flight/Train/Ship (as well as Education &amp; Science) simulation but the whole
</I>&gt;<i> idea of a large scale GIS/terrain project for OpenSim/realXtend seems
</I>&gt;<i> somewhat pointless since the current realXtend/OpenSim server architecture
</I>&gt;<i> is not designed to currently even use/store thousands (or even millions) of
</I>&gt;<i> idle regions (and the current server architecture of keeping ALL idle
</I>&gt;<i> regions running is &quot;flawed&quot; by architectural design).
</I>&gt;<i>
</I>&gt;<i> It would seem to make much more sense (from an engineering standpoint) to
</I>&gt;<i> have the option to shut any idle regions down, and only leave active regions
</I>&gt;<i> running (or at least give users/operators/grid owners the ability to
</I>&gt;<i> configure regions &amp; a grid to allow for idle region timeouts).  I believe
</I>&gt;<i> this &quot;region idle time out&quot; time should be configured in the regions.ini
</I>&gt;<i> configuration file.  With an option of &quot;9999&quot; for a 7 day idle timeout and a
</I>&gt;<i> &quot;0000&quot; option to disable the idle timeout for a particular region (for
</I>&gt;<i> regions that don't ever want to shut down due to an idle timeout).
</I>&gt;<i>
</I>&gt;<i> It would make sense to see OpenSim/realXtend support a &quot;smart region&quot; type
</I>&gt;<i> of system which servers would/could be configured to shut idle regions down
</I>&gt;<i> by default (configurable in the regions.ini file for each region) and the
</I>&gt;<i> server could load idle regions &quot;On-The-Fly&quot; freeing up valuable system
</I>&gt;<i> resources on a physical server.
</I>&gt;<i>
</I>&gt;<i> By implementing &quot;smart regions&quot; into the OpenSim core, a high resolution
</I>&gt;<i> global GIS/terrain project would seem like a viable project to start (and I
</I>&gt;<i> wouldn't mind starting such a project) especially for future
</I>&gt;<i> science/flight/ship/train simulation.  I could probably find other
</I>&gt;<i> universities (and sponsors) that would be willing to host mirror copies of
</I>&gt;<i> the empty raw .OAR global terrain region files.  So that other developers,
</I>&gt;<i> educators or users could freely download high resolution realistic region
</I>&gt;<i> terrains (for educational, gaming or simulation purposes).
</I>&gt;<i>
</I>&gt;<i> If OpenSim was able to shut down idle regions on the fly, then it could be
</I>&gt;<i> used for flight simulation, terrain simulation, or even realistic game
</I>&gt;<i> simulation (could have large high resolution realistic global terrain maps).
</I>&gt;<i>
</I>&gt;<i> I don't mind starting/doing free &quot;creative commons&quot; (attribution by) based
</I>&gt;<i> global GIS/terrain content creation work for the OpenSim/realXtend
</I>&gt;<i> community, but the current problem that I see is that the current OpenSim
</I>&gt;<i> architecture design would NEVER even be able to support such a feature
</I>&gt;<i> (since the current server architecture would require thousands, or millions
</I>&gt;<i> or possibly even billions of OpenSim servers just to handle ONE single copy
</I>&gt;<i> of &quot;the world&quot; terrain in high-res region data.
</I>&gt;<i>
</I>&gt;<i> Thus making it completely impossible to ever &quot;sail a ship&quot; or &quot;fly an
</I>&gt;<i> aircraft&quot; around the world on a standalone OpenSim server.
</I>&gt;<i>
</I>&gt;<i> I believe the basics of good simulation programs starts with high
</I>&gt;<i> resolution image maps (and scenery data).  A flight simulation program is
</I>&gt;<i> fairly useless without realistic global imagery.
</I>&gt;<i>
</I>&gt;<i> Although the basic default high resolution terrain/region data would
</I>&gt;<i> probably only consume about 50-60 GB's of storage space (empty terrain
</I>&gt;<i> regions stored in &quot;mega region&quot; OAR format), it would still be impossible to
</I>&gt;<i> even store or use the terrain region data on a single OpenSim server (since
</I>&gt;<i> an OpenSim server would require that all the regions be running at the same
</I>&gt;<i> time, with no way to load/unload the regions (on-the-fly) as they are
</I>&gt;<i> accessed or needed.  We would need to have an &quot;idle time-out&quot; feature and
</I>&gt;<i> also a &quot;load-on-demand&quot; feature to load regions and shut down idle regions
</I>&gt;<i> based on a region &quot;idle time-out&quot; system (and to load nearby regions, and
</I>&gt;<i> load regions that users attempt to teleport to).
</I>&gt;<i>
</I>&gt;<i> I apologize for sounding repetitive.
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20100706/f64e3839/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20100706/f64e3839/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008921.html">[Opensim-dev] Feature Request: Smart Regions - Idle Region Timeouts	and &quot;On The Fly&quot; loading/unloading of inactive idle regions
</A></li>
	<LI>Next message: <A HREF="008924.html">[Opensim-dev] Feature Request: Smart Regions - Idle Region	Timeouts and &quot;On The Fly&quot; loading/unloading of inactive idle regions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8922">[ date ]</a>
              <a href="thread.html#8922">[ thread ]</a>
              <a href="subject.html#8922">[ subject ]</a>
              <a href="author.html#8922">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
