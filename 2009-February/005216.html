<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Please do not revert fixes without careful	comtemplation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Please%20do%20not%20revert%20fixes%20without%20careful%0A%09comtemplation&In-Reply-To=%3Cb6e60b3c0902190359h28be6f46q9d11e219b39ea3ce%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005158.html">
   <LINK REL="Next"  HREF="005217.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Please do not revert fixes without careful	comtemplation</H1>
    <B>Antti Kokko</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Please%20do%20not%20revert%20fixes%20without%20careful%0A%09comtemplation&In-Reply-To=%3Cb6e60b3c0902190359h28be6f46q9d11e219b39ea3ce%40mail.gmail.com%3E"
       TITLE="[Opensim-dev] Please do not revert fixes without careful	comtemplation">aakokko at gmail.com
       </A><BR>
    <I>Thu Feb 19 12:59:19 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005158.html">[Opensim-dev] Please do not revert fixes without	careful	comtemplation
</A></li>
        <LI>Next message: <A HREF="005217.html">[Opensim-dev] Please do not revert fixes without	careful	comtemplation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5216">[ date ]</a>
              <a href="thread.html#5216">[ thread ]</a>
              <a href="subject.html#5216">[ subject ]</a>
              <a href="author.html#5216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I`d like to see the facts based on that assumption. I`ve worked with
NHibernate in web solutions for years and there hasn`t been any lack of
performance. I had a one year pause with Hibernate and it seems during it
there has been great development, nhibernate own cache etc.

If we assume that NHibernate is currently slower there is sure a plenty of
ways to get it faster. Indexing, caching, bulk fetches to mention few.

Best,

 - Antti

2009/2/18 Melanie &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">melanie at t-data.com</A>&gt;

&gt;<i> NHibernate has, in tests, been significantly slower than native
</I>&gt;<i> implementations.
</I>&gt;<i>
</I>&gt;<i> Melanie
</I>&gt;<i>
</I>&gt;<i> Antti Kokko wrote:
</I>&gt;<i> &gt; Trying to catch up but anyway what I think in general is that the whole
</I>&gt;<i> &gt; database schema is not the best in terms of coherence, associations etc.
</I>&gt;<i> For
</I>&gt;<i> &gt; me it seems that at first came all functionality and them came the
</I>&gt;<i> database
</I>&gt;<i> &gt; solutions. The structure feels is &quot;broken&quot; but I understand it because of
</I>&gt;<i> &gt; grid mode etc.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What I`d like to see is simply one db solution which covers mysql, mssql
</I>&gt;<i> and
</I>&gt;<i> &gt; sqlite and that is most propably NHibernate. Why do all the updates to
</I>&gt;<i> all
</I>&gt;<i> &gt; interface implementing classes instead of doing it only in one place. I
</I>&gt;<i> &gt; think this could save some serious time.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; However I try to get to the asset discussion:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; First of all I really like the way of Cable Beach and truly hope this all
</I>&gt;<i> is
</I>&gt;<i> &gt; going to distributed asset system. One of the biggest issues is cache,
</I>&gt;<i> &gt; external cache etc. If we have e.q. publisher who wants to update an
</I>&gt;<i> object
</I>&gt;<i> &gt; in Cable Beach which is already used in sim1 and sim2, how we send the
</I>&gt;<i> &gt; update to all caches? How I have understood it the current system is a
</I>&gt;<i> kind
</I>&gt;<i> &gt; of trade-off and actually new object is created instead of updating the
</I>&gt;<i> &gt; existing one. On the database side I`d definitely like to see not a new
</I>&gt;<i> &gt; object but an update. What I`ve heard the cache issues are long discussed
</I>&gt;<i> &gt; and not easy to resolve and we definitely need a further discussion about
</I>&gt;<i> &gt; along with Cable Beach or any distributed asset system. After all why I
</I>&gt;<i> &gt; couldn`t have an apache web server somewhere where my asset, avatar,
</I>&gt;<i> avatar
</I>&gt;<i> &gt; appearance are.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Having several asset storages distributed all over the web we need an
</I>&gt;<i> UUID
</I>&gt;<i> &gt; for the asset but we are going to need of course an URL as key too. That
</I>&gt;<i> is
</I>&gt;<i> &gt; definitely one issue.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Best,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   - Antti
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2009/2/17 Charles Krinke &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">cfk at pacbell.net</A>&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Dear Teravus:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; No problem. The key point I was trying to make is that as time goes on
</I>&gt;<i> we
</I>&gt;<i> &gt;&gt; seem to be increasing exponentially the storage requirements in the
</I>&gt;<i> UGAIM
</I>&gt;<i> &gt;&gt; assets table. The terrainImage entry was an example of of an 'asset'
</I>&gt;<i> that is
</I>&gt;<i> &gt;&gt; a little different in perception then say, a texture covering a face of
</I>&gt;<i> a
</I>&gt;<i> &gt;&gt; prim.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This example was intended for us to think about those 'assets' which can
</I>&gt;<i> be
</I>&gt;<i> &gt;&gt; pruned on a regular basis so that our ability from the UGAIM viewpoint
</I>&gt;<i> to
</I>&gt;<i> &gt;&gt; find and retrieve an asset in a timely manner does not get so long as to
</I>&gt;<i> &gt;&gt; make our sims performance degraded.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Charles
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; ------------------------------
</I>&gt;<i> &gt;&gt; *From:* Teravus Ovares &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">teravus at gmail.com</A>&gt;
</I>&gt;<i> &gt;&gt; *To:* <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; *Sent:* Tuesday, February 17, 2009 6:39:52 AM
</I>&gt;<i> &gt;&gt; *Subject:* Re: [Opensim-dev] Please do not revert fixes without careful
</I>&gt;<i> &gt;&gt; comtemplation
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I thought it prudent to point out that the following statement is 100%
</I>&gt;<i> &gt;&gt; fiction;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &quot; 2. We have a significant number of assets of each and every edit of
</I>&gt;<i> &gt;&gt; terrain, where only the very last one is accessible&quot;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; What I think you meant to say was,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &quot;2. Every two days each region generates a new map tile image and
</I>&gt;<i> &gt;&gt; names it terrainImage.  These do eventually add up&quot;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Best Regards
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Teravus
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Tue, Feb 17, 2009 at 9:31 AM, Stefan Andersson &lt;
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">stefan at tribalmedia.se</A>&gt;
</I>&gt;<i> &gt;&gt; wrote:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; 1. We have a significant number of assets whose name is &quot;blank&quot;
</I>&gt;<i> that
</I>&gt;<i> &gt;&gt; are
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; created with a default constructor. And I suspect are never
</I>&gt;<i> &gt;&gt; accessible.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; In fact, this field has always seemed redundant to me since the user
</I>&gt;<i> &gt;&gt; only
</I>&gt;<i> &gt;&gt; &gt;&gt; ever manipulates assets by their inventory
</I>&gt;<i> &gt;&gt; &gt;&gt; name, which is entirely separate from the asset name. The asset name
</I>&gt;<i> is
</I>&gt;<i> &gt;&gt; &gt;&gt; never visible to the user (and afaik is not
</I>&gt;<i> &gt;&gt; &gt;&gt; used anywhere else in the code).
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; At one point I thought about proposing to remove it. Possibly this
</I>&gt;<i> issue
</I>&gt;<i> &gt;&gt; &gt;&gt; should be revisited.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; I believe it's kept there just as a convenience - to be able to get
</I>&gt;<i> some
</I>&gt;<i> &gt;&gt; &gt; kind of semantics, not necessarily exact, when browsing the table.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; 2. We have a significant number of assets of each and every edit of
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; terrain, where only the very last one is accessible.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; Yes, this does seem wasteful to me since old terrain assets are not
</I>&gt;<i> used
</I>&gt;<i> &gt;&gt; &gt;&gt; by anything, afaik.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; I have proposed a number of times that we could have a virtual
</I>&gt;<i> asset_key
</I>&gt;<i> &gt;&gt; as
</I>&gt;<i> &gt;&gt; &gt; well as an asset_id - so that things that would rewrite assets could
</I>&gt;<i> use
</I>&gt;<i> &gt;&gt; the
</I>&gt;<i> &gt;&gt; &gt; asset_key as an aux method to actually try to overwrite the asset. In
</I>&gt;<i> the
</I>&gt;<i> &gt;&gt; &gt; terrain case, the asset would be overwritten by key, not by id. This
</I>&gt;<i> &gt;&gt; would
</I>&gt;<i> &gt;&gt; &gt; allow us to implement a number of parallell schemas where some assets
</I>&gt;<i> &gt;&gt; would
</I>&gt;<i> &gt;&gt; &gt; be overwritten (asset_key = asset_id) and some where we would keep a
</I>&gt;<i> &gt;&gt; history
</I>&gt;<i> &gt;&gt; &gt; (only asset_key) and some where doing either or would be configurable.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; 3. We have a significant number of assets of each and every text
</I>&gt;<i> edit
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; for each and every textual assets. Where only the last one should
</I>&gt;<i> be
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; accessible.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; Unfortunately, this is not the case. For instance, imagine that you
</I>&gt;<i> &gt;&gt; create
</I>&gt;<i> &gt;&gt; &gt;&gt; a script in your inventory. You drag this
</I>&gt;<i> &gt;&gt; &gt;&gt; script into a region object. At this point, both the entry in your
</I>&gt;<i> &gt;&gt; &gt;&gt; inventory and the entry in the region point to the
</I>&gt;<i> &gt;&gt; &gt;&gt; same textual asset.
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; But then you edit the script in your inventory. After the edit it
</I>&gt;<i> points
</I>&gt;<i> &gt;&gt; &gt;&gt; to a new asset containing the edited text.
</I>&gt;<i> &gt;&gt; &gt;&gt; However, the region object is still pointing to the old script asset.
</I>&gt;<i> So
</I>&gt;<i> &gt;&gt; &gt;&gt; we need to keep both the old and new textual
</I>&gt;<i> &gt;&gt; &gt;&gt; assets.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Not to mention the fact that the viewer caches stuff.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; However, you're right in that textual assets which are never used
</I>&gt;<i> &gt;&gt; &gt;&gt; elsewhere (i.e. are intermediate edits that never get
</I>&gt;<i> &gt;&gt; &gt;&gt; dragged into an object, given to someone else, or otherwise
</I>&gt;<i> transmitted)
</I>&gt;<i> &gt;&gt; &gt;&gt; might possibly be eliminated with some
</I>&gt;<i> &gt;&gt; &gt;&gt; sufficiently careful scheme.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Binary de-duplication and added semantics in the form of 'key' or
</I>&gt;<i> 'class'
</I>&gt;<i> &gt;&gt; &gt; would probably go a long way.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; Its a bit like collecting every scrap of paper ever written with
</I>&gt;<i> &gt;&gt; either
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; text or binary glyphs and putting them in a big filing cabinet.
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; After a while, finding the ones that are &quot;interesting&quot; in a
</I>&gt;<i> &quot;timely&quot;
</I>&gt;<i> &gt;&gt; &gt;&gt; &gt; manner starts to get a little &quot;challenging&quot;.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Let's keep the shining torch of this discussion burning.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; /Stefan
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Opensim-dev mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Opensim-dev mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/opensim-dev/attachments/20090219/c715fbe1/attachment.html">https://lists.berlios.de/pipermail/opensim-dev/attachments/20090219/c715fbe1/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005158.html">[Opensim-dev] Please do not revert fixes without	careful	comtemplation
</A></li>
	<LI>Next message: <A HREF="005217.html">[Opensim-dev] Please do not revert fixes without	careful	comtemplation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5216">[ date ]</a>
              <a href="thread.html#5216">[ thread ]</a>
              <a href="subject.html#5216">[ subject ]</a>
              <a href="author.html#5216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
