<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] Please do not revert fixes	without	careful	comtemplation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Please%20do%20not%20revert%20fixes%0A%09without%09careful%09comtemplation&In-Reply-To=%3C49995FC8.8090905%40t-data.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005101.html">
   <LINK REL="Next"  HREF="005095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] Please do not revert fixes	without	careful	comtemplation</H1>
    <B>Melanie</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20Please%20do%20not%20revert%20fixes%0A%09without%09careful%09comtemplation&In-Reply-To=%3C49995FC8.8090905%40t-data.com%3E"
       TITLE="[Opensim-dev] Please do not revert fixes	without	careful	comtemplation">melanie at t-data.com
       </A><BR>
    <I>Mon Feb 16 13:44:56 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005101.html">[Opensim-dev] Please do not revert fixes without careful	comtemplation
</A></li>
        <LI>Next message: <A HREF="005095.html">[Opensim-dev] Please do not revert	fixes	without	careful	comtemplation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5093">[ date ]</a>
              <a href="thread.html#5093">[ thread ]</a>
              <a href="subject.html#5093">[ subject ]</a>
              <a href="author.html#5093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Again, I'd like to stress that I believe this is too dangerous to do 
for anything other than textures.
It is also not really needed for things other than textures, since 
the other assets are comparatively small, textural data.

I would not want to risk even the smallest chance of a hash 
collision on script source.

Melanie

Stefan Andersson wrote:
&gt;<i> Coming in a bit from the side here,
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> we have, for some time, discussed to separate out the binary blog out of the metadata for an entirely different reason, namely to be able to weed out binary duplicates.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> If there was a way for us to separate out the binary parts, into something like 'binaryassetId, hashData[256], binarydata' and then just have the asset table referencing that row, I think it would help a lot.
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> I realize it's a separate discussion, just chipping in my two cents.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Best regards,
</I>&gt;<i> Stefan Andersson
</I>&gt;<i> Tribal Media AB
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Date: Sat, 14 Feb 2009 17:49:22 +0200
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">tommi.s.e.laukkanen at gmail.com</A>
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">mmazur at gmail.com</A>
</I>&gt;<i> CC: <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">opensim-dev at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [Opensim-dev] Please do not revert fixes without careful comtemplation
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i>  
</I>&gt;<i> On second though we could keep the current structure and expose all fields also through AssetBase properties. Then we could save / load the AssetBase with nhibernate as a single object and leave out the Metadata  property from NHibernate mapping. Does this sound good?
</I>&gt;<i>  
</I>&gt;<i> regards,
</I>&gt;<i> Tommi
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Sat, Feb 14, 2009 at 5:06 PM, Mike Mazur &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">mmazur at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> On Sat, Feb 14, 2009 at 4:05 PM, Tommi Laukkanen
</I>&gt;<i> 
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">tommi.s.e.laukkanen at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> I was talking with mikkopa and he suggested we should create two tables to
</I>&gt;&gt;<i> cover AssetBase to solve this issue properly. Namely AssetMetadata for
</I>&gt;&gt;<i> metadata information and AssetData for blobs to avoid situation where we end
</I>&gt;&gt;<i> up accessing also the blob data just to read metadata.
</I>&gt;<i> 
</I>&gt;<i> I was hoping not to have to do that.
</I>&gt;<i> 
</I>&gt;<i> It should be straightforward to support the current
</I>&gt;<i> AssetBase/AssetMetadata composition in the existing OpenSim data
</I>&gt;<i> layers, but as sdague warned me earlier, by mapping multiple classes
</I>&gt;<i> to one table I was entering a world of pain. Seems that's exactly
</I>&gt;<i> what's happening with NHibernate.
</I>&gt;<i> 
</I>&gt;<i> The reason I introduced the AssetMetadata class is to supply metadata
</I>&gt;<i> information only for some requests that Cable Beach, the new asset
</I>&gt;<i> server, supports. Now I realize that this was probably a premature
</I>&gt;<i> optimization.
</I>&gt;<i> 
</I>&gt;<i> Instead of modifying the DB schema, we could have AssetBase inherit
</I>&gt;<i> from AssetMetadata, as I outlined before[1]. Alternatively, we could
</I>&gt;<i> get rid of AssetMetadata altogether and store everything in AssetBase
</I>&gt;<i> as before, splitting out the metadata sometime in the future when a
</I>&gt;<i> use case warrants it.
</I>&gt;<i> 
</I>&gt;<i> What do you think?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Mike
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> [1] <A HREF="https://lists.berlios.de/pipermail/opensim-dev/2009-February/004918.html">https://lists.berlios.de/pipermail/opensim-dev/2009-February/004918.html</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005101.html">[Opensim-dev] Please do not revert fixes without careful	comtemplation
</A></li>
	<LI>Next message: <A HREF="005095.html">[Opensim-dev] Please do not revert	fixes	without	careful	comtemplation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5093">[ date ]</a>
              <a href="thread.html#5093">[ thread ]</a>
              <a href="subject.html#5093">[ subject ]</a>
              <a href="author.html#5093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
