<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] oddities with asset storage
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20oddities%20with%20asset%20storage&In-Reply-To=%3C72C1C9E5780A134F896530D480F22BB703020DBB%40hermes.bitlab.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005148.html">
   <LINK REL="Next"  HREF="005152.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] oddities with asset storage</H1>
    <B>Dirk Krause</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20oddities%20with%20asset%20storage&In-Reply-To=%3C72C1C9E5780A134F896530D480F22BB703020DBB%40hermes.bitlab.de%3E"
       TITLE="[Opensim-dev] oddities with asset storage">dirk.krause at pixelpark.com
       </A><BR>
    <I>Wed Feb 18 15:54:46 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005148.html">[Opensim-dev] Big thanks to the Installer Team
</A></li>
        <LI>Next message: <A HREF="005152.html">[Opensim-dev] oddities with asset storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5151">[ date ]</a>
              <a href="thread.html#5151">[ thread ]</a>
              <a href="subject.html#5151">[ subject ]</a>
              <a href="author.html#5151">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I did a little test with a fresh OpenSim installation (yes, thanks for
the installer!),
to get a grip on what I learned from Melanie yesterday.

I wrote a little python script to help me monitor these tables:
  inventoryStore/inventoryItems
  assetStorage/assets
<A HREF="http://pastebin.com/mc9e6574">http://pastebin.com/mc9e6574</A> , be warned: ugly code.

I started OpenSim and logged in a 'Test User' with the SL viewer.

(Just to mention it - first time log in in as test users creates
4 'blank' entries in assets.)

The inventoryItems table was initially empty.

Now I rezzed a cube and renamed it to 'p1'.
inventoryStore/inventoryItems was still empty.
To my surprise no new entry shows up in assetStorage/assets.

Picking up the cube ('take') created an entry named 'p1' in the
inventory and in the asset table.

Now I renamed the cube in Test Users inventory to 'p2'.
The name in inventoryStore/inventoryItems changes to 'p2'.
The entry in assetStorage/assets stays 'p1'. As mentioned on the list
before,
the asset name is useless, since the user only sees the name in the
inventory.

Now I deleted 'p2' in my inventory - 'p2's parentfolderID changes to
'Trash'.
Now I emptied the trash - the inventory table is empty again, which is
fine,
but here's the big one:
   the assetStorage/assets still holds the reference to 'p1'.

Just to make sure I shut down the simulator and opened it again, and it
was still there.

Now, doesn't that mean, that the database increases over time with no
hope to find
these assets that actually should be gone? or is there some magic
purging that happens,
and that I missed?

This would mean that any grid runs into a severe problem over time.

Best,
  Dirk/Bart

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005148.html">[Opensim-dev] Big thanks to the Installer Team
</A></li>
	<LI>Next message: <A HREF="005152.html">[Opensim-dev] oddities with asset storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5151">[ date ]</a>
              <a href="thread.html#5151">[ thread ]</a>
              <a href="subject.html#5151">[ subject ]</a>
              <a href="author.html#5151">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
