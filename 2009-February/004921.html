<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] [Opensim-commits] r8236 - in trunk/OpenSim: ApplicationPlugins/Rest/Inventory Data/MSSQL Data/MySQL Data/NHibernate Data/SQLite Data/Tests Framework Framework/AssetLoader/Filesystem Framework/Communications/Cache Framework/Communications/Capabilities Grid/AssetServer Region/ClientStack/LindenUDP Region/Communications/Hypergrid Region/Environment/Modules/Agent/AssetTransaction Region/Environment/Modules/Agent/TextureSender Region/Environment/Modules/Avatar/Inventory/Archiver Region/Environment/Modules/Scripting/DynamicTexture Region/Environment/Modules/World/Archiver Region/Environment/Modules/World/Estate Region/Environment/Scenes Region/Environment/Scenes/Hypergrid Region/ScriptEngine/Shared/Api/Implementation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20%5BOpensim-commits%5D%20r8236%20-%20in%20trunk/OpenSim%3A%0A%20ApplicationPlugins/Rest/Inventory%20Data/MSSQL%20Data/MySQL%20Data/NHibernate%0A%20Data/SQLite%20Data/Tests%20Framework%20Framework/AssetLoader/Filesystem%0A%20Framework/Communications/Cache%20Framework/Communications/Capabilities%0A%20Grid/AssetServer%20Region/ClientStack/LindenUDP%0A%20Region/Communications/Hypergrid%0A%20Region/Environment/Modules/Agent/AssetTransaction%0A%20Region/Environment/Modules/Agent/TextureSender%0A%20Region/Environment/Modules/Avatar/Inventory/Archiver%0A%20Region/Environment/Modules/Scripting/DynamicTexture%0A%20Region/Environment/Modules/World/Archiver%0A%20Region/Environment/Modules/World/Estate%20Region/Environment/Scenes%0A%20Region/Environment/Scenes/Hypergrid%0A%20Region/ScriptEngine/Shared/Api/Implementation&In-Reply-To=%3C20090206145242.6dbacc52%40sumo%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004920.html">
   <LINK REL="Next"  HREF="004925.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] [Opensim-commits] r8236 - in trunk/OpenSim: ApplicationPlugins/Rest/Inventory Data/MSSQL Data/MySQL Data/NHibernate Data/SQLite Data/Tests Framework Framework/AssetLoader/Filesystem Framework/Communications/Cache Framework/Communications/Capabilities Grid/AssetServer Region/ClientStack/LindenUDP Region/Communications/Hypergrid Region/Environment/Modules/Agent/AssetTransaction Region/Environment/Modules/Agent/TextureSender Region/Environment/Modules/Avatar/Inventory/Archiver Region/Environment/Modules/Scripting/DynamicTexture Region/Environment/Modules/World/Archiver Region/Environment/Modules/World/Estate Region/Environment/Scenes Region/Environment/Scenes/Hypergrid Region/ScriptEngine/Shared/Api/Implementation</H1>
    <B>Mike Mazur</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20%5BOpensim-commits%5D%20r8236%20-%20in%20trunk/OpenSim%3A%0A%20ApplicationPlugins/Rest/Inventory%20Data/MSSQL%20Data/MySQL%20Data/NHibernate%0A%20Data/SQLite%20Data/Tests%20Framework%20Framework/AssetLoader/Filesystem%0A%20Framework/Communications/Cache%20Framework/Communications/Capabilities%0A%20Grid/AssetServer%20Region/ClientStack/LindenUDP%0A%20Region/Communications/Hypergrid%0A%20Region/Environment/Modules/Agent/AssetTransaction%0A%20Region/Environment/Modules/Agent/TextureSender%0A%20Region/Environment/Modules/Avatar/Inventory/Archiver%0A%20Region/Environment/Modules/Scripting/DynamicTexture%0A%20Region/Environment/Modules/World/Archiver%0A%20Region/Environment/Modules/World/Estate%20Region/Environment/Scenes%0A%20Region/Environment/Scenes/Hypergrid%0A%20Region/ScriptEngine/Shared/Api/Implementation&In-Reply-To=%3C20090206145242.6dbacc52%40sumo%3E"
       TITLE="[Opensim-dev] [Opensim-commits] r8236 - in trunk/OpenSim: ApplicationPlugins/Rest/Inventory Data/MSSQL Data/MySQL Data/NHibernate Data/SQLite Data/Tests Framework Framework/AssetLoader/Filesystem Framework/Communications/Cache Framework/Communications/Capabilities Grid/AssetServer Region/ClientStack/LindenUDP Region/Communications/Hypergrid Region/Environment/Modules/Agent/AssetTransaction Region/Environment/Modules/Agent/TextureSender Region/Environment/Modules/Avatar/Inventory/Archiver Region/Environment/Modules/Scripting/DynamicTexture Region/Environment/Modules/World/Archiver Region/Environment/Modules/World/Estate Region/Environment/Scenes Region/Environment/Scenes/Hypergrid Region/ScriptEngine/Shared/Api/Implementation">mmazur at gmail.com
       </A><BR>
    <I>Fri Feb  6 06:52:42 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="004920.html">[Opensim-dev] Organization and naming patterns of commands on the console
</A></li>
        <LI>Next message: <A HREF="004925.html">[Opensim-dev] [Opensim-commits] r8236 - in trunk/OpenSim: ApplicationPlugins/Rest/Inventory Data/MSSQL Data/MySQL Data/NHibernate Data/SQLite Data/Tests Framework Framework/AssetLoader/Filesystem Framework/Communications/Cache Framework/Communications/Capabilities Grid/AssetServer Region/ClientStack/LindenUDP Region/Communications/Hypergrid Region/Environment/Modules/Agent/AssetTransaction Region/Environment/Modules/Agent/TextureSender Region/Environment/Modules/Avatar/Inventory/Archiver Region/Environment/Modules/Scripting/DynamicTexture Region/Environment/Modules/World/Archiver Region/Environment/Modules/World/Estate Region/Environment/Scenes Region/Environment/Scenes/Hypergrid Region/ScriptEngine/Shared/Api/Implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4921">[ date ]</a>
              <a href="thread.html#4921">[ thread ]</a>
              <a href="subject.html#4921">[ subject ]</a>
              <a href="author.html#4921">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Thu, 05 Feb 2009 09:04:45 -0500
Sean Dague &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">sdague at gmail.com</A>&gt; wrote:

&gt;<i> Mike Mazur wrote:
</I>&gt;<i> &lt;snip&gt;
</I>&gt;<i> &gt; Of these columns, everything except data (and probably id) is
</I>&gt;<i> &gt; actually metadata that describes the asset. In the database it
</I>&gt;<i> &gt; makes sense to store all this information in the same table since
</I>&gt;<i> &gt; there's a tight coupling between the data and its metadata.
</I>&gt;<i> 
</I>&gt;<i> These are either tightly coupled things, or not.  If they are tightly
</I>&gt;<i> coupled they are 1 object, 1 database table, and 1 level of xml.
</I>&gt;<i> 
</I>&gt;<i> If they are not tightly coupled they are 2 things.  2 objects, 2
</I>&gt;<i> database tables, and 2 levels of xml.
</I>&gt;<i> 
</I>&gt;<i> Anything else is madness, and definitely the wrong direction IMHO.
</I>&gt;<i> There is no explanation that's going to convince me that 2 objects
</I>&gt;<i> should map to 1 table, so don't bother trying. :)
</I>
Alright, an asset and its metadata are either two things or one thing.
After some reading I'm beginning to see the reason behind your strong
conviction. In  the interest of not changing the DB schema, let's try
to solve this by treating the asset data and its metadata as one object.

To do this, the AssetBase class can inherit from the AssetMetadata
class. The result would be as follows:

  class AssetMetadata
  {
    string _name;
    string _description;
    // etc...

    public virtual string Name
    {
      get { return _name; }
      set { _name = value; }
    }
    // etc
  }

  class AssetBase : AssetMetadata
  {
    byte[] _data;

    public virtual byte[] Data
    {
      get { return _data; }
      set { _data = value; }
    }
  }

This way the AssetBase class pretty much remains as-is, and the
AssetMetadata class can be used on its own to represent just the
metadata. One class (AssetBase) mapped to one table (assets), and no
changes to the mappers are necessary.

Would this work? One thing I'm not sure about is how NHibernate would
handle fetching only metadata or persisting AssetMetadata objects. This
is pretty straightforward in the other AssetStores already in OpenSim.

Thanks,
Mike

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004920.html">[Opensim-dev] Organization and naming patterns of commands on the console
</A></li>
	<LI>Next message: <A HREF="004925.html">[Opensim-dev] [Opensim-commits] r8236 - in trunk/OpenSim: ApplicationPlugins/Rest/Inventory Data/MSSQL Data/MySQL Data/NHibernate Data/SQLite Data/Tests Framework Framework/AssetLoader/Filesystem Framework/Communications/Cache Framework/Communications/Capabilities Grid/AssetServer Region/ClientStack/LindenUDP Region/Communications/Hypergrid Region/Environment/Modules/Agent/AssetTransaction Region/Environment/Modules/Agent/TextureSender Region/Environment/Modules/Avatar/Inventory/Archiver Region/Environment/Modules/Scripting/DynamicTexture Region/Environment/Modules/World/Archiver Region/Environment/Modules/World/Estate Region/Environment/Scenes Region/Environment/Scenes/Hypergrid Region/ScriptEngine/Shared/Api/Implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4921">[ date ]</a>
              <a href="thread.html#4921">[ thread ]</a>
              <a href="subject.html#4921">[ subject ]</a>
              <a href="author.html#4921">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
