<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Opensim-dev] IClientAPI.GetDefaultAnimation
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/opensim-dev/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20IClientAPI.GetDefaultAnimation&In-Reply-To=%3C4B03EB59.5010901%40t-data.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007902.html">
   <LINK REL="Next"  HREF="007904.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Opensim-dev] IClientAPI.GetDefaultAnimation</H1>
    <B>Melanie</B> 
    <A HREF="mailto:opensim-dev%40lists.berlios.de?Subject=Re%3A%20%5BOpensim-dev%5D%20IClientAPI.GetDefaultAnimation&In-Reply-To=%3C4B03EB59.5010901%40t-data.com%3E"
       TITLE="[Opensim-dev] IClientAPI.GetDefaultAnimation">melanie at t-data.com
       </A><BR>
    <I>Wed Nov 18 13:40:57 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="007902.html">[Opensim-dev] IClientAPI.GetDefaultAnimation
</A></li>
        <LI>Next message: <A HREF="007904.html">[Opensim-dev] IClientAPI.GetDefaultAnimation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7903">[ date ]</a>
              <a href="thread.html#7903">[ thread ]</a>
              <a href="subject.html#7903">[ subject ]</a>
              <a href="author.html#7903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The purpose of this method is to provide the animations that are
hardcoded in the viewer. These are, specifically, the facial
expressions, which cannot be triggered any other way.

To allow LSL scripts to trigger those by name, we have a method in
the client view. This should really be in the client view, since
core should not be hardcoded to use linden UUIDs. The LL standard
animations file should actually not be read by a core component, the
core component (AvatarAnimations) should defer that tot he client view.

Melanie

Peter Newman wrote:
&gt;<i> Hello,
</I>&gt;<i> I'd like to know if there is a non-obvious reason why IClientAPI 
</I>&gt;<i> provides GetDefaultAnimation . The reason I ask is I've done some work 
</I>&gt;<i> with AvatarAnimations and related to not use magic strings (&quot;SIT&quot;, 
</I>&gt;<i> &quot;STAND&quot;, etc) for avatar states. However, I noticed the llStartAnimation 
</I>&gt;<i> implementation calls ScenePresence.AddAnimation, which calls 
</I>&gt;<i> IClientAPI.GetDefaultAnimation (and is the only place that calls it) . 
</I>&gt;<i> However, the only client that has an implementation of this function is 
</I>&gt;<i> the LLClient, all others return UUID.Zero or throw an exception.
</I>&gt;<i> 
</I>&gt;<i> In LLClient, the implementation there duplicates the functionality of 
</I>&gt;<i> AvatarAnimations, reading in the same file and parsing it into a 
</I>&gt;<i> duplicate of one of the data structures that AvatarAnimations provides.
</I>&gt;<i> 
</I>&gt;<i> I ask, is there a reason for the IClientAPI implementation to implement 
</I>&gt;<i> this function that seems to reproduce functionality available to 
</I>&gt;<i> ScenePresence already. Since the animation updates for moving don't use 
</I>&gt;<i> this function, it seems it is limited only to llStartAnimation.
</I>&gt;<i> 
</I>&gt;<i> My thought is, if there is no reason otherwise, to remove this function 
</I>&gt;<i> from IClientAPI, redirect the ScenePresence.AddAnimation to use the 
</I>&gt;<i> AvatarAnimation class. Even independent of the changes I've made for the 
</I>&gt;<i> removal of strings, it seems like this would be more efficient.
</I>&gt;<i> 
</I>&gt;<i> Peter N
</I>&gt;<i> aka Wizarth
</I>&gt;<i> <A HREF="http://www.wizarth.com.au/">http://www.wizarth.com.au/</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Opensim-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">Opensim-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/opensim-dev">https://lists.berlios.de/mailman/listinfo/opensim-dev</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007902.html">[Opensim-dev] IClientAPI.GetDefaultAnimation
</A></li>
	<LI>Next message: <A HREF="007904.html">[Opensim-dev] IClientAPI.GetDefaultAnimation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7903">[ date ]</a>
              <a href="thread.html#7903">[ thread ]</a>
              <a href="subject.html#7903">[ subject ]</a>
              <a href="author.html#7903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/opensim-dev">More information about the Opensim-dev
mailing list</a><br>
</body></html>
